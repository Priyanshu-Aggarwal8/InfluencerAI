(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function Hp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Oy(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var o=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return i[n]}})}),t}var Ol={exports:{}},qi={},$l={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rf;function $y(){if(Rf)return Te;Rf=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function x(E){return E===null||typeof E!="object"?null:(E=_&&E[_]||E["@@iterator"],typeof E=="function"?E:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,I={};function P(E,G,de){this.props=E,this.context=G,this.refs=I,this.updater=de||S}P.prototype.isReactComponent={},P.prototype.setState=function(E,G){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,G,"setState")},P.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function O(){}O.prototype=P.prototype;function z(E,G,de){this.props=E,this.context=G,this.refs=I,this.updater=de||S}var L=z.prototype=new O;L.constructor=z,k(L,P.prototype),L.isPureReactComponent=!0;var H=Array.isArray,X=Object.prototype.hasOwnProperty,F={current:null},Y={key:!0,ref:!0,__self:!0,__source:!0};function U(E,G,de){var Ae,Se={},Le=null,be=null;if(G!=null)for(Ae in G.ref!==void 0&&(be=G.ref),G.key!==void 0&&(Le=""+G.key),G)X.call(G,Ae)&&!Y.hasOwnProperty(Ae)&&(Se[Ae]=G[Ae]);var De=arguments.length-2;if(De===1)Se.children=de;else if(1<De){for(var Me=Array(De),pt=0;pt<De;pt++)Me[pt]=arguments[pt+2];Se.children=Me}if(E&&E.defaultProps)for(Ae in De=E.defaultProps,De)Se[Ae]===void 0&&(Se[Ae]=De[Ae]);return{$$typeof:i,type:E,key:Le,ref:be,props:Se,_owner:F.current}}function $(E,G){return{$$typeof:i,type:E.type,key:G,ref:E.ref,props:E.props,_owner:E._owner}}function R(E){return typeof E=="object"&&E!==null&&E.$$typeof===i}function te(E){var G={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(de){return G[de]})}var _e=/\/+/g;function xe(E,G){return typeof E=="object"&&E!==null&&E.key!=null?te(""+E.key):G.toString(36)}function fe(E,G,de,Ae,Se){var Le=typeof E;(Le==="undefined"||Le==="boolean")&&(E=null);var be=!1;if(E===null)be=!0;else switch(Le){case"string":case"number":be=!0;break;case"object":switch(E.$$typeof){case i:case e:be=!0}}if(be)return be=E,Se=Se(be),E=Ae===""?"."+xe(be,0):Ae,H(Se)?(de="",E!=null&&(de=E.replace(_e,"$&/")+"/"),fe(Se,G,de,"",function(pt){return pt})):Se!=null&&(R(Se)&&(Se=$(Se,de+(!Se.key||be&&be.key===Se.key?"":(""+Se.key).replace(_e,"$&/")+"/")+E)),G.push(Se)),1;if(be=0,Ae=Ae===""?".":Ae+":",H(E))for(var De=0;De<E.length;De++){Le=E[De];var Me=Ae+xe(Le,De);be+=fe(Le,G,de,Me,Se)}else if(Me=x(E),typeof Me=="function")for(E=Me.call(E),De=0;!(Le=E.next()).done;)Le=Le.value,Me=Ae+xe(Le,De++),be+=fe(Le,G,de,Me,Se);else if(Le==="object")throw G=String(E),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return be}function j(E,G,de){if(E==null)return E;var Ae=[],Se=0;return fe(E,Ae,"","",function(Le){return G.call(de,Le,Se++)}),Ae}function oe(E){if(E._status===-1){var G=E._result;G=G(),G.then(function(de){(E._status===0||E._status===-1)&&(E._status=1,E._result=de)},function(de){(E._status===0||E._status===-1)&&(E._status=2,E._result=de)}),E._status===-1&&(E._status=0,E._result=G)}if(E._status===1)return E._result.default;throw E._result}var q={current:null},B={transition:null},ee={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:B,ReactCurrentOwner:F};return Te.Children={map:j,forEach:function(E,G,de){j(E,function(){G.apply(this,arguments)},de)},count:function(E){var G=0;return j(E,function(){G++}),G},toArray:function(E){return j(E,function(G){return G})||[]},only:function(E){if(!R(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Te.Component=P,Te.Fragment=t,Te.Profiler=o,Te.PureComponent=z,Te.StrictMode=n,Te.Suspense=m,Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Te.cloneElement=function(E,G,de){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var Ae=k({},E.props),Se=E.key,Le=E.ref,be=E._owner;if(G!=null){if(G.ref!==void 0&&(Le=G.ref,be=F.current),G.key!==void 0&&(Se=""+G.key),E.type&&E.type.defaultProps)var De=E.type.defaultProps;for(Me in G)X.call(G,Me)&&!Y.hasOwnProperty(Me)&&(Ae[Me]=G[Me]===void 0&&De!==void 0?De[Me]:G[Me])}var Me=arguments.length-2;if(Me===1)Ae.children=de;else if(1<Me){De=Array(Me);for(var pt=0;pt<Me;pt++)De[pt]=arguments[pt+2];Ae.children=De}return{$$typeof:i,type:E.type,key:Se,ref:Le,props:Ae,_owner:be}},Te.createContext=function(E){return E={$$typeof:d,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:a,_context:E},E.Consumer=E},Te.createElement=U,Te.createFactory=function(E){var G=U.bind(null,E);return G.type=E,G},Te.createRef=function(){return{current:null}},Te.forwardRef=function(E){return{$$typeof:f,render:E}},Te.isValidElement=R,Te.lazy=function(E){return{$$typeof:y,_payload:{_status:-1,_result:E},_init:oe}},Te.memo=function(E,G){return{$$typeof:p,type:E,compare:G===void 0?null:G}},Te.startTransition=function(E){var G=B.transition;B.transition={};try{E()}finally{B.transition=G}},Te.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Te.useCallback=function(E,G){return q.current.useCallback(E,G)},Te.useContext=function(E){return q.current.useContext(E)},Te.useDebugValue=function(){},Te.useDeferredValue=function(E){return q.current.useDeferredValue(E)},Te.useEffect=function(E,G){return q.current.useEffect(E,G)},Te.useId=function(){return q.current.useId()},Te.useImperativeHandle=function(E,G,de){return q.current.useImperativeHandle(E,G,de)},Te.useInsertionEffect=function(E,G){return q.current.useInsertionEffect(E,G)},Te.useLayoutEffect=function(E,G){return q.current.useLayoutEffect(E,G)},Te.useMemo=function(E,G){return q.current.useMemo(E,G)},Te.useReducer=function(E,G,de){return q.current.useReducer(E,G,de)},Te.useRef=function(E){return q.current.useRef(E)},Te.useState=function(E){return q.current.useState(E)},Te.useSyncExternalStore=function(E,G,de){return q.current.useSyncExternalStore(E,G,de)},Te.useTransition=function(){return q.current.useTransition()},Te.version="18.2.0",Te}var Df;function Eu(){return Df||(Df=1,$l.exports=$y()),$l.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf;function Vy(){if(Lf)return qi;Lf=1;var i=Eu(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(f,m,p){var y,_={},x=null,S=null;p!==void 0&&(x=""+p),m.key!==void 0&&(x=""+m.key),m.ref!==void 0&&(S=m.ref);for(y in m)n.call(m,y)&&!a.hasOwnProperty(y)&&(_[y]=m[y]);if(f&&f.defaultProps)for(y in m=f.defaultProps,m)_[y]===void 0&&(_[y]=m[y]);return{$$typeof:e,type:f,key:x,ref:S,props:_,_owner:o.current}}return qi.Fragment=t,qi.jsx=d,qi.jsxs=d,qi}var Ff;function By(){return Ff||(Ff=1,Ol.exports=Vy()),Ol.exports}var w=By(),V=Eu();const zy=Hp(V);var ws={},Vl={exports:{}},wt={},Bl={exports:{}},zl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uf;function Gy(){return Uf||(Uf=1,function(i){function e(B,ee){var E=B.length;B.push(ee);e:for(;0<E;){var G=E-1>>>1,de=B[G];if(0<o(de,ee))B[G]=ee,B[E]=de,E=G;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var ee=B[0],E=B.pop();if(E!==ee){B[0]=E;e:for(var G=0,de=B.length,Ae=de>>>1;G<Ae;){var Se=2*(G+1)-1,Le=B[Se],be=Se+1,De=B[be];if(0>o(Le,E))be<de&&0>o(De,Le)?(B[G]=De,B[be]=E,G=be):(B[G]=Le,B[Se]=E,G=Se);else if(be<de&&0>o(De,E))B[G]=De,B[be]=E,G=be;else break e}}return ee}function o(B,ee){var E=B.sortIndex-ee.sortIndex;return E!==0?E:B.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var d=Date,f=d.now();i.unstable_now=function(){return d.now()-f}}var m=[],p=[],y=1,_=null,x=3,S=!1,k=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(B){for(var ee=t(p);ee!==null;){if(ee.callback===null)n(p);else if(ee.startTime<=B)n(p),ee.sortIndex=ee.expirationTime,e(m,ee);else break;ee=t(p)}}function H(B){if(I=!1,L(B),!k)if(t(m)!==null)k=!0,oe(X);else{var ee=t(p);ee!==null&&q(H,ee.startTime-B)}}function X(B,ee){k=!1,I&&(I=!1,O(U),U=-1),S=!0;var E=x;try{for(L(ee),_=t(m);_!==null&&(!(_.expirationTime>ee)||B&&!te());){var G=_.callback;if(typeof G=="function"){_.callback=null,x=_.priorityLevel;var de=G(_.expirationTime<=ee);ee=i.unstable_now(),typeof de=="function"?_.callback=de:_===t(m)&&n(m),L(ee)}else n(m);_=t(m)}if(_!==null)var Ae=!0;else{var Se=t(p);Se!==null&&q(H,Se.startTime-ee),Ae=!1}return Ae}finally{_=null,x=E,S=!1}}var F=!1,Y=null,U=-1,$=5,R=-1;function te(){return!(i.unstable_now()-R<$)}function _e(){if(Y!==null){var B=i.unstable_now();R=B;var ee=!0;try{ee=Y(!0,B)}finally{ee?xe():(F=!1,Y=null)}}else F=!1}var xe;if(typeof z=="function")xe=function(){z(_e)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,j=fe.port2;fe.port1.onmessage=_e,xe=function(){j.postMessage(null)}}else xe=function(){P(_e,0)};function oe(B){Y=B,F||(F=!0,xe())}function q(B,ee){U=P(function(){B(i.unstable_now())},ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_continueExecution=function(){k||S||(k=!0,oe(X))},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_getFirstCallbackNode=function(){return t(m)},i.unstable_next=function(B){switch(x){case 1:case 2:case 3:var ee=3;break;default:ee=x}var E=x;x=ee;try{return B()}finally{x=E}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(B,ee){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var E=x;x=B;try{return ee()}finally{x=E}},i.unstable_scheduleCallback=function(B,ee,E){var G=i.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?G+E:G):E=G,B){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=E+de,B={id:y++,callback:ee,priorityLevel:B,startTime:E,expirationTime:de,sortIndex:-1},E>G?(B.sortIndex=E,e(p,B),t(m)===null&&B===t(p)&&(I?(O(U),U=-1):I=!0,q(H,E-G))):(B.sortIndex=de,e(m,B),k||S||(k=!0,oe(X))),B},i.unstable_shouldYield=te,i.unstable_wrapCallback=function(B){var ee=x;return function(){var E=x;x=ee;try{return B.apply(this,arguments)}finally{x=E}}}}(zl)),zl}var Of;function qy(){return Of||(Of=1,Bl.exports=Gy()),Bl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f;function Hy(){if($f)return wt;$f=1;var i=Eu(),e=qy();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,o={};function a(r,s){d(r,s),d(r+"Capture",s)}function d(r,s){for(o[r]=s,r=0;r<s.length;r++)n.add(s[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},_={};function x(r){return m.call(_,r)?!0:m.call(y,r)?!1:p.test(r)?_[r]=!0:(y[r]=!0,!1)}function S(r,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function k(r,s,l,h){if(s===null||typeof s>"u"||S(r,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function I(r,s,l,h,g,v,C){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=v,this.removeEmptyString=C}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){P[r]=new I(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];P[s]=new I(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){P[r]=new I(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){P[r]=new I(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){P[r]=new I(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){P[r]=new I(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){P[r]=new I(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){P[r]=new I(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){P[r]=new I(r,5,!1,r.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function z(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(O,z);P[s]=new I(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(O,z);P[s]=new I(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(O,z);P[s]=new I(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){P[r]=new I(r,1,!1,r.toLowerCase(),null,!1,!1)}),P.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){P[r]=new I(r,1,!1,r.toLowerCase(),null,!0,!0)});function L(r,s,l,h){var g=P.hasOwnProperty(s)?P[s]:null;(g!==null?g.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(k(s,l,g,h)&&(l=null),h||g===null?x(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):g.mustUseProperty?r[g.propertyName]=l===null?g.type===3?!1:"":l:(s=g.attributeName,h=g.attributeNamespace,l===null?r.removeAttribute(s):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,h?r.setAttributeNS(h,s,l):r.setAttribute(s,l))))}var H=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),F=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),te=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),B=Symbol.iterator;function ee(r){return r===null||typeof r!="object"?null:(r=B&&r[B]||r["@@iterator"],typeof r=="function"?r:null)}var E=Object.assign,G;function de(r){if(G===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);G=s&&s[1]||""}return`
`+G+r}var Ae=!1;function Se(r,s){if(!r||Ae)return"";Ae=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(D){var h=D}Reflect.construct(r,[],s)}else{try{s.call()}catch(D){h=D}r.call(s.prototype)}else{try{throw Error()}catch(D){h=D}r()}}catch(D){if(D&&h&&typeof D.stack=="string"){for(var g=D.stack.split(`
`),v=h.stack.split(`
`),C=g.length-1,T=v.length-1;1<=C&&0<=T&&g[C]!==v[T];)T--;for(;1<=C&&0<=T;C--,T--)if(g[C]!==v[T]){if(C!==1||T!==1)do if(C--,T--,0>T||g[C]!==v[T]){var A=`
`+g[C].replace(" at new "," at ");return r.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",r.displayName)),A}while(1<=C&&0<=T);break}}}finally{Ae=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?de(r):""}function Le(r){switch(r.tag){case 5:return de(r.type);case 16:return de("Lazy");case 13:return de("Suspense");case 19:return de("SuspenseList");case 0:case 2:case 15:return r=Se(r.type,!1),r;case 11:return r=Se(r.type.render,!1),r;case 1:return r=Se(r.type,!0),r;default:return""}}function be(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Y:return"Fragment";case F:return"Portal";case $:return"Profiler";case U:return"StrictMode";case xe:return"Suspense";case fe:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case te:return(r.displayName||"Context")+".Consumer";case R:return(r._context.displayName||"Context")+".Provider";case _e:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case j:return s=r.displayName||null,s!==null?s:be(r.type)||"Memo";case oe:s=r._payload,r=r._init;try{return be(r(s))}catch{}}return null}function De(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(s);case 8:return s===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Me(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function pt(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Bm(r){var s=pt(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,v=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return g.call(this)},set:function(C){h=""+C,v.call(this,C)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function uo(r){r._valueTracker||(r._valueTracker=Bm(r))}function Uu(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return r&&(h=pt(r)?r.checked?"true":"false":r.value),r=h,r!==l?(s.setValue(r),!0):!1}function co(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Hs(r,s){var l=s.checked;return E({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Ou(r,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=Me(s.value!=null?s.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function $u(r,s){s=s.checked,s!=null&&L(r,"checked",s,!1)}function Ws(r,s){$u(r,s);var l=Me(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?js(r,s.type,l):s.hasOwnProperty("defaultValue")&&js(r,s.type,Me(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Vu(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function js(r,s,l){(s!=="number"||co(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var oi=Array.isArray;function lr(r,s,l,h){if(r=r.options,s){s={};for(var g=0;g<l.length;g++)s["$"+l[g]]=!0;for(l=0;l<r.length;l++)g=s.hasOwnProperty("$"+r[l].value),r[l].selected!==g&&(r[l].selected=g),g&&h&&(r[l].defaultSelected=!0)}else{for(l=""+Me(l),s=null,g=0;g<r.length;g++){if(r[g].value===l){r[g].selected=!0,h&&(r[g].defaultSelected=!0);return}s!==null||r[g].disabled||(s=r[g])}s!==null&&(s.selected=!0)}}function Js(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return E({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Bu(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(oi(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:Me(l)}}function zu(r,s){var l=Me(s.value),h=Me(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function Gu(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function qu(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ks(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?qu(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var fo,Hu=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,g){MSApp.execUnsafeLocalFunction(function(){return r(s,l,h,g)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(fo=fo||document.createElement("div"),fo.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=fo.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function si(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zm=["Webkit","ms","Moz","O"];Object.keys(ai).forEach(function(r){zm.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),ai[s]=ai[r]})});function Wu(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||ai.hasOwnProperty(r)&&ai[r]?(""+s).trim():s+"px"}function ju(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,g=Wu(l,s[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,g):r[l]=g}}var Gm=E({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ys(r,s){if(s){if(Gm[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Zs(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qs=null;function Xs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ea=null,ur=null,cr=null;function Ju(r){if(r=Ni(r)){if(typeof ea!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Lo(s),ea(r.stateNode,r.type,s))}}function Ku(r){ur?cr?cr.push(r):cr=[r]:ur=r}function Yu(){if(ur){var r=ur,s=cr;if(cr=ur=null,Ju(r),s)for(r=0;r<s.length;r++)Ju(s[r])}}function Zu(r,s){return r(s)}function Qu(){}var ta=!1;function Xu(r,s,l){if(ta)return r(s,l);ta=!0;try{return Zu(r,s,l)}finally{ta=!1,(ur!==null||cr!==null)&&(Qu(),Yu())}}function li(r,s){var l=r.stateNode;if(l===null)return null;var h=Lo(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var na=!1;if(f)try{var ui={};Object.defineProperty(ui,"passive",{get:function(){na=!0}}),window.addEventListener("test",ui,ui),window.removeEventListener("test",ui,ui)}catch{na=!1}function qm(r,s,l,h,g,v,C,T,A){var D=Array.prototype.slice.call(arguments,3);try{s.apply(l,D)}catch(J){this.onError(J)}}var ci=!1,ho=null,po=!1,ra=null,Hm={onError:function(r){ci=!0,ho=r}};function Wm(r,s,l,h,g,v,C,T,A){ci=!1,ho=null,qm.apply(Hm,arguments)}function jm(r,s,l,h,g,v,C,T,A){if(Wm.apply(this,arguments),ci){if(ci){var D=ho;ci=!1,ho=null}else throw Error(t(198));po||(po=!0,ra=D)}}function Vn(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function ec(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function tc(r){if(Vn(r)!==r)throw Error(t(188))}function Jm(r){var s=r.alternate;if(!s){if(s=Vn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,h=s;;){var g=l.return;if(g===null)break;var v=g.alternate;if(v===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===l)return tc(g),r;if(v===h)return tc(g),s;v=v.sibling}throw Error(t(188))}if(l.return!==h.return)l=g,h=v;else{for(var C=!1,T=g.child;T;){if(T===l){C=!0,l=g,h=v;break}if(T===h){C=!0,h=g,l=v;break}T=T.sibling}if(!C){for(T=v.child;T;){if(T===l){C=!0,l=v,h=g;break}if(T===h){C=!0,h=v,l=g;break}T=T.sibling}if(!C)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function nc(r){return r=Jm(r),r!==null?rc(r):null}function rc(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=rc(r);if(s!==null)return s;r=r.sibling}return null}var ic=e.unstable_scheduleCallback,oc=e.unstable_cancelCallback,Km=e.unstable_shouldYield,Ym=e.unstable_requestPaint,je=e.unstable_now,Zm=e.unstable_getCurrentPriorityLevel,ia=e.unstable_ImmediatePriority,sc=e.unstable_UserBlockingPriority,mo=e.unstable_NormalPriority,Qm=e.unstable_LowPriority,ac=e.unstable_IdlePriority,go=null,Ht=null;function Xm(r){if(Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(go,r,void 0,(r.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:ng,eg=Math.log,tg=Math.LN2;function ng(r){return r>>>=0,r===0?32:31-(eg(r)/tg|0)|0}var yo=64,vo=4194304;function di(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function _o(r,s){var l=r.pendingLanes;if(l===0)return 0;var h=0,g=r.suspendedLanes,v=r.pingedLanes,C=l&268435455;if(C!==0){var T=C&~g;T!==0?h=di(T):(v&=C,v!==0&&(h=di(v)))}else C=l&~g,C!==0?h=di(C):v!==0&&(h=di(v));if(h===0)return 0;if(s!==0&&s!==h&&(s&g)===0&&(g=h&-h,v=s&-s,g>=v||g===16&&(v&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)l=31-Ft(s),g=1<<l,h|=r[l],s&=~g;return h}function rg(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ig(r,s){for(var l=r.suspendedLanes,h=r.pingedLanes,g=r.expirationTimes,v=r.pendingLanes;0<v;){var C=31-Ft(v),T=1<<C,A=g[C];A===-1?((T&l)===0||(T&h)!==0)&&(g[C]=rg(T,s)):A<=s&&(r.expiredLanes|=T),v&=~T}}function oa(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function lc(){var r=yo;return yo<<=1,(yo&4194240)===0&&(yo=64),r}function sa(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function fi(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Ft(s),r[s]=l}function og(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var g=31-Ft(l),v=1<<g;s[g]=0,h[g]=-1,r[g]=-1,l&=~v}}function aa(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var h=31-Ft(l),g=1<<h;g&s|r[h]&s&&(r[h]|=s),l&=~g}}var Re=0;function uc(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var cc,la,dc,fc,hc,ua=!1,wo=[],dn=null,fn=null,hn=null,hi=new Map,pi=new Map,pn=[],sg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pc(r,s){switch(r){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":fn=null;break;case"mouseover":case"mouseout":hn=null;break;case"pointerover":case"pointerout":hi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":pi.delete(s.pointerId)}}function mi(r,s,l,h,g,v){return r===null||r.nativeEvent!==v?(r={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:v,targetContainers:[g]},s!==null&&(s=Ni(s),s!==null&&la(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),r)}function ag(r,s,l,h,g){switch(s){case"focusin":return dn=mi(dn,r,s,l,h,g),!0;case"dragenter":return fn=mi(fn,r,s,l,h,g),!0;case"mouseover":return hn=mi(hn,r,s,l,h,g),!0;case"pointerover":var v=g.pointerId;return hi.set(v,mi(hi.get(v)||null,r,s,l,h,g)),!0;case"gotpointercapture":return v=g.pointerId,pi.set(v,mi(pi.get(v)||null,r,s,l,h,g)),!0}return!1}function mc(r){var s=Bn(r.target);if(s!==null){var l=Vn(s);if(l!==null){if(s=l.tag,s===13){if(s=ec(l),s!==null){r.blockedOn=s,hc(r.priority,function(){dc(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Co(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=da(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);Qs=h,l.target.dispatchEvent(h),Qs=null}else return s=Ni(l),s!==null&&la(s),r.blockedOn=l,!1;s.shift()}return!0}function gc(r,s,l){Co(r)&&l.delete(s)}function lg(){ua=!1,dn!==null&&Co(dn)&&(dn=null),fn!==null&&Co(fn)&&(fn=null),hn!==null&&Co(hn)&&(hn=null),hi.forEach(gc),pi.forEach(gc)}function gi(r,s){r.blockedOn===s&&(r.blockedOn=null,ua||(ua=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lg)))}function yi(r){function s(g){return gi(g,r)}if(0<wo.length){gi(wo[0],r);for(var l=1;l<wo.length;l++){var h=wo[l];h.blockedOn===r&&(h.blockedOn=null)}}for(dn!==null&&gi(dn,r),fn!==null&&gi(fn,r),hn!==null&&gi(hn,r),hi.forEach(s),pi.forEach(s),l=0;l<pn.length;l++)h=pn[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<pn.length&&(l=pn[0],l.blockedOn===null);)mc(l),l.blockedOn===null&&pn.shift()}var dr=H.ReactCurrentBatchConfig,xo=!0;function ug(r,s,l,h){var g=Re,v=dr.transition;dr.transition=null;try{Re=1,ca(r,s,l,h)}finally{Re=g,dr.transition=v}}function cg(r,s,l,h){var g=Re,v=dr.transition;dr.transition=null;try{Re=4,ca(r,s,l,h)}finally{Re=g,dr.transition=v}}function ca(r,s,l,h){if(xo){var g=da(r,s,l,h);if(g===null)Ia(r,s,h,So,l),pc(r,h);else if(ag(g,r,s,l,h))h.stopPropagation();else if(pc(r,h),s&4&&-1<sg.indexOf(r)){for(;g!==null;){var v=Ni(g);if(v!==null&&cc(v),v=da(r,s,l,h),v===null&&Ia(r,s,h,So,l),v===g)break;g=v}g!==null&&h.stopPropagation()}else Ia(r,s,h,null,l)}}var So=null;function da(r,s,l,h){if(So=null,r=Xs(h),r=Bn(r),r!==null)if(s=Vn(r),s===null)r=null;else if(l=s.tag,l===13){if(r=ec(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return So=r,null}function yc(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zm()){case ia:return 1;case sc:return 4;case mo:case Qm:return 16;case ac:return 536870912;default:return 16}default:return 16}}var mn=null,fa=null,To=null;function vc(){if(To)return To;var r,s=fa,l=s.length,h,g="value"in mn?mn.value:mn.textContent,v=g.length;for(r=0;r<l&&s[r]===g[r];r++);var C=l-r;for(h=1;h<=C&&s[l-h]===g[v-h];h++);return To=g.slice(r,1<h?1-h:void 0)}function Eo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ko(){return!0}function _c(){return!1}function xt(r){function s(l,h,g,v,C){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=v,this.target=C,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(l=r[T],this[T]=l?l(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ko:_c,this.isPropagationStopped=_c,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ko)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ko)},persist:function(){},isPersistent:ko}),s}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=xt(fr),vi=E({},fr,{view:0,detail:0}),dg=xt(vi),pa,ma,_i,Ao=E({},vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ya,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==_i&&(_i&&r.type==="mousemove"?(pa=r.screenX-_i.screenX,ma=r.screenY-_i.screenY):ma=pa=0,_i=r),pa)},movementY:function(r){return"movementY"in r?r.movementY:ma}}),wc=xt(Ao),fg=E({},Ao,{dataTransfer:0}),hg=xt(fg),pg=E({},vi,{relatedTarget:0}),ga=xt(pg),mg=E({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),gg=xt(mg),yg=E({},fr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),vg=xt(yg),_g=E({},fr,{data:0}),Cc=xt(_g),wg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sg(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=xg[r])?!!s[r]:!1}function ya(){return Sg}var Tg=E({},vi,{key:function(r){if(r.key){var s=wg[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Eo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Cg[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ya,charCode:function(r){return r.type==="keypress"?Eo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Eo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Eg=xt(Tg),kg=E({},Ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xc=xt(kg),Ag=E({},vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ya}),Ig=xt(Ag),Ng=E({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pg=xt(Ng),bg=E({},Ao,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Mg=xt(bg),Rg=[9,13,27,32],va=f&&"CompositionEvent"in window,wi=null;f&&"documentMode"in document&&(wi=document.documentMode);var Dg=f&&"TextEvent"in window&&!wi,Sc=f&&(!va||wi&&8<wi&&11>=wi),Tc=" ",Ec=!1;function kc(r,s){switch(r){case"keyup":return Rg.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ac(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var hr=!1;function Lg(r,s){switch(r){case"compositionend":return Ac(s);case"keypress":return s.which!==32?null:(Ec=!0,Tc);case"textInput":return r=s.data,r===Tc&&Ec?null:r;default:return null}}function Fg(r,s){if(hr)return r==="compositionend"||!va&&kc(r,s)?(r=vc(),To=fa=mn=null,hr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Sc&&s.locale!=="ko"?null:s.data;default:return null}}var Ug={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ic(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Ug[r.type]:s==="textarea"}function Nc(r,s,l,h){Ku(h),s=Mo(s,"onChange"),0<s.length&&(l=new ha("onChange","change",null,l,h),r.push({event:l,listeners:s}))}var Ci=null,xi=null;function Og(r){jc(r,0)}function Io(r){var s=vr(r);if(Uu(s))return r}function $g(r,s){if(r==="change")return s}var Pc=!1;if(f){var _a;if(f){var wa="oninput"in document;if(!wa){var bc=document.createElement("div");bc.setAttribute("oninput","return;"),wa=typeof bc.oninput=="function"}_a=wa}else _a=!1;Pc=_a&&(!document.documentMode||9<document.documentMode)}function Mc(){Ci&&(Ci.detachEvent("onpropertychange",Rc),xi=Ci=null)}function Rc(r){if(r.propertyName==="value"&&Io(xi)){var s=[];Nc(s,xi,r,Xs(r)),Xu(Og,s)}}function Vg(r,s,l){r==="focusin"?(Mc(),Ci=s,xi=l,Ci.attachEvent("onpropertychange",Rc)):r==="focusout"&&Mc()}function Bg(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Io(xi)}function zg(r,s){if(r==="click")return Io(s)}function Gg(r,s){if(r==="input"||r==="change")return Io(s)}function qg(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Ut=typeof Object.is=="function"?Object.is:qg;function Si(r,s){if(Ut(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!m.call(s,g)||!Ut(r[g],s[g]))return!1}return!0}function Dc(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Lc(r,s){var l=Dc(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=s&&h>=s)return{node:l,offset:s-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Dc(l)}}function Fc(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Fc(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Uc(){for(var r=window,s=co();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=co(r.document)}return s}function Ca(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function Hg(r){var s=Uc(),l=r.focusedElem,h=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&Fc(l.ownerDocument.documentElement,l)){if(h!==null&&Ca(l)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var g=l.textContent.length,v=Math.min(h.start,g);h=h.end===void 0?v:Math.min(h.end,g),!r.extend&&v>h&&(g=h,h=v,v=g),g=Lc(l,v);var C=Lc(l,h);g&&C&&(r.rangeCount!==1||r.anchorNode!==g.node||r.anchorOffset!==g.offset||r.focusNode!==C.node||r.focusOffset!==C.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),r.removeAllRanges(),v>h?(r.addRange(s),r.extend(C.node,C.offset)):(s.setEnd(C.node,C.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Wg=f&&"documentMode"in document&&11>=document.documentMode,pr=null,xa=null,Ti=null,Sa=!1;function Oc(r,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Sa||pr==null||pr!==co(h)||(h=pr,"selectionStart"in h&&Ca(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ti&&Si(Ti,h)||(Ti=h,h=Mo(xa,"onSelect"),0<h.length&&(s=new ha("onSelect","select",null,s,l),r.push({event:s,listeners:h}),s.target=pr)))}function No(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var mr={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionend:No("Transition","TransitionEnd")},Ta={},$c={};f&&($c=document.createElement("div").style,"AnimationEvent"in window||(delete mr.animationend.animation,delete mr.animationiteration.animation,delete mr.animationstart.animation),"TransitionEvent"in window||delete mr.transitionend.transition);function Po(r){if(Ta[r])return Ta[r];if(!mr[r])return r;var s=mr[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in $c)return Ta[r]=s[l];return r}var Vc=Po("animationend"),Bc=Po("animationiteration"),zc=Po("animationstart"),Gc=Po("transitionend"),qc=new Map,Hc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gn(r,s){qc.set(r,s),a(s,[r])}for(var Ea=0;Ea<Hc.length;Ea++){var ka=Hc[Ea],jg=ka.toLowerCase(),Jg=ka[0].toUpperCase()+ka.slice(1);gn(jg,"on"+Jg)}gn(Vc,"onAnimationEnd"),gn(Bc,"onAnimationIteration"),gn(zc,"onAnimationStart"),gn("dblclick","onDoubleClick"),gn("focusin","onFocus"),gn("focusout","onBlur"),gn(Gc,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ei));function Wc(r,s,l){var h=r.type||"unknown-event";r.currentTarget=l,jm(h,s,void 0,r),r.currentTarget=null}function jc(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],g=h.event;h=h.listeners;e:{var v=void 0;if(s)for(var C=h.length-1;0<=C;C--){var T=h[C],A=T.instance,D=T.currentTarget;if(T=T.listener,A!==v&&g.isPropagationStopped())break e;Wc(g,T,D),v=A}else for(C=0;C<h.length;C++){if(T=h[C],A=T.instance,D=T.currentTarget,T=T.listener,A!==v&&g.isPropagationStopped())break e;Wc(g,T,D),v=A}}}if(po)throw r=ra,po=!1,ra=null,r}function $e(r,s){var l=s[Da];l===void 0&&(l=s[Da]=new Set);var h=r+"__bubble";l.has(h)||(Jc(s,r,2,!1),l.add(h))}function Aa(r,s,l){var h=0;s&&(h|=4),Jc(l,r,h,s)}var bo="_reactListening"+Math.random().toString(36).slice(2);function ki(r){if(!r[bo]){r[bo]=!0,n.forEach(function(l){l!=="selectionchange"&&(Kg.has(l)||Aa(l,!1,r),Aa(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[bo]||(s[bo]=!0,Aa("selectionchange",!1,s))}}function Jc(r,s,l,h){switch(yc(s)){case 1:var g=ug;break;case 4:g=cg;break;default:g=ca}l=g.bind(null,s,l,r),g=void 0,!na||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),h?g!==void 0?r.addEventListener(s,l,{capture:!0,passive:g}):r.addEventListener(s,l,!0):g!==void 0?r.addEventListener(s,l,{passive:g}):r.addEventListener(s,l,!1)}function Ia(r,s,l,h,g){var v=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var T=h.stateNode.containerInfo;if(T===g||T.nodeType===8&&T.parentNode===g)break;if(C===4)for(C=h.return;C!==null;){var A=C.tag;if((A===3||A===4)&&(A=C.stateNode.containerInfo,A===g||A.nodeType===8&&A.parentNode===g))return;C=C.return}for(;T!==null;){if(C=Bn(T),C===null)return;if(A=C.tag,A===5||A===6){h=v=C;continue e}T=T.parentNode}}h=h.return}Xu(function(){var D=v,J=Xs(l),K=[];e:{var W=qc.get(r);if(W!==void 0){var re=ha,se=r;switch(r){case"keypress":if(Eo(l)===0)break e;case"keydown":case"keyup":re=Eg;break;case"focusin":se="focus",re=ga;break;case"focusout":se="blur",re=ga;break;case"beforeblur":case"afterblur":re=ga;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=hg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Ig;break;case Vc:case Bc:case zc:re=gg;break;case Gc:re=Pg;break;case"scroll":re=dg;break;case"wheel":re=Mg;break;case"copy":case"cut":case"paste":re=vg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=xc}var le=(s&4)!==0,Je=!le&&r==="scroll",b=le?W!==null?W+"Capture":null:W;le=[];for(var N=D,M;N!==null;){M=N;var Z=M.stateNode;if(M.tag===5&&Z!==null&&(M=Z,b!==null&&(Z=li(N,b),Z!=null&&le.push(Ai(N,Z,M)))),Je)break;N=N.return}0<le.length&&(W=new re(W,se,null,l,J),K.push({event:W,listeners:le}))}}if((s&7)===0){e:{if(W=r==="mouseover"||r==="pointerover",re=r==="mouseout"||r==="pointerout",W&&l!==Qs&&(se=l.relatedTarget||l.fromElement)&&(Bn(se)||se[en]))break e;if((re||W)&&(W=J.window===J?J:(W=J.ownerDocument)?W.defaultView||W.parentWindow:window,re?(se=l.relatedTarget||l.toElement,re=D,se=se?Bn(se):null,se!==null&&(Je=Vn(se),se!==Je||se.tag!==5&&se.tag!==6)&&(se=null)):(re=null,se=D),re!==se)){if(le=wc,Z="onMouseLeave",b="onMouseEnter",N="mouse",(r==="pointerout"||r==="pointerover")&&(le=xc,Z="onPointerLeave",b="onPointerEnter",N="pointer"),Je=re==null?W:vr(re),M=se==null?W:vr(se),W=new le(Z,N+"leave",re,l,J),W.target=Je,W.relatedTarget=M,Z=null,Bn(J)===D&&(le=new le(b,N+"enter",se,l,J),le.target=M,le.relatedTarget=Je,Z=le),Je=Z,re&&se)t:{for(le=re,b=se,N=0,M=le;M;M=gr(M))N++;for(M=0,Z=b;Z;Z=gr(Z))M++;for(;0<N-M;)le=gr(le),N--;for(;0<M-N;)b=gr(b),M--;for(;N--;){if(le===b||b!==null&&le===b.alternate)break t;le=gr(le),b=gr(b)}le=null}else le=null;re!==null&&Kc(K,W,re,le,!1),se!==null&&Je!==null&&Kc(K,Je,se,le,!0)}}e:{if(W=D?vr(D):window,re=W.nodeName&&W.nodeName.toLowerCase(),re==="select"||re==="input"&&W.type==="file")var ue=$g;else if(Ic(W))if(Pc)ue=Gg;else{ue=Bg;var he=Vg}else(re=W.nodeName)&&re.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(ue=zg);if(ue&&(ue=ue(r,D))){Nc(K,ue,l,J);break e}he&&he(r,W,D),r==="focusout"&&(he=W._wrapperState)&&he.controlled&&W.type==="number"&&js(W,"number",W.value)}switch(he=D?vr(D):window,r){case"focusin":(Ic(he)||he.contentEditable==="true")&&(pr=he,xa=D,Ti=null);break;case"focusout":Ti=xa=pr=null;break;case"mousedown":Sa=!0;break;case"contextmenu":case"mouseup":case"dragend":Sa=!1,Oc(K,l,J);break;case"selectionchange":if(Wg)break;case"keydown":case"keyup":Oc(K,l,J)}var pe;if(va)e:{switch(r){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else hr?kc(r,l)&&(ge="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(ge="onCompositionStart");ge&&(Sc&&l.locale!=="ko"&&(hr||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&hr&&(pe=vc()):(mn=J,fa="value"in mn?mn.value:mn.textContent,hr=!0)),he=Mo(D,ge),0<he.length&&(ge=new Cc(ge,r,null,l,J),K.push({event:ge,listeners:he}),pe?ge.data=pe:(pe=Ac(l),pe!==null&&(ge.data=pe)))),(pe=Dg?Lg(r,l):Fg(r,l))&&(D=Mo(D,"onBeforeInput"),0<D.length&&(J=new Cc("onBeforeInput","beforeinput",null,l,J),K.push({event:J,listeners:D}),J.data=pe))}jc(K,s)})}function Ai(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Mo(r,s){for(var l=s+"Capture",h=[];r!==null;){var g=r,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=li(r,l),v!=null&&h.unshift(Ai(r,v,g)),v=li(r,s),v!=null&&h.push(Ai(r,v,g))),r=r.return}return h}function gr(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Kc(r,s,l,h,g){for(var v=s._reactName,C=[];l!==null&&l!==h;){var T=l,A=T.alternate,D=T.stateNode;if(A!==null&&A===h)break;T.tag===5&&D!==null&&(T=D,g?(A=li(l,v),A!=null&&C.unshift(Ai(l,A,T))):g||(A=li(l,v),A!=null&&C.push(Ai(l,A,T)))),l=l.return}C.length!==0&&r.push({event:s,listeners:C})}var Yg=/\r\n?/g,Zg=/\u0000|\uFFFD/g;function Yc(r){return(typeof r=="string"?r:""+r).replace(Yg,`
`).replace(Zg,"")}function Ro(r,s,l){if(s=Yc(s),Yc(r)!==s&&l)throw Error(t(425))}function Do(){}var Na=null,Pa=null;function ba(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ma=typeof setTimeout=="function"?setTimeout:void 0,Qg=typeof clearTimeout=="function"?clearTimeout:void 0,Zc=typeof Promise=="function"?Promise:void 0,Xg=typeof queueMicrotask=="function"?queueMicrotask:typeof Zc<"u"?function(r){return Zc.resolve(null).then(r).catch(ey)}:Ma;function ey(r){setTimeout(function(){throw r})}function Ra(r,s){var l=s,h=0;do{var g=l.nextSibling;if(r.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(h===0){r.removeChild(g),yi(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=g}while(l);yi(s)}function yn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Qc(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var yr=Math.random().toString(36).slice(2),Wt="__reactFiber$"+yr,Ii="__reactProps$"+yr,en="__reactContainer$"+yr,Da="__reactEvents$"+yr,ty="__reactListeners$"+yr,ny="__reactHandles$"+yr;function Bn(r){var s=r[Wt];if(s)return s;for(var l=r.parentNode;l;){if(s=l[en]||l[Wt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=Qc(r);r!==null;){if(l=r[Wt])return l;r=Qc(r)}return s}r=l,l=r.parentNode}return null}function Ni(r){return r=r[Wt]||r[en],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function vr(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Lo(r){return r[Ii]||null}var La=[],_r=-1;function vn(r){return{current:r}}function Ve(r){0>_r||(r.current=La[_r],La[_r]=null,_r--)}function Fe(r,s){_r++,La[_r]=r.current,r.current=s}var _n={},st=vn(_n),mt=vn(!1),zn=_n;function wr(r,s){var l=r.type.contextTypes;if(!l)return _n;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in l)g[v]=s[v];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=g),g}function gt(r){return r=r.childContextTypes,r!=null}function Fo(){Ve(mt),Ve(st)}function Xc(r,s,l){if(st.current!==_n)throw Error(t(168));Fe(st,s),Fe(mt,l)}function ed(r,s,l){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var g in h)if(!(g in s))throw Error(t(108,De(r)||"Unknown",g));return E({},l,h)}function Uo(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||_n,zn=st.current,Fe(st,r),Fe(mt,mt.current),!0}function td(r,s,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=ed(r,s,zn),h.__reactInternalMemoizedMergedChildContext=r,Ve(mt),Ve(st),Fe(st,r)):Ve(mt),Fe(mt,l)}var tn=null,Oo=!1,Fa=!1;function nd(r){tn===null?tn=[r]:tn.push(r)}function ry(r){Oo=!0,nd(r)}function wn(){if(!Fa&&tn!==null){Fa=!0;var r=0,s=Re;try{var l=tn;for(Re=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}tn=null,Oo=!1}catch(g){throw tn!==null&&(tn=tn.slice(r+1)),ic(ia,wn),g}finally{Re=s,Fa=!1}}return null}var Cr=[],xr=0,$o=null,Vo=0,At=[],It=0,Gn=null,nn=1,rn="";function qn(r,s){Cr[xr++]=Vo,Cr[xr++]=$o,$o=r,Vo=s}function rd(r,s,l){At[It++]=nn,At[It++]=rn,At[It++]=Gn,Gn=r;var h=nn;r=rn;var g=32-Ft(h)-1;h&=~(1<<g),l+=1;var v=32-Ft(s)+g;if(30<v){var C=g-g%5;v=(h&(1<<C)-1).toString(32),h>>=C,g-=C,nn=1<<32-Ft(s)+g|l<<g|h,rn=v+r}else nn=1<<v|l<<g|h,rn=r}function Ua(r){r.return!==null&&(qn(r,1),rd(r,1,0))}function Oa(r){for(;r===$o;)$o=Cr[--xr],Cr[xr]=null,Vo=Cr[--xr],Cr[xr]=null;for(;r===Gn;)Gn=At[--It],At[It]=null,rn=At[--It],At[It]=null,nn=At[--It],At[It]=null}var St=null,Tt=null,Ge=!1,Ot=null;function id(r,s){var l=Mt(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function od(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,St=r,Tt=yn(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,St=r,Tt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=Gn!==null?{id:nn,overflow:rn}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Mt(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,St=r,Tt=null,!0):!1;default:return!1}}function $a(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Va(r){if(Ge){var s=Tt;if(s){var l=s;if(!od(r,s)){if($a(r))throw Error(t(418));s=yn(l.nextSibling);var h=St;s&&od(r,s)?id(h,l):(r.flags=r.flags&-4097|2,Ge=!1,St=r)}}else{if($a(r))throw Error(t(418));r.flags=r.flags&-4097|2,Ge=!1,St=r}}}function sd(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;St=r}function Bo(r){if(r!==St)return!1;if(!Ge)return sd(r),Ge=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!ba(r.type,r.memoizedProps)),s&&(s=Tt)){if($a(r))throw ad(),Error(t(418));for(;s;)id(r,s),s=yn(s.nextSibling)}if(sd(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){Tt=yn(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}Tt=null}}else Tt=St?yn(r.stateNode.nextSibling):null;return!0}function ad(){for(var r=Tt;r;)r=yn(r.nextSibling)}function Sr(){Tt=St=null,Ge=!1}function Ba(r){Ot===null?Ot=[r]:Ot.push(r)}var iy=H.ReactCurrentBatchConfig;function $t(r,s){if(r&&r.defaultProps){s=E({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}var zo=vn(null),Go=null,Tr=null,za=null;function Ga(){za=Tr=Go=null}function qa(r){var s=zo.current;Ve(zo),r._currentValue=s}function Ha(r,s,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===l)break;r=r.return}}function Er(r,s){Go=r,za=Tr=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(yt=!0),r.firstContext=null)}function Nt(r){var s=r._currentValue;if(za!==r)if(r={context:r,memoizedValue:s,next:null},Tr===null){if(Go===null)throw Error(t(308));Tr=r,Go.dependencies={lanes:0,firstContext:r}}else Tr=Tr.next=r;return s}var Hn=null;function Wa(r){Hn===null?Hn=[r]:Hn.push(r)}function ld(r,s,l,h){var g=s.interleaved;return g===null?(l.next=l,Wa(s)):(l.next=g.next,g.next=l),s.interleaved=l,on(r,h)}function on(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var Cn=!1;function ja(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ud(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function sn(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function xn(r,s,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Ie&2)!==0){var g=h.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),h.pending=s,on(r,l)}return g=h.interleaved,g===null?(s.next=s,Wa(h)):(s.next=g.next,g.next=s),h.interleaved=s,on(r,l)}function qo(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,aa(r,l)}}function cd(r,s){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var C={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?g=v=C:v=v.next=C,l=l.next}while(l!==null);v===null?g=v=s:v=v.next=s}else g=v=s;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function Ho(r,s,l,h){var g=r.updateQueue;Cn=!1;var v=g.firstBaseUpdate,C=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var A=T,D=A.next;A.next=null,C===null?v=D:C.next=D,C=A;var J=r.alternate;J!==null&&(J=J.updateQueue,T=J.lastBaseUpdate,T!==C&&(T===null?J.firstBaseUpdate=D:T.next=D,J.lastBaseUpdate=A))}if(v!==null){var K=g.baseState;C=0,J=D=A=null,T=v;do{var W=T.lane,re=T.eventTime;if((h&W)===W){J!==null&&(J=J.next={eventTime:re,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var se=r,le=T;switch(W=s,re=l,le.tag){case 1:if(se=le.payload,typeof se=="function"){K=se.call(re,K,W);break e}K=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=le.payload,W=typeof se=="function"?se.call(re,K,W):se,W==null)break e;K=E({},K,W);break e;case 2:Cn=!0}}T.callback!==null&&T.lane!==0&&(r.flags|=64,W=g.effects,W===null?g.effects=[T]:W.push(T))}else re={eventTime:re,lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},J===null?(D=J=re,A=K):J=J.next=re,C|=W;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;W=T,T=W.next,W.next=null,g.lastBaseUpdate=W,g.shared.pending=null}}while(!0);if(J===null&&(A=K),g.baseState=A,g.firstBaseUpdate=D,g.lastBaseUpdate=J,s=g.shared.interleaved,s!==null){g=s;do C|=g.lane,g=g.next;while(g!==s)}else v===null&&(g.shared.lanes=0);Jn|=C,r.lanes=C,r.memoizedState=K}}function dd(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],g=h.callback;if(g!==null){if(h.callback=null,h=l,typeof g!="function")throw Error(t(191,g));g.call(h)}}}var fd=new i.Component().refs;function Ja(r,s,l,h){s=r.memoizedState,l=l(h,s),l=l==null?s:E({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Wo={isMounted:function(r){return(r=r._reactInternals)?Vn(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var h=dt(),g=kn(r),v=sn(h,g);v.payload=s,l!=null&&(v.callback=l),s=xn(r,v,g),s!==null&&(zt(s,r,g,h),qo(s,r,g))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var h=dt(),g=kn(r),v=sn(h,g);v.tag=1,v.payload=s,l!=null&&(v.callback=l),s=xn(r,v,g),s!==null&&(zt(s,r,g,h),qo(s,r,g))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=dt(),h=kn(r),g=sn(l,h);g.tag=2,s!=null&&(g.callback=s),s=xn(r,g,h),s!==null&&(zt(s,r,h,l),qo(s,r,h))}};function hd(r,s,l,h,g,v,C){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,v,C):s.prototype&&s.prototype.isPureReactComponent?!Si(l,h)||!Si(g,v):!0}function pd(r,s,l){var h=!1,g=_n,v=s.contextType;return typeof v=="object"&&v!==null?v=Nt(v):(g=gt(s)?zn:st.current,h=s.contextTypes,v=(h=h!=null)?wr(r,g):_n),s=new s(l,v),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Wo,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=g,r.__reactInternalMemoizedMaskedChildContext=v),s}function md(r,s,l,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==r&&Wo.enqueueReplaceState(s,s.state,null)}function Ka(r,s,l,h){var g=r.stateNode;g.props=l,g.state=r.memoizedState,g.refs=fd,ja(r);var v=s.contextType;typeof v=="object"&&v!==null?g.context=Nt(v):(v=gt(s)?zn:st.current,g.context=wr(r,v)),g.state=r.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(Ja(r,s,v,l),g.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&Wo.enqueueReplaceState(g,g.state,null),Ho(r,l,g,h),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308)}function Pi(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var g=h,v=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(C){var T=g.refs;T===fd&&(T=g.refs={}),C===null?delete T[v]:T[v]=C},s._stringRef=v,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function jo(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function gd(r){var s=r._init;return s(r._payload)}function yd(r){function s(b,N){if(r){var M=b.deletions;M===null?(b.deletions=[N],b.flags|=16):M.push(N)}}function l(b,N){if(!r)return null;for(;N!==null;)s(b,N),N=N.sibling;return null}function h(b,N){for(b=new Map;N!==null;)N.key!==null?b.set(N.key,N):b.set(N.index,N),N=N.sibling;return b}function g(b,N){return b=In(b,N),b.index=0,b.sibling=null,b}function v(b,N,M){return b.index=M,r?(M=b.alternate,M!==null?(M=M.index,M<N?(b.flags|=2,N):M):(b.flags|=2,N)):(b.flags|=1048576,N)}function C(b){return r&&b.alternate===null&&(b.flags|=2),b}function T(b,N,M,Z){return N===null||N.tag!==6?(N=Ml(M,b.mode,Z),N.return=b,N):(N=g(N,M),N.return=b,N)}function A(b,N,M,Z){var ue=M.type;return ue===Y?J(b,N,M.props.children,Z,M.key):N!==null&&(N.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===oe&&gd(ue)===N.type)?(Z=g(N,M.props),Z.ref=Pi(b,N,M),Z.return=b,Z):(Z=fs(M.type,M.key,M.props,null,b.mode,Z),Z.ref=Pi(b,N,M),Z.return=b,Z)}function D(b,N,M,Z){return N===null||N.tag!==4||N.stateNode.containerInfo!==M.containerInfo||N.stateNode.implementation!==M.implementation?(N=Rl(M,b.mode,Z),N.return=b,N):(N=g(N,M.children||[]),N.return=b,N)}function J(b,N,M,Z,ue){return N===null||N.tag!==7?(N=Qn(M,b.mode,Z,ue),N.return=b,N):(N=g(N,M),N.return=b,N)}function K(b,N,M){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Ml(""+N,b.mode,M),N.return=b,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case X:return M=fs(N.type,N.key,N.props,null,b.mode,M),M.ref=Pi(b,null,N),M.return=b,M;case F:return N=Rl(N,b.mode,M),N.return=b,N;case oe:var Z=N._init;return K(b,Z(N._payload),M)}if(oi(N)||ee(N))return N=Qn(N,b.mode,M,null),N.return=b,N;jo(b,N)}return null}function W(b,N,M,Z){var ue=N!==null?N.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return ue!==null?null:T(b,N,""+M,Z);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case X:return M.key===ue?A(b,N,M,Z):null;case F:return M.key===ue?D(b,N,M,Z):null;case oe:return ue=M._init,W(b,N,ue(M._payload),Z)}if(oi(M)||ee(M))return ue!==null?null:J(b,N,M,Z,null);jo(b,M)}return null}function re(b,N,M,Z,ue){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return b=b.get(M)||null,T(N,b,""+Z,ue);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case X:return b=b.get(Z.key===null?M:Z.key)||null,A(N,b,Z,ue);case F:return b=b.get(Z.key===null?M:Z.key)||null,D(N,b,Z,ue);case oe:var he=Z._init;return re(b,N,M,he(Z._payload),ue)}if(oi(Z)||ee(Z))return b=b.get(M)||null,J(N,b,Z,ue,null);jo(N,Z)}return null}function se(b,N,M,Z){for(var ue=null,he=null,pe=N,ge=N=0,tt=null;pe!==null&&ge<M.length;ge++){pe.index>ge?(tt=pe,pe=null):tt=pe.sibling;var Ne=W(b,pe,M[ge],Z);if(Ne===null){pe===null&&(pe=tt);break}r&&pe&&Ne.alternate===null&&s(b,pe),N=v(Ne,N,ge),he===null?ue=Ne:he.sibling=Ne,he=Ne,pe=tt}if(ge===M.length)return l(b,pe),Ge&&qn(b,ge),ue;if(pe===null){for(;ge<M.length;ge++)pe=K(b,M[ge],Z),pe!==null&&(N=v(pe,N,ge),he===null?ue=pe:he.sibling=pe,he=pe);return Ge&&qn(b,ge),ue}for(pe=h(b,pe);ge<M.length;ge++)tt=re(pe,b,ge,M[ge],Z),tt!==null&&(r&&tt.alternate!==null&&pe.delete(tt.key===null?ge:tt.key),N=v(tt,N,ge),he===null?ue=tt:he.sibling=tt,he=tt);return r&&pe.forEach(function(Nn){return s(b,Nn)}),Ge&&qn(b,ge),ue}function le(b,N,M,Z){var ue=ee(M);if(typeof ue!="function")throw Error(t(150));if(M=ue.call(M),M==null)throw Error(t(151));for(var he=ue=null,pe=N,ge=N=0,tt=null,Ne=M.next();pe!==null&&!Ne.done;ge++,Ne=M.next()){pe.index>ge?(tt=pe,pe=null):tt=pe.sibling;var Nn=W(b,pe,Ne.value,Z);if(Nn===null){pe===null&&(pe=tt);break}r&&pe&&Nn.alternate===null&&s(b,pe),N=v(Nn,N,ge),he===null?ue=Nn:he.sibling=Nn,he=Nn,pe=tt}if(Ne.done)return l(b,pe),Ge&&qn(b,ge),ue;if(pe===null){for(;!Ne.done;ge++,Ne=M.next())Ne=K(b,Ne.value,Z),Ne!==null&&(N=v(Ne,N,ge),he===null?ue=Ne:he.sibling=Ne,he=Ne);return Ge&&qn(b,ge),ue}for(pe=h(b,pe);!Ne.done;ge++,Ne=M.next())Ne=re(pe,b,ge,Ne.value,Z),Ne!==null&&(r&&Ne.alternate!==null&&pe.delete(Ne.key===null?ge:Ne.key),N=v(Ne,N,ge),he===null?ue=Ne:he.sibling=Ne,he=Ne);return r&&pe.forEach(function(Uy){return s(b,Uy)}),Ge&&qn(b,ge),ue}function Je(b,N,M,Z){if(typeof M=="object"&&M!==null&&M.type===Y&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case X:e:{for(var ue=M.key,he=N;he!==null;){if(he.key===ue){if(ue=M.type,ue===Y){if(he.tag===7){l(b,he.sibling),N=g(he,M.props.children),N.return=b,b=N;break e}}else if(he.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===oe&&gd(ue)===he.type){l(b,he.sibling),N=g(he,M.props),N.ref=Pi(b,he,M),N.return=b,b=N;break e}l(b,he);break}else s(b,he);he=he.sibling}M.type===Y?(N=Qn(M.props.children,b.mode,Z,M.key),N.return=b,b=N):(Z=fs(M.type,M.key,M.props,null,b.mode,Z),Z.ref=Pi(b,N,M),Z.return=b,b=Z)}return C(b);case F:e:{for(he=M.key;N!==null;){if(N.key===he)if(N.tag===4&&N.stateNode.containerInfo===M.containerInfo&&N.stateNode.implementation===M.implementation){l(b,N.sibling),N=g(N,M.children||[]),N.return=b,b=N;break e}else{l(b,N);break}else s(b,N);N=N.sibling}N=Rl(M,b.mode,Z),N.return=b,b=N}return C(b);case oe:return he=M._init,Je(b,N,he(M._payload),Z)}if(oi(M))return se(b,N,M,Z);if(ee(M))return le(b,N,M,Z);jo(b,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,N!==null&&N.tag===6?(l(b,N.sibling),N=g(N,M),N.return=b,b=N):(l(b,N),N=Ml(M,b.mode,Z),N.return=b,b=N),C(b)):l(b,N)}return Je}var kr=yd(!0),vd=yd(!1),bi={},jt=vn(bi),Mi=vn(bi),Ri=vn(bi);function Wn(r){if(r===bi)throw Error(t(174));return r}function Ya(r,s){switch(Fe(Ri,s),Fe(Mi,r),Fe(jt,bi),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ks(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=Ks(s,r)}Ve(jt),Fe(jt,s)}function Ar(){Ve(jt),Ve(Mi),Ve(Ri)}function _d(r){Wn(Ri.current);var s=Wn(jt.current),l=Ks(s,r.type);s!==l&&(Fe(Mi,r),Fe(jt,l))}function Za(r){Mi.current===r&&(Ve(jt),Ve(Mi))}var qe=vn(0);function Jo(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Qa=[];function Xa(){for(var r=0;r<Qa.length;r++)Qa[r]._workInProgressVersionPrimary=null;Qa.length=0}var Ko=H.ReactCurrentDispatcher,el=H.ReactCurrentBatchConfig,jn=0,He=null,Ze=null,Xe=null,Yo=!1,Di=!1,Li=0,oy=0;function at(){throw Error(t(321))}function tl(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Ut(r[l],s[l]))return!1;return!0}function nl(r,s,l,h,g,v){if(jn=v,He=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ko.current=r===null||r.memoizedState===null?uy:cy,r=l(h,g),Di){v=0;do{if(Di=!1,Li=0,25<=v)throw Error(t(301));v+=1,Xe=Ze=null,s.updateQueue=null,Ko.current=dy,r=l(h,g)}while(Di)}if(Ko.current=Xo,s=Ze!==null&&Ze.next!==null,jn=0,Xe=Ze=He=null,Yo=!1,s)throw Error(t(300));return r}function rl(){var r=Li!==0;return Li=0,r}function Jt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?He.memoizedState=Xe=r:Xe=Xe.next=r,Xe}function Pt(){if(Ze===null){var r=He.alternate;r=r!==null?r.memoizedState:null}else r=Ze.next;var s=Xe===null?He.memoizedState:Xe.next;if(s!==null)Xe=s,Ze=r;else{if(r===null)throw Error(t(310));Ze=r,r={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Xe===null?He.memoizedState=Xe=r:Xe=Xe.next=r}return Xe}function Fi(r,s){return typeof s=="function"?s(r):s}function il(r){var s=Pt(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=Ze,g=h.baseQueue,v=l.pending;if(v!==null){if(g!==null){var C=g.next;g.next=v.next,v.next=C}h.baseQueue=g=v,l.pending=null}if(g!==null){v=g.next,h=h.baseState;var T=C=null,A=null,D=v;do{var J=D.lane;if((jn&J)===J)A!==null&&(A=A.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),h=D.hasEagerState?D.eagerState:r(h,D.action);else{var K={lane:J,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};A===null?(T=A=K,C=h):A=A.next=K,He.lanes|=J,Jn|=J}D=D.next}while(D!==null&&D!==v);A===null?C=h:A.next=T,Ut(h,s.memoizedState)||(yt=!0),s.memoizedState=h,s.baseState=C,s.baseQueue=A,l.lastRenderedState=h}if(r=l.interleaved,r!==null){g=r;do v=g.lane,He.lanes|=v,Jn|=v,g=g.next;while(g!==r)}else g===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function ol(r){var s=Pt(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,g=l.pending,v=s.memoizedState;if(g!==null){l.pending=null;var C=g=g.next;do v=r(v,C.action),C=C.next;while(C!==g);Ut(v,s.memoizedState)||(yt=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),l.lastRenderedState=v}return[v,h]}function wd(){}function Cd(r,s){var l=He,h=Pt(),g=s(),v=!Ut(h.memoizedState,g);if(v&&(h.memoizedState=g,yt=!0),h=h.queue,sl(Td.bind(null,l,h,r),[r]),h.getSnapshot!==s||v||Xe!==null&&Xe.memoizedState.tag&1){if(l.flags|=2048,Ui(9,Sd.bind(null,l,h,g,s),void 0,null),et===null)throw Error(t(349));(jn&30)!==0||xd(l,s,g)}return g}function xd(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=He.updateQueue,s===null?(s={lastEffect:null,stores:null},He.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function Sd(r,s,l,h){s.value=l,s.getSnapshot=h,Ed(s)&&kd(r)}function Td(r,s,l){return l(function(){Ed(s)&&kd(r)})}function Ed(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Ut(r,l)}catch{return!0}}function kd(r){var s=on(r,1);s!==null&&zt(s,r,1,-1)}function Ad(r){var s=Jt();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:r},s.queue=r,r=r.dispatch=ly.bind(null,He,r),[s.memoizedState,r]}function Ui(r,s,l,h){return r={tag:r,create:s,destroy:l,deps:h,next:null},s=He.updateQueue,s===null?(s={lastEffect:null,stores:null},He.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,s.lastEffect=r)),r}function Id(){return Pt().memoizedState}function Zo(r,s,l,h){var g=Jt();He.flags|=r,g.memoizedState=Ui(1|s,l,void 0,h===void 0?null:h)}function Qo(r,s,l,h){var g=Pt();h=h===void 0?null:h;var v=void 0;if(Ze!==null){var C=Ze.memoizedState;if(v=C.destroy,h!==null&&tl(h,C.deps)){g.memoizedState=Ui(s,l,v,h);return}}He.flags|=r,g.memoizedState=Ui(1|s,l,v,h)}function Nd(r,s){return Zo(8390656,8,r,s)}function sl(r,s){return Qo(2048,8,r,s)}function Pd(r,s){return Qo(4,2,r,s)}function bd(r,s){return Qo(4,4,r,s)}function Md(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Rd(r,s,l){return l=l!=null?l.concat([r]):null,Qo(4,4,Md.bind(null,s,r),l)}function al(){}function Dd(r,s){var l=Pt();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&tl(s,h[1])?h[0]:(l.memoizedState=[r,s],r)}function Ld(r,s){var l=Pt();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&tl(s,h[1])?h[0]:(r=r(),l.memoizedState=[r,s],r)}function Fd(r,s,l){return(jn&21)===0?(r.baseState&&(r.baseState=!1,yt=!0),r.memoizedState=l):(Ut(l,s)||(l=lc(),He.lanes|=l,Jn|=l,r.baseState=!0),s)}function sy(r,s){var l=Re;Re=l!==0&&4>l?l:4,r(!0);var h=el.transition;el.transition={};try{r(!1),s()}finally{Re=l,el.transition=h}}function Ud(){return Pt().memoizedState}function ay(r,s,l){var h=kn(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Od(r))$d(s,l);else if(l=ld(r,s,l,h),l!==null){var g=dt();zt(l,r,h,g),Vd(l,s,h)}}function ly(r,s,l){var h=kn(r),g={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Od(r))$d(s,g);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var C=s.lastRenderedState,T=v(C,l);if(g.hasEagerState=!0,g.eagerState=T,Ut(T,C)){var A=s.interleaved;A===null?(g.next=g,Wa(s)):(g.next=A.next,A.next=g),s.interleaved=g;return}}catch{}finally{}l=ld(r,s,g,h),l!==null&&(g=dt(),zt(l,r,h,g),Vd(l,s,h))}}function Od(r){var s=r.alternate;return r===He||s!==null&&s===He}function $d(r,s){Di=Yo=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function Vd(r,s,l){if((l&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,aa(r,l)}}var Xo={readContext:Nt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},uy={readContext:Nt,useCallback:function(r,s){return Jt().memoizedState=[r,s===void 0?null:s],r},useContext:Nt,useEffect:Nd,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,Zo(4194308,4,Md.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Zo(4194308,4,r,s)},useInsertionEffect:function(r,s){return Zo(4,2,r,s)},useMemo:function(r,s){var l=Jt();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var h=Jt();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=ay.bind(null,He,r),[h.memoizedState,r]},useRef:function(r){var s=Jt();return r={current:r},s.memoizedState=r},useState:Ad,useDebugValue:al,useDeferredValue:function(r){return Jt().memoizedState=r},useTransition:function(){var r=Ad(!1),s=r[0];return r=sy.bind(null,r[1]),Jt().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var h=He,g=Jt();if(Ge){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),et===null)throw Error(t(349));(jn&30)!==0||xd(h,s,l)}g.memoizedState=l;var v={value:l,getSnapshot:s};return g.queue=v,Nd(Td.bind(null,h,v,r),[r]),h.flags|=2048,Ui(9,Sd.bind(null,h,v,l,s),void 0,null),l},useId:function(){var r=Jt(),s=et.identifierPrefix;if(Ge){var l=rn,h=nn;l=(h&~(1<<32-Ft(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=Li++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=oy++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},cy={readContext:Nt,useCallback:Dd,useContext:Nt,useEffect:sl,useImperativeHandle:Rd,useInsertionEffect:Pd,useLayoutEffect:bd,useMemo:Ld,useReducer:il,useRef:Id,useState:function(){return il(Fi)},useDebugValue:al,useDeferredValue:function(r){var s=Pt();return Fd(s,Ze.memoizedState,r)},useTransition:function(){var r=il(Fi)[0],s=Pt().memoizedState;return[r,s]},useMutableSource:wd,useSyncExternalStore:Cd,useId:Ud,unstable_isNewReconciler:!1},dy={readContext:Nt,useCallback:Dd,useContext:Nt,useEffect:sl,useImperativeHandle:Rd,useInsertionEffect:Pd,useLayoutEffect:bd,useMemo:Ld,useReducer:ol,useRef:Id,useState:function(){return ol(Fi)},useDebugValue:al,useDeferredValue:function(r){var s=Pt();return Ze===null?s.memoizedState=r:Fd(s,Ze.memoizedState,r)},useTransition:function(){var r=ol(Fi)[0],s=Pt().memoizedState;return[r,s]},useMutableSource:wd,useSyncExternalStore:Cd,useId:Ud,unstable_isNewReconciler:!1};function Ir(r,s){try{var l="",h=s;do l+=Le(h),h=h.return;while(h);var g=l}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:r,source:s,stack:g,digest:null}}function ll(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function ul(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var fy=typeof WeakMap=="function"?WeakMap:Map;function Bd(r,s,l){l=sn(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){ss||(ss=!0,Tl=h),ul(r,s)},l}function zd(r,s,l){l=sn(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var g=s.value;l.payload=function(){return h(g)},l.callback=function(){ul(r,s)}}var v=r.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){ul(r,s),typeof h!="function"&&(Tn===null?Tn=new Set([this]):Tn.add(this));var C=s.stack;this.componentDidCatch(s.value,{componentStack:C!==null?C:""})}),l}function Gd(r,s,l){var h=r.pingCache;if(h===null){h=r.pingCache=new fy;var g=new Set;h.set(s,g)}else g=h.get(s),g===void 0&&(g=new Set,h.set(s,g));g.has(l)||(g.add(l),r=ky.bind(null,r,s,l),s.then(r,r))}function qd(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Hd(r,s,l,h,g){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=sn(-1,1),s.tag=2,xn(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=g,r)}var hy=H.ReactCurrentOwner,yt=!1;function ct(r,s,l,h){s.child=r===null?vd(s,null,l,h):kr(s,r.child,l,h)}function Wd(r,s,l,h,g){l=l.render;var v=s.ref;return Er(s,g),h=nl(r,s,l,h,v,g),l=rl(),r!==null&&!yt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~g,an(r,s,g)):(Ge&&l&&Ua(s),s.flags|=1,ct(r,s,h,g),s.child)}function jd(r,s,l,h,g){if(r===null){var v=l.type;return typeof v=="function"&&!bl(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=v,Jd(r,s,v,h,g)):(r=fs(l.type,null,h,s,s.mode,g),r.ref=s.ref,r.return=s,s.child=r)}if(v=r.child,(r.lanes&g)===0){var C=v.memoizedProps;if(l=l.compare,l=l!==null?l:Si,l(C,h)&&r.ref===s.ref)return an(r,s,g)}return s.flags|=1,r=In(v,h),r.ref=s.ref,r.return=s,s.child=r}function Jd(r,s,l,h,g){if(r!==null){var v=r.memoizedProps;if(Si(v,h)&&r.ref===s.ref)if(yt=!1,s.pendingProps=h=v,(r.lanes&g)!==0)(r.flags&131072)!==0&&(yt=!0);else return s.lanes=r.lanes,an(r,s,g)}return cl(r,s,l,h,g)}function Kd(r,s,l){var h=s.pendingProps,g=h.children,v=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(Pr,Et),Et|=l;else{if((l&1073741824)===0)return r=v!==null?v.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Fe(Pr,Et),Et|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:l,Fe(Pr,Et),Et|=h}else v!==null?(h=v.baseLanes|l,s.memoizedState=null):h=l,Fe(Pr,Et),Et|=h;return ct(r,s,g,l),s.child}function Yd(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function cl(r,s,l,h,g){var v=gt(l)?zn:st.current;return v=wr(s,v),Er(s,g),l=nl(r,s,l,h,v,g),h=rl(),r!==null&&!yt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~g,an(r,s,g)):(Ge&&h&&Ua(s),s.flags|=1,ct(r,s,l,g),s.child)}function Zd(r,s,l,h,g){if(gt(l)){var v=!0;Uo(s)}else v=!1;if(Er(s,g),s.stateNode===null)ts(r,s),pd(s,l,h),Ka(s,l,h,g),h=!0;else if(r===null){var C=s.stateNode,T=s.memoizedProps;C.props=T;var A=C.context,D=l.contextType;typeof D=="object"&&D!==null?D=Nt(D):(D=gt(l)?zn:st.current,D=wr(s,D));var J=l.getDerivedStateFromProps,K=typeof J=="function"||typeof C.getSnapshotBeforeUpdate=="function";K||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(T!==h||A!==D)&&md(s,C,h,D),Cn=!1;var W=s.memoizedState;C.state=W,Ho(s,h,C,g),A=s.memoizedState,T!==h||W!==A||mt.current||Cn?(typeof J=="function"&&(Ja(s,l,J,h),A=s.memoizedState),(T=Cn||hd(s,l,T,h,W,A,D))?(K||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(s.flags|=4194308)):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=A),C.props=h,C.state=A,C.context=D,h=T):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{C=s.stateNode,ud(r,s),T=s.memoizedProps,D=s.type===s.elementType?T:$t(s.type,T),C.props=D,K=s.pendingProps,W=C.context,A=l.contextType,typeof A=="object"&&A!==null?A=Nt(A):(A=gt(l)?zn:st.current,A=wr(s,A));var re=l.getDerivedStateFromProps;(J=typeof re=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(T!==K||W!==A)&&md(s,C,h,A),Cn=!1,W=s.memoizedState,C.state=W,Ho(s,h,C,g);var se=s.memoizedState;T!==K||W!==se||mt.current||Cn?(typeof re=="function"&&(Ja(s,l,re,h),se=s.memoizedState),(D=Cn||hd(s,l,D,h,W,se,A)||!1)?(J||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(h,se,A),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(h,se,A)),typeof C.componentDidUpdate=="function"&&(s.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof C.componentDidUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=se),C.props=h,C.state=se,C.context=A,h=D):(typeof C.componentDidUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&W===r.memoizedState||(s.flags|=1024),h=!1)}return dl(r,s,l,h,v,g)}function dl(r,s,l,h,g,v){Yd(r,s);var C=(s.flags&128)!==0;if(!h&&!C)return g&&td(s,l,!1),an(r,s,v);h=s.stateNode,hy.current=s;var T=C&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&C?(s.child=kr(s,r.child,null,v),s.child=kr(s,null,T,v)):ct(r,s,T,v),s.memoizedState=h.state,g&&td(s,l,!0),s.child}function Qd(r){var s=r.stateNode;s.pendingContext?Xc(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Xc(r,s.context,!1),Ya(r,s.containerInfo)}function Xd(r,s,l,h,g){return Sr(),Ba(g),s.flags|=256,ct(r,s,l,h),s.child}var fl={dehydrated:null,treeContext:null,retryLane:0};function hl(r){return{baseLanes:r,cachePool:null,transitions:null}}function ef(r,s,l){var h=s.pendingProps,g=qe.current,v=!1,C=(s.flags&128)!==0,T;if((T=C)||(T=r!==null&&r.memoizedState===null?!1:(g&2)!==0),T?(v=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(g|=1),Fe(qe,g&1),r===null)return Va(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(C=h.children,r=h.fallback,v?(h=s.mode,v=s.child,C={mode:"hidden",children:C},(h&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=C):v=hs(C,h,0,null),r=Qn(r,h,l,null),v.return=s,r.return=s,v.sibling=r,s.child=v,s.child.memoizedState=hl(l),s.memoizedState=fl,r):pl(s,C));if(g=r.memoizedState,g!==null&&(T=g.dehydrated,T!==null))return py(r,s,C,h,T,g,l);if(v){v=h.fallback,C=s.mode,g=r.child,T=g.sibling;var A={mode:"hidden",children:h.children};return(C&1)===0&&s.child!==g?(h=s.child,h.childLanes=0,h.pendingProps=A,s.deletions=null):(h=In(g,A),h.subtreeFlags=g.subtreeFlags&14680064),T!==null?v=In(T,v):(v=Qn(v,C,l,null),v.flags|=2),v.return=s,h.return=s,h.sibling=v,s.child=h,h=v,v=s.child,C=r.child.memoizedState,C=C===null?hl(l):{baseLanes:C.baseLanes|l,cachePool:null,transitions:C.transitions},v.memoizedState=C,v.childLanes=r.childLanes&~l,s.memoizedState=fl,h}return v=r.child,r=v.sibling,h=In(v,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=h,s.memoizedState=null,h}function pl(r,s){return s=hs({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function es(r,s,l,h){return h!==null&&Ba(h),kr(s,r.child,null,l),r=pl(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function py(r,s,l,h,g,v,C){if(l)return s.flags&256?(s.flags&=-257,h=ll(Error(t(422))),es(r,s,C,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(v=h.fallback,g=s.mode,h=hs({mode:"visible",children:h.children},g,0,null),v=Qn(v,g,C,null),v.flags|=2,h.return=s,v.return=s,h.sibling=v,s.child=h,(s.mode&1)!==0&&kr(s,r.child,null,C),s.child.memoizedState=hl(C),s.memoizedState=fl,v);if((s.mode&1)===0)return es(r,s,C,null);if(g.data==="$!"){if(h=g.nextSibling&&g.nextSibling.dataset,h)var T=h.dgst;return h=T,v=Error(t(419)),h=ll(v,h,void 0),es(r,s,C,h)}if(T=(C&r.childLanes)!==0,yt||T){if(h=et,h!==null){switch(C&-C){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(h.suspendedLanes|C))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,on(r,g),zt(h,r,g,-1))}return Pl(),h=ll(Error(t(421))),es(r,s,C,h)}return g.data==="$?"?(s.flags|=128,s.child=r.child,s=Ay.bind(null,r),g._reactRetry=s,null):(r=v.treeContext,Tt=yn(g.nextSibling),St=s,Ge=!0,Ot=null,r!==null&&(At[It++]=nn,At[It++]=rn,At[It++]=Gn,nn=r.id,rn=r.overflow,Gn=s),s=pl(s,h.children),s.flags|=4096,s)}function tf(r,s,l){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),Ha(r.return,s,l)}function ml(r,s,l,h,g){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=l,v.tailMode=g)}function nf(r,s,l){var h=s.pendingProps,g=h.revealOrder,v=h.tail;if(ct(r,s,h.children,l),h=qe.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&tf(r,l,s);else if(r.tag===19)tf(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Fe(qe,h),(s.mode&1)===0)s.memoizedState=null;else switch(g){case"forwards":for(l=s.child,g=null;l!==null;)r=l.alternate,r!==null&&Jo(r)===null&&(g=l),l=l.sibling;l=g,l===null?(g=s.child,s.child=null):(g=l.sibling,l.sibling=null),ml(s,!1,g,l,v);break;case"backwards":for(l=null,g=s.child,s.child=null;g!==null;){if(r=g.alternate,r!==null&&Jo(r)===null){s.child=g;break}r=g.sibling,g.sibling=l,l=g,g=r}ml(s,!0,l,null,v);break;case"together":ml(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ts(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function an(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),Jn|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=In(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=In(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function my(r,s,l){switch(s.tag){case 3:Qd(s),Sr();break;case 5:_d(s);break;case 1:gt(s.type)&&Uo(s);break;case 4:Ya(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,g=s.memoizedProps.value;Fe(zo,h._currentValue),h._currentValue=g;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Fe(qe,qe.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?ef(r,s,l):(Fe(qe,qe.current&1),r=an(r,s,l),r!==null?r.sibling:null);Fe(qe,qe.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(r.flags&128)!==0){if(h)return nf(r,s,l);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Fe(qe,qe.current),h)break;return null;case 22:case 23:return s.lanes=0,Kd(r,s,l)}return an(r,s,l)}var rf,gl,of,sf;rf=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},gl=function(){},of=function(r,s,l,h){var g=r.memoizedProps;if(g!==h){r=s.stateNode,Wn(jt.current);var v=null;switch(l){case"input":g=Hs(r,g),h=Hs(r,h),v=[];break;case"select":g=E({},g,{value:void 0}),h=E({},h,{value:void 0}),v=[];break;case"textarea":g=Js(r,g),h=Js(r,h),v=[];break;default:typeof g.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Do)}Ys(l,h);var C;l=null;for(D in g)if(!h.hasOwnProperty(D)&&g.hasOwnProperty(D)&&g[D]!=null)if(D==="style"){var T=g[D];for(C in T)T.hasOwnProperty(C)&&(l||(l={}),l[C]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(o.hasOwnProperty(D)?v||(v=[]):(v=v||[]).push(D,null));for(D in h){var A=h[D];if(T=g!=null?g[D]:void 0,h.hasOwnProperty(D)&&A!==T&&(A!=null||T!=null))if(D==="style")if(T){for(C in T)!T.hasOwnProperty(C)||A&&A.hasOwnProperty(C)||(l||(l={}),l[C]="");for(C in A)A.hasOwnProperty(C)&&T[C]!==A[C]&&(l||(l={}),l[C]=A[C])}else l||(v||(v=[]),v.push(D,l)),l=A;else D==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,T=T?T.__html:void 0,A!=null&&T!==A&&(v=v||[]).push(D,A)):D==="children"?typeof A!="string"&&typeof A!="number"||(v=v||[]).push(D,""+A):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(o.hasOwnProperty(D)?(A!=null&&D==="onScroll"&&$e("scroll",r),v||T===A||(v=[])):(v=v||[]).push(D,A))}l&&(v=v||[]).push("style",l);var D=v;(s.updateQueue=D)&&(s.flags|=4)}},sf=function(r,s,l,h){l!==h&&(s.flags|=4)};function Oi(r,s){if(!Ge)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function lt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(s)for(var g=r.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&14680064,h|=g.flags&14680064,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=h,r.childLanes=l,s}function gy(r,s,l){var h=s.pendingProps;switch(Oa(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(s),null;case 1:return gt(s.type)&&Fo(),lt(s),null;case 3:return h=s.stateNode,Ar(),Ve(mt),Ve(st),Xa(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Bo(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ot!==null&&(Al(Ot),Ot=null))),gl(r,s),lt(s),null;case 5:Za(s);var g=Wn(Ri.current);if(l=s.type,r!==null&&s.stateNode!=null)of(r,s,l,h,g),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return lt(s),null}if(r=Wn(jt.current),Bo(s)){h=s.stateNode,l=s.type;var v=s.memoizedProps;switch(h[Wt]=s,h[Ii]=v,r=(s.mode&1)!==0,l){case"dialog":$e("cancel",h),$e("close",h);break;case"iframe":case"object":case"embed":$e("load",h);break;case"video":case"audio":for(g=0;g<Ei.length;g++)$e(Ei[g],h);break;case"source":$e("error",h);break;case"img":case"image":case"link":$e("error",h),$e("load",h);break;case"details":$e("toggle",h);break;case"input":Ou(h,v),$e("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},$e("invalid",h);break;case"textarea":Bu(h,v),$e("invalid",h)}Ys(l,v),g=null;for(var C in v)if(v.hasOwnProperty(C)){var T=v[C];C==="children"?typeof T=="string"?h.textContent!==T&&(v.suppressHydrationWarning!==!0&&Ro(h.textContent,T,r),g=["children",T]):typeof T=="number"&&h.textContent!==""+T&&(v.suppressHydrationWarning!==!0&&Ro(h.textContent,T,r),g=["children",""+T]):o.hasOwnProperty(C)&&T!=null&&C==="onScroll"&&$e("scroll",h)}switch(l){case"input":uo(h),Vu(h,v,!0);break;case"textarea":uo(h),Gu(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=Do)}h=g,s.updateQueue=h,h!==null&&(s.flags|=4)}else{C=g.nodeType===9?g:g.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=qu(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=C.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=C.createElement(l,{is:h.is}):(r=C.createElement(l),l==="select"&&(C=r,h.multiple?C.multiple=!0:h.size&&(C.size=h.size))):r=C.createElementNS(r,l),r[Wt]=s,r[Ii]=h,rf(r,s,!1,!1),s.stateNode=r;e:{switch(C=Zs(l,h),l){case"dialog":$e("cancel",r),$e("close",r),g=h;break;case"iframe":case"object":case"embed":$e("load",r),g=h;break;case"video":case"audio":for(g=0;g<Ei.length;g++)$e(Ei[g],r);g=h;break;case"source":$e("error",r),g=h;break;case"img":case"image":case"link":$e("error",r),$e("load",r),g=h;break;case"details":$e("toggle",r),g=h;break;case"input":Ou(r,h),g=Hs(r,h),$e("invalid",r);break;case"option":g=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},g=E({},h,{value:void 0}),$e("invalid",r);break;case"textarea":Bu(r,h),g=Js(r,h),$e("invalid",r);break;default:g=h}Ys(l,g),T=g;for(v in T)if(T.hasOwnProperty(v)){var A=T[v];v==="style"?ju(r,A):v==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&Hu(r,A)):v==="children"?typeof A=="string"?(l!=="textarea"||A!=="")&&si(r,A):typeof A=="number"&&si(r,""+A):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?A!=null&&v==="onScroll"&&$e("scroll",r):A!=null&&L(r,v,A,C))}switch(l){case"input":uo(r),Vu(r,h,!1);break;case"textarea":uo(r),Gu(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Me(h.value));break;case"select":r.multiple=!!h.multiple,v=h.value,v!=null?lr(r,!!h.multiple,v,!1):h.defaultValue!=null&&lr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof g.onClick=="function"&&(r.onclick=Do)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return lt(s),null;case 6:if(r&&s.stateNode!=null)sf(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=Wn(Ri.current),Wn(jt.current),Bo(s)){if(h=s.stateNode,l=s.memoizedProps,h[Wt]=s,(v=h.nodeValue!==l)&&(r=St,r!==null))switch(r.tag){case 3:Ro(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Ro(h.nodeValue,l,(r.mode&1)!==0)}v&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Wt]=s,s.stateNode=h}return lt(s),null;case 13:if(Ve(qe),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ge&&Tt!==null&&(s.mode&1)!==0&&(s.flags&128)===0)ad(),Sr(),s.flags|=98560,v=!1;else if(v=Bo(s),h!==null&&h.dehydrated!==null){if(r===null){if(!v)throw Error(t(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Wt]=s}else Sr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),v=!1}else Ot!==null&&(Al(Ot),Ot=null),v=!0;if(!v)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(qe.current&1)!==0?Qe===0&&(Qe=3):Pl())),s.updateQueue!==null&&(s.flags|=4),lt(s),null);case 4:return Ar(),gl(r,s),r===null&&ki(s.stateNode.containerInfo),lt(s),null;case 10:return qa(s.type._context),lt(s),null;case 17:return gt(s.type)&&Fo(),lt(s),null;case 19:if(Ve(qe),v=s.memoizedState,v===null)return lt(s),null;if(h=(s.flags&128)!==0,C=v.rendering,C===null)if(h)Oi(v,!1);else{if(Qe!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(C=Jo(r),C!==null){for(s.flags|=128,Oi(v,!1),h=C.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)v=l,r=h,v.flags&=14680066,C=v.alternate,C===null?(v.childLanes=0,v.lanes=r,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=C.childLanes,v.lanes=C.lanes,v.child=C.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=C.memoizedProps,v.memoizedState=C.memoizedState,v.updateQueue=C.updateQueue,v.type=C.type,r=C.dependencies,v.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Fe(qe,qe.current&1|2),s.child}r=r.sibling}v.tail!==null&&je()>br&&(s.flags|=128,h=!0,Oi(v,!1),s.lanes=4194304)}else{if(!h)if(r=Jo(C),r!==null){if(s.flags|=128,h=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Oi(v,!0),v.tail===null&&v.tailMode==="hidden"&&!C.alternate&&!Ge)return lt(s),null}else 2*je()-v.renderingStartTime>br&&l!==1073741824&&(s.flags|=128,h=!0,Oi(v,!1),s.lanes=4194304);v.isBackwards?(C.sibling=s.child,s.child=C):(l=v.last,l!==null?l.sibling=C:s.child=C,v.last=C)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=je(),s.sibling=null,l=qe.current,Fe(qe,h?l&1|2:l&1),s):(lt(s),null);case 22:case 23:return Nl(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(Et&1073741824)!==0&&(lt(s),s.subtreeFlags&6&&(s.flags|=8192)):lt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function yy(r,s){switch(Oa(s),s.tag){case 1:return gt(s.type)&&Fo(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ar(),Ve(mt),Ve(st),Xa(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return Za(s),null;case 13:if(Ve(qe),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Sr()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ve(qe),null;case 4:return Ar(),null;case 10:return qa(s.type._context),null;case 22:case 23:return Nl(),null;case 24:return null;default:return null}}var ns=!1,ut=!1,vy=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Nr(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){We(r,s,h)}else l.current=null}function yl(r,s,l){try{l()}catch(h){We(r,s,h)}}var af=!1;function _y(r,s){if(Na=xo,r=Uc(),Ca(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var C=0,T=-1,A=-1,D=0,J=0,K=r,W=null;t:for(;;){for(var re;K!==l||g!==0&&K.nodeType!==3||(T=C+g),K!==v||h!==0&&K.nodeType!==3||(A=C+h),K.nodeType===3&&(C+=K.nodeValue.length),(re=K.firstChild)!==null;)W=K,K=re;for(;;){if(K===r)break t;if(W===l&&++D===g&&(T=C),W===v&&++J===h&&(A=C),(re=K.nextSibling)!==null)break;K=W,W=K.parentNode}K=re}l=T===-1||A===-1?null:{start:T,end:A}}else l=null}l=l||{start:0,end:0}}else l=null;for(Pa={focusedElem:r,selectionRange:l},xo=!1,ie=s;ie!==null;)if(s=ie,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ie=r;else for(;ie!==null;){s=ie;try{var se=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(se!==null){var le=se.memoizedProps,Je=se.memoizedState,b=s.stateNode,N=b.getSnapshotBeforeUpdate(s.elementType===s.type?le:$t(s.type,le),Je);b.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var M=s.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){We(s,s.return,Z)}if(r=s.sibling,r!==null){r.return=s.return,ie=r;break}ie=s.return}return se=af,af=!1,se}function $i(r,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&r)===r){var v=g.destroy;g.destroy=void 0,v!==void 0&&yl(s,l,v)}g=g.next}while(g!==h)}}function rs(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function vl(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function lf(r){var s=r.alternate;s!==null&&(r.alternate=null,lf(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Wt],delete s[Ii],delete s[Da],delete s[ty],delete s[ny])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function uf(r){return r.tag===5||r.tag===3||r.tag===4}function cf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||uf(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function _l(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Do));else if(h!==4&&(r=r.child,r!==null))for(_l(r,s,l),r=r.sibling;r!==null;)_l(r,s,l),r=r.sibling}function wl(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(wl(r,s,l),r=r.sibling;r!==null;)wl(r,s,l),r=r.sibling}var it=null,Vt=!1;function Sn(r,s,l){for(l=l.child;l!==null;)df(r,s,l),l=l.sibling}function df(r,s,l){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(go,l)}catch{}switch(l.tag){case 5:ut||Nr(l,s);case 6:var h=it,g=Vt;it=null,Sn(r,s,l),it=h,Vt=g,it!==null&&(Vt?(r=it,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):it.removeChild(l.stateNode));break;case 18:it!==null&&(Vt?(r=it,l=l.stateNode,r.nodeType===8?Ra(r.parentNode,l):r.nodeType===1&&Ra(r,l),yi(r)):Ra(it,l.stateNode));break;case 4:h=it,g=Vt,it=l.stateNode.containerInfo,Vt=!0,Sn(r,s,l),it=h,Vt=g;break;case 0:case 11:case 14:case 15:if(!ut&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){g=h=h.next;do{var v=g,C=v.destroy;v=v.tag,C!==void 0&&((v&2)!==0||(v&4)!==0)&&yl(l,s,C),g=g.next}while(g!==h)}Sn(r,s,l);break;case 1:if(!ut&&(Nr(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(T){We(l,s,T)}Sn(r,s,l);break;case 21:Sn(r,s,l);break;case 22:l.mode&1?(ut=(h=ut)||l.memoizedState!==null,Sn(r,s,l),ut=h):Sn(r,s,l);break;default:Sn(r,s,l)}}function ff(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new vy),s.forEach(function(h){var g=Iy.bind(null,r,h);l.has(h)||(l.add(h),h.then(g,g))})}}function Bt(r,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h];try{var v=r,C=s,T=C;e:for(;T!==null;){switch(T.tag){case 5:it=T.stateNode,Vt=!1;break e;case 3:it=T.stateNode.containerInfo,Vt=!0;break e;case 4:it=T.stateNode.containerInfo,Vt=!0;break e}T=T.return}if(it===null)throw Error(t(160));df(v,C,g),it=null,Vt=!1;var A=g.alternate;A!==null&&(A.return=null),g.return=null}catch(D){We(g,s,D)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)hf(s,r),s=s.sibling}function hf(r,s){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Bt(s,r),Kt(r),h&4){try{$i(3,r,r.return),rs(3,r)}catch(le){We(r,r.return,le)}try{$i(5,r,r.return)}catch(le){We(r,r.return,le)}}break;case 1:Bt(s,r),Kt(r),h&512&&l!==null&&Nr(l,l.return);break;case 5:if(Bt(s,r),Kt(r),h&512&&l!==null&&Nr(l,l.return),r.flags&32){var g=r.stateNode;try{si(g,"")}catch(le){We(r,r.return,le)}}if(h&4&&(g=r.stateNode,g!=null)){var v=r.memoizedProps,C=l!==null?l.memoizedProps:v,T=r.type,A=r.updateQueue;if(r.updateQueue=null,A!==null)try{T==="input"&&v.type==="radio"&&v.name!=null&&$u(g,v),Zs(T,C);var D=Zs(T,v);for(C=0;C<A.length;C+=2){var J=A[C],K=A[C+1];J==="style"?ju(g,K):J==="dangerouslySetInnerHTML"?Hu(g,K):J==="children"?si(g,K):L(g,J,K,D)}switch(T){case"input":Ws(g,v);break;case"textarea":zu(g,v);break;case"select":var W=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var re=v.value;re!=null?lr(g,!!v.multiple,re,!1):W!==!!v.multiple&&(v.defaultValue!=null?lr(g,!!v.multiple,v.defaultValue,!0):lr(g,!!v.multiple,v.multiple?[]:"",!1))}g[Ii]=v}catch(le){We(r,r.return,le)}}break;case 6:if(Bt(s,r),Kt(r),h&4){if(r.stateNode===null)throw Error(t(162));g=r.stateNode,v=r.memoizedProps;try{g.nodeValue=v}catch(le){We(r,r.return,le)}}break;case 3:if(Bt(s,r),Kt(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{yi(s.containerInfo)}catch(le){We(r,r.return,le)}break;case 4:Bt(s,r),Kt(r);break;case 13:Bt(s,r),Kt(r),g=r.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(Sl=je())),h&4&&ff(r);break;case 22:if(J=l!==null&&l.memoizedState!==null,r.mode&1?(ut=(D=ut)||J,Bt(s,r),ut=D):Bt(s,r),Kt(r),h&8192){if(D=r.memoizedState!==null,(r.stateNode.isHidden=D)&&!J&&(r.mode&1)!==0)for(ie=r,J=r.child;J!==null;){for(K=ie=J;ie!==null;){switch(W=ie,re=W.child,W.tag){case 0:case 11:case 14:case 15:$i(4,W,W.return);break;case 1:Nr(W,W.return);var se=W.stateNode;if(typeof se.componentWillUnmount=="function"){h=W,l=W.return;try{s=h,se.props=s.memoizedProps,se.state=s.memoizedState,se.componentWillUnmount()}catch(le){We(h,l,le)}}break;case 5:Nr(W,W.return);break;case 22:if(W.memoizedState!==null){gf(K);continue}}re!==null?(re.return=W,ie=re):gf(K)}J=J.sibling}e:for(J=null,K=r;;){if(K.tag===5){if(J===null){J=K;try{g=K.stateNode,D?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(T=K.stateNode,A=K.memoizedProps.style,C=A!=null&&A.hasOwnProperty("display")?A.display:null,T.style.display=Wu("display",C))}catch(le){We(r,r.return,le)}}}else if(K.tag===6){if(J===null)try{K.stateNode.nodeValue=D?"":K.memoizedProps}catch(le){We(r,r.return,le)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===r)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===r)break e;for(;K.sibling===null;){if(K.return===null||K.return===r)break e;J===K&&(J=null),K=K.return}J===K&&(J=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:Bt(s,r),Kt(r),h&4&&ff(r);break;case 21:break;default:Bt(s,r),Kt(r)}}function Kt(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(uf(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var g=h.stateNode;h.flags&32&&(si(g,""),h.flags&=-33);var v=cf(r);wl(r,v,g);break;case 3:case 4:var C=h.stateNode.containerInfo,T=cf(r);_l(r,T,C);break;default:throw Error(t(161))}}catch(A){We(r,r.return,A)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function wy(r,s,l){ie=r,pf(r)}function pf(r,s,l){for(var h=(r.mode&1)!==0;ie!==null;){var g=ie,v=g.child;if(g.tag===22&&h){var C=g.memoizedState!==null||ns;if(!C){var T=g.alternate,A=T!==null&&T.memoizedState!==null||ut;T=ns;var D=ut;if(ns=C,(ut=A)&&!D)for(ie=g;ie!==null;)C=ie,A=C.child,C.tag===22&&C.memoizedState!==null?yf(g):A!==null?(A.return=C,ie=A):yf(g);for(;v!==null;)ie=v,pf(v),v=v.sibling;ie=g,ns=T,ut=D}mf(r)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,ie=v):mf(r)}}function mf(r){for(;ie!==null;){var s=ie;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:ut||rs(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!ut)if(l===null)h.componentDidMount();else{var g=s.elementType===s.type?l.memoizedProps:$t(s.type,l.memoizedProps);h.componentDidUpdate(g,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&dd(s,v,h);break;case 3:var C=s.updateQueue;if(C!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}dd(s,C,l)}break;case 5:var T=s.stateNode;if(l===null&&s.flags&4){l=T;var A=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&l.focus();break;case"img":A.src&&(l.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var D=s.alternate;if(D!==null){var J=D.memoizedState;if(J!==null){var K=J.dehydrated;K!==null&&yi(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ut||s.flags&512&&vl(s)}catch(W){We(s,s.return,W)}}if(s===r){ie=null;break}if(l=s.sibling,l!==null){l.return=s.return,ie=l;break}ie=s.return}}function gf(r){for(;ie!==null;){var s=ie;if(s===r){ie=null;break}var l=s.sibling;if(l!==null){l.return=s.return,ie=l;break}ie=s.return}}function yf(r){for(;ie!==null;){var s=ie;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{rs(4,s)}catch(A){We(s,l,A)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var g=s.return;try{h.componentDidMount()}catch(A){We(s,g,A)}}var v=s.return;try{vl(s)}catch(A){We(s,v,A)}break;case 5:var C=s.return;try{vl(s)}catch(A){We(s,C,A)}}}catch(A){We(s,s.return,A)}if(s===r){ie=null;break}var T=s.sibling;if(T!==null){T.return=s.return,ie=T;break}ie=s.return}}var Cy=Math.ceil,is=H.ReactCurrentDispatcher,Cl=H.ReactCurrentOwner,bt=H.ReactCurrentBatchConfig,Ie=0,et=null,Ke=null,ot=0,Et=0,Pr=vn(0),Qe=0,Vi=null,Jn=0,os=0,xl=0,Bi=null,vt=null,Sl=0,br=1/0,ln=null,ss=!1,Tl=null,Tn=null,as=!1,En=null,ls=0,zi=0,El=null,us=-1,cs=0;function dt(){return(Ie&6)!==0?je():us!==-1?us:us=je()}function kn(r){return(r.mode&1)===0?1:(Ie&2)!==0&&ot!==0?ot&-ot:iy.transition!==null?(cs===0&&(cs=lc()),cs):(r=Re,r!==0||(r=window.event,r=r===void 0?16:yc(r.type)),r)}function zt(r,s,l,h){if(50<zi)throw zi=0,El=null,Error(t(185));fi(r,l,h),((Ie&2)===0||r!==et)&&(r===et&&((Ie&2)===0&&(os|=l),Qe===4&&An(r,ot)),_t(r,h),l===1&&Ie===0&&(s.mode&1)===0&&(br=je()+500,Oo&&wn()))}function _t(r,s){var l=r.callbackNode;ig(r,s);var h=_o(r,r===et?ot:0);if(h===0)l!==null&&oc(l),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(l!=null&&oc(l),s===1)r.tag===0?ry(_f.bind(null,r)):nd(_f.bind(null,r)),Xg(function(){(Ie&6)===0&&wn()}),l=null;else{switch(uc(h)){case 1:l=ia;break;case 4:l=sc;break;case 16:l=mo;break;case 536870912:l=ac;break;default:l=mo}l=Af(l,vf.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function vf(r,s){if(us=-1,cs=0,(Ie&6)!==0)throw Error(t(327));var l=r.callbackNode;if(Mr()&&r.callbackNode!==l)return null;var h=_o(r,r===et?ot:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=ds(r,h);else{s=h;var g=Ie;Ie|=2;var v=Cf();(et!==r||ot!==s)&&(ln=null,br=je()+500,Yn(r,s));do try{Ty();break}catch(T){wf(r,T)}while(!0);Ga(),is.current=v,Ie=g,Ke!==null?s=0:(et=null,ot=0,s=Qe)}if(s!==0){if(s===2&&(g=oa(r),g!==0&&(h=g,s=kl(r,g))),s===1)throw l=Vi,Yn(r,0),An(r,h),_t(r,je()),l;if(s===6)An(r,h);else{if(g=r.current.alternate,(h&30)===0&&!xy(g)&&(s=ds(r,h),s===2&&(v=oa(r),v!==0&&(h=v,s=kl(r,v))),s===1))throw l=Vi,Yn(r,0),An(r,h),_t(r,je()),l;switch(r.finishedWork=g,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:Zn(r,vt,ln);break;case 3:if(An(r,h),(h&130023424)===h&&(s=Sl+500-je(),10<s)){if(_o(r,0)!==0)break;if(g=r.suspendedLanes,(g&h)!==h){dt(),r.pingedLanes|=r.suspendedLanes&g;break}r.timeoutHandle=Ma(Zn.bind(null,r,vt,ln),s);break}Zn(r,vt,ln);break;case 4:if(An(r,h),(h&4194240)===h)break;for(s=r.eventTimes,g=-1;0<h;){var C=31-Ft(h);v=1<<C,C=s[C],C>g&&(g=C),h&=~v}if(h=g,h=je()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Cy(h/1960))-h,10<h){r.timeoutHandle=Ma(Zn.bind(null,r,vt,ln),h);break}Zn(r,vt,ln);break;case 5:Zn(r,vt,ln);break;default:throw Error(t(329))}}}return _t(r,je()),r.callbackNode===l?vf.bind(null,r):null}function kl(r,s){var l=Bi;return r.current.memoizedState.isDehydrated&&(Yn(r,s).flags|=256),r=ds(r,s),r!==2&&(s=vt,vt=l,s!==null&&Al(s)),r}function Al(r){vt===null?vt=r:vt.push.apply(vt,r)}function xy(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var g=l[h],v=g.getSnapshot;g=g.value;try{if(!Ut(v(),g))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function An(r,s){for(s&=~xl,s&=~os,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-Ft(s),h=1<<l;r[l]=-1,s&=~h}}function _f(r){if((Ie&6)!==0)throw Error(t(327));Mr();var s=_o(r,0);if((s&1)===0)return _t(r,je()),null;var l=ds(r,s);if(r.tag!==0&&l===2){var h=oa(r);h!==0&&(s=h,l=kl(r,h))}if(l===1)throw l=Vi,Yn(r,0),An(r,s),_t(r,je()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,Zn(r,vt,ln),_t(r,je()),null}function Il(r,s){var l=Ie;Ie|=1;try{return r(s)}finally{Ie=l,Ie===0&&(br=je()+500,Oo&&wn())}}function Kn(r){En!==null&&En.tag===0&&(Ie&6)===0&&Mr();var s=Ie;Ie|=1;var l=bt.transition,h=Re;try{if(bt.transition=null,Re=1,r)return r()}finally{Re=h,bt.transition=l,Ie=s,(Ie&6)===0&&wn()}}function Nl(){Et=Pr.current,Ve(Pr)}function Yn(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,Qg(l)),Ke!==null)for(l=Ke.return;l!==null;){var h=l;switch(Oa(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Fo();break;case 3:Ar(),Ve(mt),Ve(st),Xa();break;case 5:Za(h);break;case 4:Ar();break;case 13:Ve(qe);break;case 19:Ve(qe);break;case 10:qa(h.type._context);break;case 22:case 23:Nl()}l=l.return}if(et=r,Ke=r=In(r.current,null),ot=Et=s,Qe=0,Vi=null,xl=os=Jn=0,vt=Bi=null,Hn!==null){for(s=0;s<Hn.length;s++)if(l=Hn[s],h=l.interleaved,h!==null){l.interleaved=null;var g=h.next,v=l.pending;if(v!==null){var C=v.next;v.next=g,h.next=C}l.pending=h}Hn=null}return r}function wf(r,s){do{var l=Ke;try{if(Ga(),Ko.current=Xo,Yo){for(var h=He.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}Yo=!1}if(jn=0,Xe=Ze=He=null,Di=!1,Li=0,Cl.current=null,l===null||l.return===null){Qe=1,Vi=s,Ke=null;break}e:{var v=r,C=l.return,T=l,A=s;if(s=ot,T.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var D=A,J=T,K=J.tag;if((J.mode&1)===0&&(K===0||K===11||K===15)){var W=J.alternate;W?(J.updateQueue=W.updateQueue,J.memoizedState=W.memoizedState,J.lanes=W.lanes):(J.updateQueue=null,J.memoizedState=null)}var re=qd(C);if(re!==null){re.flags&=-257,Hd(re,C,T,v,s),re.mode&1&&Gd(v,D,s),s=re,A=D;var se=s.updateQueue;if(se===null){var le=new Set;le.add(A),s.updateQueue=le}else se.add(A);break e}else{if((s&1)===0){Gd(v,D,s),Pl();break e}A=Error(t(426))}}else if(Ge&&T.mode&1){var Je=qd(C);if(Je!==null){(Je.flags&65536)===0&&(Je.flags|=256),Hd(Je,C,T,v,s),Ba(Ir(A,T));break e}}v=A=Ir(A,T),Qe!==4&&(Qe=2),Bi===null?Bi=[v]:Bi.push(v),v=C;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var b=Bd(v,A,s);cd(v,b);break e;case 1:T=A;var N=v.type,M=v.stateNode;if((v.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Tn===null||!Tn.has(M)))){v.flags|=65536,s&=-s,v.lanes|=s;var Z=zd(v,T,s);cd(v,Z);break e}}v=v.return}while(v!==null)}Sf(l)}catch(ue){s=ue,Ke===l&&l!==null&&(Ke=l=l.return);continue}break}while(!0)}function Cf(){var r=is.current;return is.current=Xo,r===null?Xo:r}function Pl(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),et===null||(Jn&268435455)===0&&(os&268435455)===0||An(et,ot)}function ds(r,s){var l=Ie;Ie|=2;var h=Cf();(et!==r||ot!==s)&&(ln=null,Yn(r,s));do try{Sy();break}catch(g){wf(r,g)}while(!0);if(Ga(),Ie=l,is.current=h,Ke!==null)throw Error(t(261));return et=null,ot=0,Qe}function Sy(){for(;Ke!==null;)xf(Ke)}function Ty(){for(;Ke!==null&&!Km();)xf(Ke)}function xf(r){var s=kf(r.alternate,r,Et);r.memoizedProps=r.pendingProps,s===null?Sf(r):Ke=s,Cl.current=null}function Sf(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=gy(l,s,Et),l!==null){Ke=l;return}}else{if(l=yy(l,s),l!==null){l.flags&=32767,Ke=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Qe=6,Ke=null;return}}if(s=s.sibling,s!==null){Ke=s;return}Ke=s=r}while(s!==null);Qe===0&&(Qe=5)}function Zn(r,s,l){var h=Re,g=bt.transition;try{bt.transition=null,Re=1,Ey(r,s,l,h)}finally{bt.transition=g,Re=h}return null}function Ey(r,s,l,h){do Mr();while(En!==null);if((Ie&6)!==0)throw Error(t(327));l=r.finishedWork;var g=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var v=l.lanes|l.childLanes;if(og(r,v),r===et&&(Ke=et=null,ot=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||as||(as=!0,Af(mo,function(){return Mr(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=bt.transition,bt.transition=null;var C=Re;Re=1;var T=Ie;Ie|=4,Cl.current=null,_y(r,l),hf(l,r),Hg(Pa),xo=!!Na,Pa=Na=null,r.current=l,wy(l),Ym(),Ie=T,Re=C,bt.transition=v}else r.current=l;if(as&&(as=!1,En=r,ls=g),v=r.pendingLanes,v===0&&(Tn=null),Xm(l.stateNode),_t(r,je()),s!==null)for(h=r.onRecoverableError,l=0;l<s.length;l++)g=s[l],h(g.value,{componentStack:g.stack,digest:g.digest});if(ss)throw ss=!1,r=Tl,Tl=null,r;return(ls&1)!==0&&r.tag!==0&&Mr(),v=r.pendingLanes,(v&1)!==0?r===El?zi++:(zi=0,El=r):zi=0,wn(),null}function Mr(){if(En!==null){var r=uc(ls),s=bt.transition,l=Re;try{if(bt.transition=null,Re=16>r?16:r,En===null)var h=!1;else{if(r=En,En=null,ls=0,(Ie&6)!==0)throw Error(t(331));var g=Ie;for(Ie|=4,ie=r.current;ie!==null;){var v=ie,C=v.child;if((ie.flags&16)!==0){var T=v.deletions;if(T!==null){for(var A=0;A<T.length;A++){var D=T[A];for(ie=D;ie!==null;){var J=ie;switch(J.tag){case 0:case 11:case 15:$i(8,J,v)}var K=J.child;if(K!==null)K.return=J,ie=K;else for(;ie!==null;){J=ie;var W=J.sibling,re=J.return;if(lf(J),J===D){ie=null;break}if(W!==null){W.return=re,ie=W;break}ie=re}}}var se=v.alternate;if(se!==null){var le=se.child;if(le!==null){se.child=null;do{var Je=le.sibling;le.sibling=null,le=Je}while(le!==null)}}ie=v}}if((v.subtreeFlags&2064)!==0&&C!==null)C.return=v,ie=C;else e:for(;ie!==null;){if(v=ie,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:$i(9,v,v.return)}var b=v.sibling;if(b!==null){b.return=v.return,ie=b;break e}ie=v.return}}var N=r.current;for(ie=N;ie!==null;){C=ie;var M=C.child;if((C.subtreeFlags&2064)!==0&&M!==null)M.return=C,ie=M;else e:for(C=N;ie!==null;){if(T=ie,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:rs(9,T)}}catch(ue){We(T,T.return,ue)}if(T===C){ie=null;break e}var Z=T.sibling;if(Z!==null){Z.return=T.return,ie=Z;break e}ie=T.return}}if(Ie=g,wn(),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(go,r)}catch{}h=!0}return h}finally{Re=l,bt.transition=s}}return!1}function Tf(r,s,l){s=Ir(l,s),s=Bd(r,s,1),r=xn(r,s,1),s=dt(),r!==null&&(fi(r,1,s),_t(r,s))}function We(r,s,l){if(r.tag===3)Tf(r,r,l);else for(;s!==null;){if(s.tag===3){Tf(s,r,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Tn===null||!Tn.has(h))){r=Ir(l,r),r=zd(s,r,1),s=xn(s,r,1),r=dt(),s!==null&&(fi(s,1,r),_t(s,r));break}}s=s.return}}function ky(r,s,l){var h=r.pingCache;h!==null&&h.delete(s),s=dt(),r.pingedLanes|=r.suspendedLanes&l,et===r&&(ot&l)===l&&(Qe===4||Qe===3&&(ot&130023424)===ot&&500>je()-Sl?Yn(r,0):xl|=l),_t(r,s)}function Ef(r,s){s===0&&((r.mode&1)===0?s=1:(s=vo,vo<<=1,(vo&130023424)===0&&(vo=4194304)));var l=dt();r=on(r,s),r!==null&&(fi(r,s,l),_t(r,l))}function Ay(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),Ef(r,l)}function Iy(r,s){var l=0;switch(r.tag){case 13:var h=r.stateNode,g=r.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Ef(r,l)}var kf;kf=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||mt.current)yt=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return yt=!1,my(r,s,l);yt=(r.flags&131072)!==0}else yt=!1,Ge&&(s.flags&1048576)!==0&&rd(s,Vo,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;ts(r,s),r=s.pendingProps;var g=wr(s,st.current);Er(s,l),g=nl(null,s,h,r,g,l);var v=rl();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,gt(h)?(v=!0,Uo(s)):v=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,ja(s),g.updater=Wo,s.stateNode=g,g._reactInternals=s,Ka(s,h,r,l),s=dl(null,s,h,!0,v,l)):(s.tag=0,Ge&&v&&Ua(s),ct(null,s,g,l),s=s.child),s;case 16:h=s.elementType;e:{switch(ts(r,s),r=s.pendingProps,g=h._init,h=g(h._payload),s.type=h,g=s.tag=Py(h),r=$t(h,r),g){case 0:s=cl(null,s,h,r,l);break e;case 1:s=Zd(null,s,h,r,l);break e;case 11:s=Wd(null,s,h,r,l);break e;case 14:s=jd(null,s,h,$t(h.type,r),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:$t(h,g),cl(r,s,h,g,l);case 1:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:$t(h,g),Zd(r,s,h,g,l);case 3:e:{if(Qd(s),r===null)throw Error(t(387));h=s.pendingProps,v=s.memoizedState,g=v.element,ud(r,s),Ho(s,h,null,l);var C=s.memoizedState;if(h=C.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){g=Ir(Error(t(423)),s),s=Xd(r,s,h,l,g);break e}else if(h!==g){g=Ir(Error(t(424)),s),s=Xd(r,s,h,l,g);break e}else for(Tt=yn(s.stateNode.containerInfo.firstChild),St=s,Ge=!0,Ot=null,l=vd(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Sr(),h===g){s=an(r,s,l);break e}ct(r,s,h,l)}s=s.child}return s;case 5:return _d(s),r===null&&Va(s),h=s.type,g=s.pendingProps,v=r!==null?r.memoizedProps:null,C=g.children,ba(h,g)?C=null:v!==null&&ba(h,v)&&(s.flags|=32),Yd(r,s),ct(r,s,C,l),s.child;case 6:return r===null&&Va(s),null;case 13:return ef(r,s,l);case 4:return Ya(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=kr(s,null,h,l):ct(r,s,h,l),s.child;case 11:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:$t(h,g),Wd(r,s,h,g,l);case 7:return ct(r,s,s.pendingProps,l),s.child;case 8:return ct(r,s,s.pendingProps.children,l),s.child;case 12:return ct(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,g=s.pendingProps,v=s.memoizedProps,C=g.value,Fe(zo,h._currentValue),h._currentValue=C,v!==null)if(Ut(v.value,C)){if(v.children===g.children&&!mt.current){s=an(r,s,l);break e}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var T=v.dependencies;if(T!==null){C=v.child;for(var A=T.firstContext;A!==null;){if(A.context===h){if(v.tag===1){A=sn(-1,l&-l),A.tag=2;var D=v.updateQueue;if(D!==null){D=D.shared;var J=D.pending;J===null?A.next=A:(A.next=J.next,J.next=A),D.pending=A}}v.lanes|=l,A=v.alternate,A!==null&&(A.lanes|=l),Ha(v.return,l,s),T.lanes|=l;break}A=A.next}}else if(v.tag===10)C=v.type===s.type?null:v.child;else if(v.tag===18){if(C=v.return,C===null)throw Error(t(341));C.lanes|=l,T=C.alternate,T!==null&&(T.lanes|=l),Ha(C,l,s),C=v.sibling}else C=v.child;if(C!==null)C.return=v;else for(C=v;C!==null;){if(C===s){C=null;break}if(v=C.sibling,v!==null){v.return=C.return,C=v;break}C=C.return}v=C}ct(r,s,g.children,l),s=s.child}return s;case 9:return g=s.type,h=s.pendingProps.children,Er(s,l),g=Nt(g),h=h(g),s.flags|=1,ct(r,s,h,l),s.child;case 14:return h=s.type,g=$t(h,s.pendingProps),g=$t(h.type,g),jd(r,s,h,g,l);case 15:return Jd(r,s,s.type,s.pendingProps,l);case 17:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:$t(h,g),ts(r,s),s.tag=1,gt(h)?(r=!0,Uo(s)):r=!1,Er(s,l),pd(s,h,g),Ka(s,h,g,l),dl(null,s,h,!0,r,l);case 19:return nf(r,s,l);case 22:return Kd(r,s,l)}throw Error(t(156,s.tag))};function Af(r,s){return ic(r,s)}function Ny(r,s,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(r,s,l,h){return new Ny(r,s,l,h)}function bl(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Py(r){if(typeof r=="function")return bl(r)?1:0;if(r!=null){if(r=r.$$typeof,r===_e)return 11;if(r===j)return 14}return 2}function In(r,s){var l=r.alternate;return l===null?(l=Mt(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function fs(r,s,l,h,g,v){var C=2;if(h=r,typeof r=="function")bl(r)&&(C=1);else if(typeof r=="string")C=5;else e:switch(r){case Y:return Qn(l.children,g,v,s);case U:C=8,g|=8;break;case $:return r=Mt(12,l,s,g|2),r.elementType=$,r.lanes=v,r;case xe:return r=Mt(13,l,s,g),r.elementType=xe,r.lanes=v,r;case fe:return r=Mt(19,l,s,g),r.elementType=fe,r.lanes=v,r;case q:return hs(l,g,v,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case R:C=10;break e;case te:C=9;break e;case _e:C=11;break e;case j:C=14;break e;case oe:C=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Mt(C,l,s,g),s.elementType=r,s.type=h,s.lanes=v,s}function Qn(r,s,l,h){return r=Mt(7,r,h,s),r.lanes=l,r}function hs(r,s,l,h){return r=Mt(22,r,h,s),r.elementType=q,r.lanes=l,r.stateNode={isHidden:!1},r}function Ml(r,s,l){return r=Mt(6,r,null,s),r.lanes=l,r}function Rl(r,s,l){return s=Mt(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function by(r,s,l,h,g){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sa(0),this.expirationTimes=sa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sa(0),this.identifierPrefix=h,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Dl(r,s,l,h,g,v,C,T,A){return r=new by(r,s,l,T,A),s===1?(s=1,v===!0&&(s|=8)):s=0,v=Mt(3,null,null,s),r.current=v,v.stateNode=r,v.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},ja(v),r}function My(r,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:h==null?null:""+h,children:r,containerInfo:s,implementation:l}}function If(r){if(!r)return _n;r=r._reactInternals;e:{if(Vn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(gt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(gt(l))return ed(r,l,s)}return s}function Nf(r,s,l,h,g,v,C,T,A){return r=Dl(l,h,!0,r,g,v,C,T,A),r.context=If(null),l=r.current,h=dt(),g=kn(l),v=sn(h,g),v.callback=s??null,xn(l,v,g),r.current.lanes=g,fi(r,g,h),_t(r,h),r}function ps(r,s,l,h){var g=s.current,v=dt(),C=kn(g);return l=If(l),s.context===null?s.context=l:s.pendingContext=l,s=sn(v,C),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=xn(g,s,C),r!==null&&(zt(r,g,C,v),qo(r,g,C)),C}function ms(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Pf(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function Ll(r,s){Pf(r,s),(r=r.alternate)&&Pf(r,s)}function Ry(){return null}var bf=typeof reportError=="function"?reportError:function(r){console.error(r)};function Fl(r){this._internalRoot=r}gs.prototype.render=Fl.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));ps(r,s,null,null)},gs.prototype.unmount=Fl.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Kn(function(){ps(null,r,null,null)}),s[en]=null}};function gs(r){this._internalRoot=r}gs.prototype.unstable_scheduleHydration=function(r){if(r){var s=fc();r={blockedOn:null,target:r,priority:s};for(var l=0;l<pn.length&&s!==0&&s<pn[l].priority;l++);pn.splice(l,0,r),l===0&&mc(r)}};function Ul(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ys(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Mf(){}function Dy(r,s,l,h,g){if(g){if(typeof h=="function"){var v=h;h=function(){var D=ms(C);v.call(D)}}var C=Nf(s,h,r,0,null,!1,!1,"",Mf);return r._reactRootContainer=C,r[en]=C.current,ki(r.nodeType===8?r.parentNode:r),Kn(),C}for(;g=r.lastChild;)r.removeChild(g);if(typeof h=="function"){var T=h;h=function(){var D=ms(A);T.call(D)}}var A=Dl(r,0,!1,null,null,!1,!1,"",Mf);return r._reactRootContainer=A,r[en]=A.current,ki(r.nodeType===8?r.parentNode:r),Kn(function(){ps(s,A,l,h)}),A}function vs(r,s,l,h,g){var v=l._reactRootContainer;if(v){var C=v;if(typeof g=="function"){var T=g;g=function(){var A=ms(C);T.call(A)}}ps(s,C,r,g)}else C=Dy(l,s,r,g,h);return ms(C)}cc=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=di(s.pendingLanes);l!==0&&(aa(s,l|1),_t(s,je()),(Ie&6)===0&&(br=je()+500,wn()))}break;case 13:Kn(function(){var h=on(r,1);if(h!==null){var g=dt();zt(h,r,1,g)}}),Ll(r,1)}},la=function(r){if(r.tag===13){var s=on(r,134217728);if(s!==null){var l=dt();zt(s,r,134217728,l)}Ll(r,134217728)}},dc=function(r){if(r.tag===13){var s=kn(r),l=on(r,s);if(l!==null){var h=dt();zt(l,r,s,h)}Ll(r,s)}},fc=function(){return Re},hc=function(r,s){var l=Re;try{return Re=r,s()}finally{Re=l}},ea=function(r,s,l){switch(s){case"input":if(Ws(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==r&&h.form===r.form){var g=Lo(h);if(!g)throw Error(t(90));Uu(h),Ws(h,g)}}}break;case"textarea":zu(r,l);break;case"select":s=l.value,s!=null&&lr(r,!!l.multiple,s,!1)}},Zu=Il,Qu=Kn;var Ly={usingClientEntryPoint:!1,Events:[Ni,vr,Lo,Ku,Yu,Il]},Gi={findFiberByHostInstance:Bn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Fy={bundleType:Gi.bundleType,version:Gi.version,rendererPackageName:Gi.rendererPackageName,rendererConfig:Gi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=nc(r),r===null?null:r.stateNode},findFiberByHostInstance:Gi.findFiberByHostInstance||Ry,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _s=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_s.isDisabled&&_s.supportsFiber)try{go=_s.inject(Fy),Ht=_s}catch{}}return wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ly,wt.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ul(s))throw Error(t(200));return My(r,s,null,l)},wt.createRoot=function(r,s){if(!Ul(r))throw Error(t(299));var l=!1,h="",g=bf;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=Dl(r,1,!1,null,null,l,!1,h,g),r[en]=s.current,ki(r.nodeType===8?r.parentNode:r),new Fl(s)},wt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=nc(s),r=r===null?null:r.stateNode,r},wt.flushSync=function(r){return Kn(r)},wt.hydrate=function(r,s,l){if(!ys(s))throw Error(t(200));return vs(null,r,s,!0,l)},wt.hydrateRoot=function(r,s,l){if(!Ul(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,g=!1,v="",C=bf;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),s=Nf(s,null,r,1,l??null,g,!1,v,C),r[en]=s.current,ki(r),h)for(r=0;r<h.length;r++)l=h[r],g=l._getVersion,g=g(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,g]:s.mutableSourceEagerHydrationData.push(l,g);return new gs(s)},wt.render=function(r,s,l){if(!ys(s))throw Error(t(200));return vs(null,r,s,!1,l)},wt.unmountComponentAtNode=function(r){if(!ys(r))throw Error(t(40));return r._reactRootContainer?(Kn(function(){vs(null,null,r,!1,function(){r._reactRootContainer=null,r[en]=null})}),!0):!1},wt.unstable_batchedUpdates=Il,wt.unstable_renderSubtreeIntoContainer=function(r,s,l,h){if(!ys(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return vs(r,s,l,!1,h)},wt.version="18.2.0-next-9e3b772b8-20220608",wt}var Vf;function Wy(){if(Vf)return Vl.exports;Vf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Vl.exports=Hy(),Vl.exports}var Bf;function jy(){if(Bf)return ws;Bf=1;var i=Wy();return ws.createRoot=i.createRoot,ws.hydrateRoot=i.hydrateRoot,ws}var Jy=jy();const Ky="modulepreload",Yy=function(i){return"/InfluencerAI/"+i},zf={},Jr=function(e,t,n){let o=Promise.resolve();if(t&&t.length>0){let d=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));o=d(t.map(p=>{if(p=Yy(p),p in zf)return;zf[p]=!0;const y=p.endsWith(".css"),_=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${_}`))return;const x=document.createElement("link");if(x.rel=y?"stylesheet":Ky,y||(x.as="script"),x.crossOrigin="",x.href=p,m&&x.setAttribute("nonce",m),document.head.appendChild(x),y)return new Promise((S,k)=>{x.addEventListener("load",S),x.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return o.then(d=>{for(const f of d||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})},Zy=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>Jr(async()=>{const{default:n}=await Promise.resolve().then(()=>ni);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class ku extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Qy extends ku{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Xy extends ku{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ev extends ku{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var eu;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(eu||(eu={}));var tv=function(i,e,t,n){function o(a){return a instanceof t?a:new t(function(d){d(a)})}return new(t||(t=Promise))(function(a,d){function f(y){try{p(n.next(y))}catch(_){d(_)}}function m(y){try{p(n.throw(y))}catch(_){d(_)}}function p(y){y.done?a(y.value):o(y.value).then(f,m)}p((n=n.apply(i,e||[])).next())})};class nv{constructor(e,{headers:t={},customFetch:n,region:o=eu.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=Zy(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return tv(this,void 0,void 0,function*(){try{const{headers:o,method:a,body:d}=t;let f={},{region:m}=t;m||(m=this.region),m&&m!=="any"&&(f["x-region"]=m);let p;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",p=d):typeof d=="string"?(f["Content-Type"]="text/plain",p=d):typeof FormData<"u"&&d instanceof FormData?p=d:(f["Content-Type"]="application/json",p=JSON.stringify(d)));const y=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:p}).catch(k=>{throw new Qy(k)}),_=y.headers.get("x-relay-error");if(_&&_==="true")throw new Xy(y);if(!y.ok)throw new ev(y);let x=((n=y.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),S;return x==="application/json"?S=yield y.json():x==="application/octet-stream"?S=yield y.blob():x==="text/event-stream"?S=y:x==="multipart/form-data"?S=yield y.formData():S=yield y.text(),{data:S,error:null}}catch(o){return{data:null,error:o}}})}}var nt={},Rr={},Dr={},Lr={},Fr={},Ur={},rv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Kr=rv();const iv=Kr.fetch,Wp=Kr.fetch.bind(Kr),jp=Kr.Headers,ov=Kr.Request,sv=Kr.Response,ni=Object.freeze(Object.defineProperty({__proto__:null,Headers:jp,Request:ov,Response:sv,default:Wp,fetch:iv},Symbol.toStringTag,{value:"Module"})),av=Oy(ni);var Cs={},Gf;function Jp(){if(Gf)return Cs;Gf=1,Object.defineProperty(Cs,"__esModule",{value:!0});class i extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Cs.default=i,Cs}var qf;function Kp(){if(qf)return Ur;qf=1;var i=Ur&&Ur.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ur,"__esModule",{value:!0});const e=i(av),t=i(Jp());class n{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,d){return this.headers=Object.assign({},this.headers),this.headers[a]=d,this}then(a,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const f=this.fetch;let m=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var y,_,x;let S=null,k=null,I=null,P=p.status,O=p.statusText;if(p.ok){if(this.method!=="HEAD"){const X=await p.text();X===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?k=X:k=JSON.parse(X))}const L=(y=this.headers.Prefer)===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),H=(_=p.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");L&&H&&H.length>1&&(I=parseInt(H[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(S={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,I=null,P=406,O="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const L=await p.text();try{S=JSON.parse(L),Array.isArray(S)&&p.status===404&&(k=[],S=null,P=200,O="OK")}catch{p.status===404&&L===""?(P=204,O="No Content"):S={message:L}}if(S&&this.isMaybeSingle&&(!((x=S==null?void 0:S.details)===null||x===void 0)&&x.includes("0 rows"))&&(S=null,P=200,O="OK"),S&&this.shouldThrowOnError)throw new t.default(S)}return{error:S,data:k,count:I,status:P,statusText:O}});return this.shouldThrowOnError||(m=m.catch(p=>{var y,_,x;return{error:{message:`${(y=p==null?void 0:p.name)!==null&&y!==void 0?y:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(_=p==null?void 0:p.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(x=p==null?void 0:p.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),m.then(a,d)}returns(){return this}overrideTypes(){return this}}return Ur.default=n,Ur}var Hf;function Yp(){if(Hf)return Fr;Hf=1;var i=Fr&&Fr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Fr,"__esModule",{value:!0});const e=i(Kp());class t extends e.default{select(o){let a=!1;const d=(o??"*").split("").map(f=>/\s/.test(f)&&!a?"":(f==='"'&&(a=!a),f)).join("");return this.url.searchParams.set("select",d),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:a=!0,nullsFirst:d,foreignTable:f,referencedTable:m=f}={}){const p=m?`${m}.order`:"order",y=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${y?`${y},`:""}${o}.${a?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:a,referencedTable:d=a}={}){const f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,a,{foreignTable:d,referencedTable:f=d}={}){const m=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${o}`),this.url.searchParams.set(p,`${a-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:a=!1,settings:d=!1,buffers:f=!1,wal:m=!1,format:p="text"}={}){var y;const _=[o?"analyze":null,a?"verbose":null,d?"settings":null,f?"buffers":null,m?"wal":null].filter(Boolean).join("|"),x=(y=this.headers.Accept)!==null&&y!==void 0?y:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${p}; for="${x}"; options=${_};`,p==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Fr.default=t,Fr}var Wf;function Au(){if(Wf)return Lr;Wf=1;var i=Lr&&Lr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Lr,"__esModule",{value:!0});const e=i(Yp());class t extends e.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}in(o,a){const d=Array.from(new Set(a)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:d,type:f}={}){let m="";f==="plain"?m="pl":f==="phrase"?m="ph":f==="websearch"&&(m="w");const p=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${m}fts${p}.${a}`),this}match(o){return Object.entries(o).forEach(([a,d])=>{this.url.searchParams.append(a,`eq.${d}`)}),this}not(o,a,d){return this.url.searchParams.append(o,`not.${a}.${d}`),this}or(o,{foreignTable:a,referencedTable:d=a}={}){const f=d?`${d}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,a,d){return this.url.searchParams.append(o,`${a}.${d}`),this}}return Lr.default=t,Lr}var jf;function Zp(){if(jf)return Dr;jf=1;var i=Dr&&Dr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Dr,"__esModule",{value:!0});const e=i(Au());class t{constructor(o,{headers:a={},schema:d,fetch:f}){this.url=o,this.headers=a,this.schema=d,this.fetch=f}select(o,{head:a=!1,count:d}={}){const f=a?"HEAD":"GET";let m=!1;const p=(o??"*").split("").map(y=>/\s/.test(y)&&!m?"":(y==='"'&&(m=!m),y)).join("");return this.url.searchParams.set("select",p),d&&(this.headers.Prefer=`count=${d}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:a,defaultToNull:d=!0}={}){const f="POST",m=[];if(this.headers.Prefer&&m.push(this.headers.Prefer),a&&m.push(`count=${a}`),d||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(o)){const p=o.reduce((y,_)=>y.concat(Object.keys(_)),[]);if(p.length>0){const y=[...new Set(p)].map(_=>`"${_}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:a,ignoreDuplicates:d=!1,count:f,defaultToNull:m=!0}={}){const p="POST",y=[`resolution=${d?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&y.push(this.headers.Prefer),f&&y.push(`count=${f}`),m||y.push("missing=default"),this.headers.Prefer=y.join(","),Array.isArray(o)){const _=o.reduce((x,S)=>x.concat(Object.keys(S)),[]);if(_.length>0){const x=[...new Set(_)].map(S=>`"${S}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:a}={}){const d="PATCH",f=[];return this.headers.Prefer&&f.push(this.headers.Prefer),a&&f.push(`count=${a}`),this.headers.Prefer=f.join(","),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const a="DELETE",d=[];return o&&d.push(`count=${o}`),this.headers.Prefer&&d.unshift(this.headers.Prefer),this.headers.Prefer=d.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Dr.default=t,Dr}var Hi={},Wi={},Jf;function lv(){return Jf||(Jf=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.version=void 0,Wi.version="0.0.0-automated"),Wi}var Kf;function uv(){if(Kf)return Hi;Kf=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.DEFAULT_HEADERS=void 0;const i=lv();return Hi.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${i.version}`},Hi}var Yf;function cv(){if(Yf)return Rr;Yf=1;var i=Rr&&Rr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Rr,"__esModule",{value:!0});const e=i(Zp()),t=i(Au()),n=uv();class o{constructor(d,{headers:f={},schema:m,fetch:p}={}){this.url=d,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),f),this.schemaName=m,this.fetch=p}from(d){const f=new URL(`${this.url}/${d}`);return new e.default(f,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new o(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:m=!1,get:p=!1,count:y}={}){let _;const x=new URL(`${this.url}/rpc/${d}`);let S;m||p?(_=m?"HEAD":"GET",Object.entries(f).filter(([I,P])=>P!==void 0).map(([I,P])=>[I,Array.isArray(P)?`{${P.join(",")}}`:`${P}`]).forEach(([I,P])=>{x.searchParams.append(I,P)})):(_="POST",S=f);const k=Object.assign({},this.headers);return y&&(k.Prefer=`count=${y}`),new t.default({method:_,url:x,headers:k,schema:this.schemaName,body:S,fetch:this.fetch,allowEmpty:!1})}}return Rr.default=o,Rr}var Zf;function dv(){if(Zf)return nt;Zf=1;var i=nt&&nt.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(nt,"__esModule",{value:!0}),nt.PostgrestError=nt.PostgrestBuilder=nt.PostgrestTransformBuilder=nt.PostgrestFilterBuilder=nt.PostgrestQueryBuilder=nt.PostgrestClient=void 0;const e=i(cv());nt.PostgrestClient=e.default;const t=i(Zp());nt.PostgrestQueryBuilder=t.default;const n=i(Au());nt.PostgrestFilterBuilder=n.default;const o=i(Yp());nt.PostgrestTransformBuilder=o.default;const a=i(Kp());nt.PostgrestBuilder=a.default;const d=i(Jp());return nt.PostgrestError=d.default,nt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:a.default,PostgrestError:d.default},nt}var fv=dv();const hv=Hp(fv),{PostgrestClient:pv,PostgrestQueryBuilder:dI,PostgrestFilterBuilder:fI,PostgrestTransformBuilder:hI,PostgrestBuilder:pI,PostgrestError:mI}=hv,mv="2.11.2",gv={"X-Client-Info":`realtime-js/${mv}`},yv="1.0.0",Qp=1e4,vv=1e3;var Hr;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Hr||(Hr={}));var kt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(kt||(kt={}));var Gt;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Gt||(Gt={}));var tu;(function(i){i.websocket="websocket"})(tu||(tu={}));var nr;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(nr||(nr={}));class _v{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const o=t.getUint8(1),a=t.getUint8(2);let d=this.HEADER_LENGTH+2;const f=n.decode(e.slice(d,d+o));d=d+o;const m=n.decode(e.slice(d,d+a));d=d+a;const p=JSON.parse(n.decode(e.slice(d,e.byteLength)));return{ref:null,topic:f,event:m,payload:p}}}class Xp{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ue;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ue||(Ue={}));const Qf=(i,e,t={})=>{var n;const o=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,d)=>(a[d]=wv(d,i,e,o),a),{})},wv=(i,e,t,n)=>{const o=e.find(f=>f.name===i),a=o==null?void 0:o.type,d=t[i];return a&&!n.includes(a)?em(a,d):nu(d)},em=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return Tv(e,t)}switch(i){case Ue.bool:return Cv(e);case Ue.float4:case Ue.float8:case Ue.int2:case Ue.int4:case Ue.int8:case Ue.numeric:case Ue.oid:return xv(e);case Ue.json:case Ue.jsonb:return Sv(e);case Ue.timestamp:return Ev(e);case Ue.abstime:case Ue.date:case Ue.daterange:case Ue.int4range:case Ue.int8range:case Ue.money:case Ue.reltime:case Ue.text:case Ue.time:case Ue.timestamptz:case Ue.timetz:case Ue.tsrange:case Ue.tstzrange:return nu(e);default:return nu(e)}},nu=i=>i,Cv=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},xv=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},Sv=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},Tv=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,n=i[t];if(i[0]==="{"&&n==="}"){let a;const d=i.slice(1,t);try{a=JSON.parse("["+d+"]")}catch{a=d?d.split(","):[]}return a.map(f=>em(e,f))}return i},Ev=i=>typeof i=="string"?i.replace(" ","T"):i,tm=i=>{let e=i;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Gl{constructor(e,t,n={},o=Qp){this.channel=e,this.event=t,this.payload=n,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Xf;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Xf||(Xf={}));class Qi{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},o=>{const{onJoin:a,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qi.syncState(this.state,o,a,d),this.pendingDiffs.forEach(m=>{this.state=Qi.syncDiff(this.state,m,a,d)}),this.pendingDiffs=[],f()}),this.channel._on(n.diff,{},o=>{const{onJoin:a,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Qi.syncDiff(this.state,o,a,d),f())}),this.onJoin((o,a,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:d})}),this.onLeave((o,a,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,o){const a=this.cloneDeep(e),d=this.transformState(t),f={},m={};return this.map(a,(p,y)=>{d[p]||(m[p]=y)}),this.map(d,(p,y)=>{const _=a[p];if(_){const x=y.map(P=>P.presence_ref),S=_.map(P=>P.presence_ref),k=y.filter(P=>S.indexOf(P.presence_ref)<0),I=_.filter(P=>x.indexOf(P.presence_ref)<0);k.length>0&&(f[p]=k),I.length>0&&(m[p]=I)}else f[p]=y}),this.syncDiff(a,{joins:f,leaves:m},n,o)}static syncDiff(e,t,n,o){const{joins:a,leaves:d}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),o||(o=()=>{}),this.map(a,(f,m)=>{var p;const y=(p=e[f])!==null&&p!==void 0?p:[];if(e[f]=this.cloneDeep(m),y.length>0){const _=e[f].map(S=>S.presence_ref),x=y.filter(S=>_.indexOf(S.presence_ref)<0);e[f].unshift(...x)}n(f,y,m)}),this.map(d,(f,m)=>{let p=e[f];if(!p)return;const y=m.map(_=>_.presence_ref);p=p.filter(_=>y.indexOf(_.presence_ref)<0),e[f]=p,o(f,p,m),p.length===0&&delete e[f]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const o=e[n];return"metas"in o?t[n]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[n]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var eh;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(eh||(eh={}));var th;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(th||(th={}));var un;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(un||(un={}));class Iu{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Gl(this,Gt.join,this.params,this.timeout),this.rejoinTimer=new Xp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Gt.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Qi(this),this.broadcastEndpointURL=tm(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:d,private:f}}=this.params;this._onError(y=>e==null?void 0:e(un.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(un.CLOSED));const m={},p={broadcast:a,presence:d,postgres_changes:(o=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(y=>y.filter))!==null&&o!==void 0?o:[],private:f};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:p},m)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var _;if(this.socket.setAuth(),y===void 0){e==null||e(un.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,S=(_=x==null?void 0:x.length)!==null&&_!==void 0?_:0,k=[];for(let I=0;I<S;I++){const P=x[I],{filter:{event:O,schema:z,table:L,filter:H}}=P,X=y&&y[I];if(X&&X.event===O&&X.schema===z&&X.table===L&&X.filter===H)k.push(Object.assign(Object.assign({},P),{id:X.id}));else{this.unsubscribe(),e==null||e(un.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(un.SUBSCRIBED);return}}).receive("error",y=>{e==null||e(un.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(un.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,o;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:d}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:d,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var d,f,m;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&a("ok"),p.receive("ok",()=>a("ok")),p.receive("error",()=>a("error")),p.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=kt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Gt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const o=new Gl(this,Gt.leave,{},e);o.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const o=new AbortController,a=setTimeout(()=>o.abort(),n),d=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(a),d}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Gl(this,e,t,n);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var o,a;const d=e.toLocaleLowerCase(),{close:f,error:m,leave:p,join:y}=Gt;if(n&&[f,m,p,y].indexOf(d)>=0&&n!==this._joinRef())return;let x=this._onMessage(d,t,n);if(t&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(S=>{var k,I,P;return((k=S.filter)===null||k===void 0?void 0:k.event)==="*"||((P=(I=S.filter)===null||I===void 0?void 0:I.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===d}).map(S=>S.callback(x,n)):(a=this.bindings[d])===null||a===void 0||a.filter(S=>{var k,I,P,O,z,L;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in S){const H=S.id,X=(k=S.filter)===null||k===void 0?void 0:k.event;return H&&((I=t.ids)===null||I===void 0?void 0:I.includes(H))&&(X==="*"||(X==null?void 0:X.toLocaleLowerCase())===((P=t.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const H=(z=(O=S==null?void 0:S.filter)===null||O===void 0?void 0:O.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return H==="*"||H===((L=t==null?void 0:t.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===d}).map(S=>{if(typeof x=="object"&&"ids"in x){const k=x.data,{schema:I,table:P,commit_timestamp:O,type:z,errors:L}=k;x=Object.assign(Object.assign({},{schema:I,table:P,commit_timestamp:O,eventType:z,new:{},old:{},errors:L}),this._getPayloadRecords(k))}S.callback(x,n)})}_isClosed(){return this.state===kt.closed}_isJoined(){return this.state===kt.joined}_isJoining(){return this.state===kt.joining}_isLeaving(){return this.state===kt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const o=e.toLocaleLowerCase(),a={type:o,filter:t,callback:n};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Iu.isEqual(o.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Gt.close,{},e)}_onError(e){this._on(Gt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Qf(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Qf(e.columns,e.old_record)),t}}const kv=()=>{},Av=typeof WebSocket<"u",Iv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Nv{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=gv,this.params={},this.timeout=Qp,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=kv,this.conn=null,this.sendBuffer=[],this.serializer=new _v,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let d;return a?d=a:typeof fetch>"u"?d=(...f)=>Jr(async()=>{const{default:m}=await Promise.resolve().then(()=>ni);return{default:m}},void 0).then(({default:m})=>m(...f)):d=fetch,(...f)=>d(...f)},this.endPoint=`${e}/${tu.websocket}`,this.httpEndpoint=tm(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const o=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(a,d)=>d(JSON.stringify(a)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Xp(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Av){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Pv(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Jr(async()=>{const{default:e}=await import("./browser-PP9nv5uF.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yv}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Hr.connecting:return nr.Connecting;case Hr.open:return nr.Open;case Hr.closing:return nr.Closing;default:return nr.Closed}}isConnected(){return this.connectionState()===nr.Open}channel(e,t={config:{}}){const n=new Iu(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:o,ref:a}=e,d=()=>{this.encode(e,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${t} ${n} (${a})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(o=>{t&&o.updateJoinPayload({access_token:t}),o.joinedOnce&&o._isJoined()&&o._push(Gt.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(vv,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:o,payload:a,ref:d}=t;d&&d===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${o} ${d&&"("+d+")"||""}`,a),this.channels.filter(f=>f._isMember(n)).forEach(f=>f._trigger(o,a,d)),this.stateChangeCallbacks.message.forEach(f=>f(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Gt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${n}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([Iv],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class Pv{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Hr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Nu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function rt(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class bv extends Nu{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ru extends Nu{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Mv=function(i,e,t,n){function o(a){return a instanceof t?a:new t(function(d){d(a)})}return new(t||(t=Promise))(function(a,d){function f(y){try{p(n.next(y))}catch(_){d(_)}}function m(y){try{p(n.throw(y))}catch(_){d(_)}}function p(y){y.done?a(y.value):o(y.value).then(f,m)}p((n=n.apply(i,e||[])).next())})};const nm=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>Jr(async()=>{const{default:n}=await Promise.resolve().then(()=>ni);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Rv=()=>Mv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Jr(()=>Promise.resolve().then(()=>ni),void 0)).Response:Response}),iu=i=>{if(Array.isArray(i))return i.map(t=>iu(t));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([t,n])=>{const o=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[o]=iu(n)}),e};var sr=function(i,e,t,n){function o(a){return a instanceof t?a:new t(function(d){d(a)})}return new(t||(t=Promise))(function(a,d){function f(y){try{p(n.next(y))}catch(_){d(_)}}function m(y){try{p(n.throw(y))}catch(_){d(_)}}function p(y){y.done?a(y.value):o(y.value).then(f,m)}p((n=n.apply(i,e||[])).next())})};const ql=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Dv=(i,e,t)=>sr(void 0,void 0,void 0,function*(){const n=yield Rv();i instanceof n&&!(t!=null&&t.noResolveJson)?i.json().then(o=>{e(new bv(ql(o),i.status||500))}).catch(o=>{e(new ru(ql(o),o))}):e(new ru(ql(i),i))}),Lv=(i,e,t,n)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(o.body=JSON.stringify(n)),Object.assign(Object.assign({},o),t))};function so(i,e,t,n,o,a){return sr(this,void 0,void 0,function*(){return new Promise((d,f)=>{i(t,Lv(e,n,o,a)).then(m=>{if(!m.ok)throw m;return n!=null&&n.noResolveJson?m:m.json()}).then(m=>d(m)).catch(m=>Dv(m,f,n))})})}function bs(i,e,t,n){return sr(this,void 0,void 0,function*(){return so(i,"GET",e,t,n)})}function Mn(i,e,t,n,o){return sr(this,void 0,void 0,function*(){return so(i,"POST",e,n,o,t)})}function Fv(i,e,t,n,o){return sr(this,void 0,void 0,function*(){return so(i,"PUT",e,n,o,t)})}function Uv(i,e,t,n){return sr(this,void 0,void 0,function*(){return so(i,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function rm(i,e,t,n,o){return sr(this,void 0,void 0,function*(){return so(i,"DELETE",e,n,o,t)})}var Ct=function(i,e,t,n){function o(a){return a instanceof t?a:new t(function(d){d(a)})}return new(t||(t=Promise))(function(a,d){function f(y){try{p(n.next(y))}catch(_){d(_)}}function m(y){try{p(n.throw(y))}catch(_){d(_)}}function p(y){y.done?a(y.value):o(y.value).then(f,m)}p((n=n.apply(i,e||[])).next())})};const Ov={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},nh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $v{constructor(e,t={},n,o){this.url=e,this.headers=t,this.bucketId=n,this.fetch=nm(o)}uploadOrUpdate(e,t,n,o){return Ct(this,void 0,void 0,function*(){try{let a;const d=Object.assign(Object.assign({},nh),o);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",d.cacheControl),m&&a.append("metadata",this.encodeMetadata(m)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",d.cacheControl),m&&a.append("metadata",this.encodeMetadata(m))):(a=n,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,m&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),o!=null&&o.headers&&(f=Object.assign(Object.assign({},f),o.headers));const p=this._removeEmptyFolders(t),y=this._getFinalPath(p),_=yield this.fetch(`${this.url}/object/${y}`,Object.assign({method:e,body:a,headers:f},d!=null&&d.duplex?{duplex:d.duplex}:{})),x=yield _.json();return _.ok?{data:{path:p,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(a){if(rt(a))return{data:null,error:a};throw a}})}upload(e,t,n){return Ct(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,o){return Ct(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),d=this._getFinalPath(a),f=new URL(this.url+`/object/upload/sign/${d}`);f.searchParams.set("token",t);try{let m;const p=Object.assign({upsert:nh.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&n instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",n)):typeof FormData<"u"&&n instanceof FormData?(m=n,m.append("cacheControl",p.cacheControl)):(m=n,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType);const _=yield this.fetch(f.toString(),{method:"PUT",body:m,headers:y}),x=yield _.json();return _.ok?{data:{path:a,fullPath:x.Key},error:null}:{data:null,error:x}}catch(m){if(rt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,t){return Ct(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const o=Object.assign({},this.headers);t!=null&&t.upsert&&(o["x-upsert"]="true");const a=yield Mn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:o}),d=new URL(this.url+a.url),f=d.searchParams.get("token");if(!f)throw new Nu("No token returned by API");return{data:{signedUrl:d.toString(),path:e,token:f},error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}update(e,t,n){return Ct(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Ct(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(rt(o))return{data:null,error:o};throw o}})}copy(e,t,n){return Ct(this,void 0,void 0,function*(){try{return{data:{path:(yield Mn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(rt(o))return{data:null,error:o};throw o}})}createSignedUrl(e,t,n){return Ct(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),a=yield Mn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const d=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${d}`)},{data:a,error:null}}catch(o){if(rt(o))return{data:null,error:o};throw o}})}createSignedUrls(e,t,n){return Ct(this,void 0,void 0,function*(){try{const o=yield Mn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:o.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${a}`):null})),error:null}}catch(o){if(rt(o))return{data:null,error:o};throw o}})}download(e,t){return Ct(this,void 0,void 0,function*(){const o=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),d=a?`?${a}`:"";try{const f=this._getFinalPath(e);return{data:yield(yield bs(this.fetch,`${this.url}/${o}/${f}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(rt(f))return{data:null,error:f};throw f}})}info(e){return Ct(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield bs(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:iu(n),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}exists(e){return Ct(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Uv(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(rt(n)&&n instanceof ru){const o=n.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),o=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&o.push(a);const f=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});m!==""&&o.push(m);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${n}${p}`)}}}remove(e){return Ct(this,void 0,void 0,function*(){try{return{data:yield rm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(rt(t))return{data:null,error:t};throw t}})}list(e,t,n){return Ct(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Ov),t),{prefix:e||""});return{data:yield Mn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},n),error:null}}catch(o){if(rt(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Vv="2.7.1",Bv={"X-Client-Info":`storage-js/${Vv}`};var Or=function(i,e,t,n){function o(a){return a instanceof t?a:new t(function(d){d(a)})}return new(t||(t=Promise))(function(a,d){function f(y){try{p(n.next(y))}catch(_){d(_)}}function m(y){try{p(n.throw(y))}catch(_){d(_)}}function p(y){y.done?a(y.value):o(y.value).then(f,m)}p((n=n.apply(i,e||[])).next())})};class zv{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Bv),t),this.fetch=nm(n)}listBuckets(){return Or(this,void 0,void 0,function*(){try{return{data:yield bs(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(rt(e))return{data:null,error:e};throw e}})}getBucket(e){return Or(this,void 0,void 0,function*(){try{return{data:yield bs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(rt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Or(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Or(this,void 0,void 0,function*(){try{return{data:yield Fv(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Or(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(rt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Or(this,void 0,void 0,function*(){try{return{data:yield rm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(rt(t))return{data:null,error:t};throw t}})}}class Gv extends zv{constructor(e,t={},n){super(e,t,n)}from(e){return new $v(this.url,this.headers,e,this.fetch)}}const qv="2.49.8";let Ki="";typeof Deno<"u"?Ki="deno":typeof document<"u"?Ki="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ki="react-native":Ki="node";const Hv={"X-Client-Info":`supabase-js-${Ki}/${qv}`},Wv={headers:Hv},jv={schema:"public"},Jv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Kv={};var Yv=function(i,e,t,n){function o(a){return a instanceof t?a:new t(function(d){d(a)})}return new(t||(t=Promise))(function(a,d){function f(y){try{p(n.next(y))}catch(_){d(_)}}function m(y){try{p(n.throw(y))}catch(_){d(_)}}function p(y){y.done?a(y.value):o(y.value).then(f,m)}p((n=n.apply(i,e||[])).next())})};const Zv=i=>{let e;return i?e=i:typeof fetch>"u"?e=Wp:e=fetch,(...t)=>e(...t)},Qv=()=>typeof Headers>"u"?jp:Headers,Xv=(i,e,t)=>{const n=Zv(t),o=Qv();return(a,d)=>Yv(void 0,void 0,void 0,function*(){var f;const m=(f=yield e())!==null&&f!==void 0?f:i;let p=new o(d==null?void 0:d.headers);return p.has("apikey")||p.set("apikey",i),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),n(a,Object.assign(Object.assign({},d),{headers:p}))})};var e_=function(i,e,t,n){function o(a){return a instanceof t?a:new t(function(d){d(a)})}return new(t||(t=Promise))(function(a,d){function f(y){try{p(n.next(y))}catch(_){d(_)}}function m(y){try{p(n.throw(y))}catch(_){d(_)}}function p(y){y.done?a(y.value):o(y.value).then(f,m)}p((n=n.apply(i,e||[])).next())})};function t_(i){return i.endsWith("/")?i:i+"/"}function n_(i,e){var t,n;const{db:o,auth:a,realtime:d,global:f}=i,{db:m,auth:p,realtime:y,global:_}=e,x={db:Object.assign(Object.assign({},m),o),auth:Object.assign(Object.assign({},p),a),realtime:Object.assign(Object.assign({},y),d),global:Object.assign(Object.assign(Object.assign({},_),f),{headers:Object.assign(Object.assign({},(t=_==null?void 0:_.headers)!==null&&t!==void 0?t:{}),(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>e_(this,void 0,void 0,function*(){return""})};return i.accessToken?x.accessToken=i.accessToken:delete x.accessToken,x}const im="2.69.1",zr=30*1e3,ou=3,Hl=ou*zr,r_="http://localhost:9999",i_="supabase.auth.token",o_={"X-Client-Info":`gotrue-js/${im}`},su="X-Supabase-Api-Version",om={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},s_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,a_=6e5;class Pu extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function we(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class l_ extends Pu{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function u_(i){return we(i)&&i.name==="AuthApiError"}class sm extends Pu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Un extends Pu{constructor(e,t,n,o){super(e,n,o),this.name=t,this.status=n}}class Pn extends Un{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function c_(i){return we(i)&&i.name==="AuthSessionMissingError"}class Wl extends Un{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xs extends Un{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ss extends Un{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function d_(i){return we(i)&&i.name==="AuthImplicitGrantRedirectError"}class rh extends Un{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class au extends Un{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function jl(i){return we(i)&&i.name==="AuthRetryableFetchError"}class ih extends Un{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Xi extends Un{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const oh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sh=` 	
\r=`.split(""),f_=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<sh.length;e+=1)i[sh[e].charCodeAt(0)]=-2;for(let e=0;e<oh.length;e+=1)i[oh[e].charCodeAt(0)]=e;return i})();function am(i,e,t){const n=f_[i];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function ah(i){const e=[],t=d=>{e.push(String.fromCodePoint(d))},n={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=d=>{m_(d,n,t)};for(let d=0;d<i.length;d+=1)am(i.charCodeAt(d),o,a);return e.join("")}function h_(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function p_(i,e){for(let t=0;t<i.length;t+=1){let n=i.charCodeAt(t);if(n>55295&&n<=56319){const o=(n-55296)*1024&65535;n=(i.charCodeAt(t+1)-56320&65535|o)+65536,t+=1}h_(n,e)}}function m_(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let n=1;n<6;n+=1)if((i>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function g_(i){const e=[],t={queue:0,queuedBits:0},n=o=>{e.push(o)};for(let o=0;o<i.length;o+=1)am(i.charCodeAt(o),t,n);return new Uint8Array(e)}function y_(i){const e=[];return p_(i,t=>e.push(t)),new Uint8Array(e)}function v_(i){return Math.round(Date.now()/1e3)+i}function __(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}const Yt=()=>typeof window<"u"&&typeof document<"u",Xn={tested:!1,writable:!1},eo=()=>{if(!Yt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xn.tested)return Xn.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Xn.tested=!0,Xn.writable=!0}catch{Xn.tested=!0,Xn.writable=!1}return Xn.writable};function w_(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,a)=>{e[a]=o})}catch{}return t.searchParams.forEach((n,o)=>{e[o]=n}),e}const lm=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>Jr(async()=>{const{default:n}=await Promise.resolve().then(()=>ni);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},C_=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",um=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},Ts=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Es=async(i,e)=>{await i.removeItem(e)};class Bs{constructor(){this.promise=new Bs.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Bs.promiseConstructor=Promise;function Jl(i){const e=i.split(".");if(e.length!==3)throw new Xi("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!s_.test(e[n]))throw new Xi("JWT not in base64url format");return{header:JSON.parse(ah(e[0])),payload:JSON.parse(ah(e[1])),signature:g_(e[2]),raw:{header:e[0],payload:e[1]}}}async function x_(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function S_(i,e){return new Promise((n,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const d=await i(a);if(!e(a,null,d)){n(d);return}}catch(d){if(!e(a,d)){o(d);return}}})()})}function T_(i){return("0"+i.toString(16)).substr(-2)}function E_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let o="";for(let a=0;a<56;a++)o+=t.charAt(Math.floor(Math.random()*n));return o}return crypto.getRandomValues(e),Array.from(e,T_).join("")}async function k_(i){const t=new TextEncoder().encode(i),n=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(n);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function A_(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await k_(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $r(i,e,t=!1){const n=E_();let o=n;t&&(o+="/PASSWORD_RECOVERY"),await um(i,`${e}-code-verifier`,o);const a=await A_(n);return[a,n===a?"plain":"s256"]}const I_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function N_(i){const e=i.headers.get(su);if(!e||!e.match(I_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function P_(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function b_(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var M_=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(i);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(t[n[o]]=i[n[o]]);return t};const tr=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),R_=[502,503,504];async function lh(i){var e;if(!C_(i))throw new au(tr(i),0);if(R_.includes(i.status))throw new au(tr(i),i.status);let t;try{t=await i.json()}catch(a){throw new sm(tr(a),a)}let n;const o=N_(i);if(o&&o.getTime()>=om["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new ih(tr(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Pn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,d)=>a&&typeof d=="string",!0))throw new ih(tr(t),i.status,t.weak_password.reasons);throw new l_(tr(t),i.status||500,n)}const D_=(i,e,t,n)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),t))};async function Ee(i,e,t,n){var o;const a=Object.assign({},n==null?void 0:n.headers);a[su]||(a[su]=om["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const d=(o=n==null?void 0:n.query)!==null&&o!==void 0?o:{};n!=null&&n.redirectTo&&(d.redirect_to=n.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await L_(i,e,t+f,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(m):{data:Object.assign({},m),error:null}}async function L_(i,e,t,n,o,a){const d=D_(e,n,o,a);let f;try{f=await i(t,Object.assign({},d))}catch(m){throw console.error(m),new au(tr(m),0)}if(f.ok||await lh(f),n!=null&&n.noResolveJson)return f;try{return await f.json()}catch(m){await lh(m)}}function bn(i){var e;let t=null;$_(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=v_(i.expires_in)));const n=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:n},error:null}}function uh(i){const e=bn(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=i.weak_password),e}function Dn(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function F_(i){return{data:i,error:null}}function U_(i){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:o,verification_type:a}=i,d=M_(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:t,hashed_token:n,redirect_to:o,verification_type:a},m=Object.assign({},d);return{data:{properties:f,user:m},error:null}}function O_(i){return i}function $_(i){return i.access_token&&i.refresh_token&&i.expires_in}var V_=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(i);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(t[n[o]]=i[n[o]]);return t};class B_{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=lm(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Ee(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Dn})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=V_(e,["options"]),o=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(o.new_email=n==null?void 0:n.newEmail,delete o.newEmail),await Ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:U_,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(we(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ee(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Dn})}catch(t){if(we(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,o,a,d,f,m;try{const p={nextPage:null,lastPage:0,total:0},y=await Ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:O_});if(y.error)throw y.error;const _=await y.json(),x=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,S=(m=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(k=>{const I=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(k.split(";")[1].split("=")[1]);p[`${P}Page`]=I}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(we(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){try{return await Ee(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Dn})}catch(t){if(we(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Ee(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Dn})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Dn})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await Ee(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:n}}catch(t){if(we(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(we(t))return{data:null,error:t};throw t}}}const z_={getItem:i=>eo()?globalThis.localStorage.getItem(i):null,setItem:(i,e)=>{eo()&&globalThis.localStorage.setItem(i,e)},removeItem:i=>{eo()&&globalThis.localStorage.removeItem(i)}};function ch(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}function G_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Vr={debug:!!(globalThis&&eo()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class q_ extends cm{}async function H_(i,e,t){Vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Vr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async o=>{if(o){Vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,o.name);try{return await t()}finally{Vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,o.name)}}else{if(e===0)throw Vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new q_(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Vr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}G_();const W_={url:r_,storageKey:i_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:o_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function dh(i,e,t){return await t()}class no{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=no.nextInstanceID,no.nextInstanceID+=1,this.instanceID>0&&Yt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},W_),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new B_({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=lm(o.fetch),this.lock=o.lock||dh,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Yt()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=H_:this.lock=dh,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:eo()?this.storage=z_:(this.memoryStorage={},this.storage=ch(this.memoryStorage)):(this.memoryStorage={},this.storage=ch(this.memoryStorage)),Yt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${im}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=w_(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Yt()&&this.detectSessionInUrl&&n!=="none"){const{data:o,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),d_(a)){const m=(e=a.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:d,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return we(t)?{error:t}:{error:new sm("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,o;try{const a=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:bn}),{data:d,error:f}=a;if(f||!d)return{data:{user:null,session:null},error:f};const m=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:p,session:m},error:null}}catch(a){if(we(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,n,o;try{let a;if("email"in e){const{email:y,password:_,options:x}=e;let S=null,k=null;this.flowType==="pkce"&&([S,k]=await $r(this.storage,this.storageKey)),a=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:y,password:_,data:(t=x==null?void 0:x.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:S,code_challenge_method:k},xform:bn})}else if("phone"in e){const{phone:y,password:_,options:x}=e;a=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:_,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},channel:(o=x==null?void 0:x.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:bn})}else throw new xs("You must provide either an email or phone number and a password");const{data:d,error:f}=a;if(f||!d)return{data:{user:null,session:null},error:f};const m=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:p,session:m},error:null}}catch(a){if(we(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:d,options:f}=e;t=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:uh})}else if("phone"in e){const{phone:a,password:d,options:f}=e;t=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:uh})}else throw new xs("You must provide either an email or phone number and a password");const{data:n,error:o}=t;return o?{data:{user:null,session:null},error:o}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Wl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:o})}catch(t){if(we(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,o,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Ts(this.storage,`${this.storageKey}-code-verifier`),[n,o]=(t??"").split("/");try{const{data:a,error:d}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:bn});if(await Es(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Wl}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:d})}catch(a){if(we(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:o,access_token:a,nonce:d}=e,f=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:o,access_token:a,nonce:d,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:bn}),{data:m,error:p}=f;return p?{data:{user:null,session:null},error:p}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new Wl}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:p})}catch(t){if(we(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,o,a,d;try{if("email"in e){const{email:f,options:m}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await $r(this.storage,this.storageKey));const{error:_}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},create_user:(n=m==null?void 0:m.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:m==null?void 0:m.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:f,options:m}=e,{data:p,error:y}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=m==null?void 0:m.data)!==null&&o!==void 0?o:{},create_user:(a=m==null?void 0:m.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(d=m==null?void 0:m.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y}}throw new xs("You must provide either an email or phone number.")}catch(f){if(we(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(e){var t,n;try{let o,a;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:d,error:f}=await Ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:bn});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,p=d.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:p,session:m},error:null}}catch(o){if(we(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var t,n,o;try{let a=null,d=null;return this.flowType==="pkce"&&([a,d]=await $r(this.storage,this.storageKey)),await Ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:d}),headers:this.headers,xform:F_})}catch(a){if(we(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Pn;const{error:o}=await Ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(we(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:o,options:a}=e,{error:d}=await Ee(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in e){const{phone:n,type:o,options:a}=e,{data:d,error:f}=await Ee(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f}}throw new xs("You must provide either an email or phone number and a type")}catch(t){if(we(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ts(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Hl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let d=this.suppressGetSessionWarning;e=new Proxy(e,{get:(m,p,y)=>(!d&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,p,y))})}return{data:{session:e},error:null}}const{session:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Dn}):await this._useSession(async t=>{var n,o,a;const{data:d,error:f}=t;if(f)throw f;return!(!((n=d.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pn}:await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:Dn})})}catch(t){if(we(t))return c_(t)&&(await this._removeSession(),await Es(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:o,error:a}=n;if(a)throw a;if(!o.session)throw new Pn;const d=o.session;let f=null,m=null;this.flowType==="pkce"&&e.email!=null&&([f,m]=await $r(this.storage,this.storageKey));const{data:p,error:y}=await Ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:m}),jwt:d.access_token,xform:Dn});if(y)throw y;return d.user=p.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pn;const t=Date.now()/1e3;let n=t,o=!0,a=null;const{payload:d}=Jl(e.access_token);if(d.exp&&(n=d.exp,o=n<=t),o){const{session:f,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!f)return{data:{user:null,session:null},error:null};a=f}else{const{data:f,error:m}=await this._getUser(e.access_token);if(m)throw m;a={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(we(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:d,error:f}=t;if(f)throw f;e=(n=d.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Pn;const{session:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(we(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Yt())throw new Ss("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ss(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new rh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ss("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new rh("No code detected.");const{data:z,error:L}=await this._exchangeCodeForSession(e.code);if(L)throw L;const H=new URL(window.location.href);return H.searchParams.delete("code"),window.history.replaceState(window.history.state,"",H.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:o,access_token:a,refresh_token:d,expires_in:f,expires_at:m,token_type:p}=e;if(!a||!f||!d||!p)throw new Ss("No session defined in URL");const y=Math.round(Date.now()/1e3),_=parseInt(f);let x=y+_;m&&(x=parseInt(m));const S=x-y;S*1e3<=zr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${_}s`);const k=x-_;y-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,x,y):y-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,x,y);const{data:I,error:P}=await this._getUser(a);if(P)throw P;const O={provider_token:n,provider_refresh_token:o,access_token:a,expires_in:_,expires_at:x,refresh_token:d,token_type:p,user:I.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:O,redirectType:e.type},error:null}}catch(n){if(we(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ts(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:o,error:a}=t;if(a)return{error:a};const d=(n=o.session)===null||n===void 0?void 0:n.access_token;if(d){const{error:f}=await this.admin.signOut(d,e);if(f&&!(u_(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return e!=="others"&&(await this._removeSession(),await Es(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=__(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,o;try{const{data:{session:a},error:d}=t;if(d)throw d;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let n=null,o=null;this.flowType==="pkce"&&([n,o]=await $r(this.storage,this.storageKey,!0));try{return await Ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(we(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(we(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:o}=await this._useSession(async a=>{var d,f,m,p,y;const{data:_,error:x}=a;if(x)throw x;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(d=e.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Ee(this.fetch,"GET",S,{headers:this.headers,jwt:(y=(p=_.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return Yt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(we(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,o;const{data:a,error:d}=t;if(d)throw d;return await Ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(we(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await S_(async o=>(o>0&&await x_(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await Ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:bn})),(o,a)=>{const d=200*Math.pow(2,o);return a&&jl(a)&&Date.now()+d-n<zr})}catch(n){if(this._debug(t,"error",n),we(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Yt()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Ts(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const o=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Hl;if(this._debug(t,`session has${o?"":" not"} expired with margin of ${Hl}s`),o){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),jl(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Bs;const{data:a,error:d}=await this._refreshAccessToken(e);if(d)throw d;if(!a.session)throw new Pn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const f={session:a.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(a){if(this._debug(o,"error",a),we(a)){const d={session:null,error:a};return jl(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(d),d}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,n=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,t)}catch(m){a.push(m)}});if(await Promise.all(d),a.length>0){for(let f=0;f<a.length;f+=1)console.error(a[f]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await um(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Es(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Yt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),zr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((n.expires_at*1e3-e)/zr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${zr}ms, refresh threshold is ${ou} ticks`),o<=ou&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof cm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Yt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const o=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&o.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&o.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,d]=await $r(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(f.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);o.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&o.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:o,error:a}=t;return a?{data:null,error:a}:await Ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(we(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,o;const{data:a,error:d}=t;if(d)return{data:null,error:d};const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:m,error:p}=await Ee(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&(!((o=m==null?void 0:m.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(t){if(we(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:o,error:a}=t;if(a)return{data:null,error:a};const{data:d,error:f}=await Ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:f})})}catch(t){if(we(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:o,error:a}=t;return a?{data:null,error:a}:await Ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(we(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],o=n.filter(d=>d.factor_type==="totp"&&d.status==="verified"),a=n.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:n,totp:o,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:o},error:a}=e;if(a)return{data:null,error:a};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Jl(o.access_token);let f=null;d.aal&&(f=d.aal);let m=f;((n=(t=o.user.factors)===null||t===void 0?void 0:t.filter(_=>_.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(m="aal2");const y=d.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(d=>d.kid===e);if(n||(n=this.jwks.keys.find(d=>d.kid===e),n&&this.jwks_cached_at+a_>Date.now()))return n;const{data:o,error:a}=await Ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!o.keys||o.keys.length===0)throw new Xi("JWKS is empty");if(this.jwks=o,this.jwks_cached_at=Date.now(),n=o.keys.find(d=>d.kid===e),!n)throw new Xi("No matching signing key found in JWKS");return n}async getClaims(e,t={keys:[]}){try{let n=e;if(!n){const{data:S,error:k}=await this.getSession();if(k||!S.session)return{data:null,error:k};n=S.session.access_token}const{header:o,payload:a,signature:d,raw:{header:f,payload:m}}=Jl(n);if(P_(a.exp),!o.kid||o.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:S}=await this.getUser(n);if(S)throw S;return{data:{claims:a,header:o,signature:d},error:null}}const p=b_(o.alg),y=await this.fetchJwk(o.kid,t),_=await crypto.subtle.importKey("jwk",y,p,!0,["verify"]);if(!await crypto.subtle.verify(p,_,d,y_(`${f}.${m}`)))throw new Xi("Invalid JWT signature");return{data:{claims:a,header:o,signature:d},error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}}no.nextInstanceID=0;const j_=no;class J_ extends j_{constructor(e){super(e)}}var K_=function(i,e,t,n){function o(a){return a instanceof t?a:new t(function(d){d(a)})}return new(t||(t=Promise))(function(a,d){function f(y){try{p(n.next(y))}catch(_){d(_)}}function m(y){try{p(n.throw(y))}catch(_){d(_)}}function p(y){y.done?a(y.value):o(y.value).then(f,m)}p((n=n.apply(i,e||[])).next())})};class Y_{constructor(e,t,n){var o,a,d;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const f=t_(e),m=new URL(f);this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const p=`sb-${m.hostname.split(".")[0]}-auth-token`,y={db:jv,realtime:Kv,auth:Object.assign(Object.assign({},Jv),{storageKey:p}),global:Wv},_=n_(n??{},y);this.storageKey=(o=_.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=_.global.headers)!==null&&a!==void 0?a:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(x,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=_.auth)!==null&&d!==void 0?d:{},this.headers,_.global.fetch),this.fetch=Xv(t,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.rest=new pv(new URL("rest/v1",m).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),_.accessToken||this._listenForAuthEvents()}get functions(){return new nv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Gv(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return K_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:o,storageKey:a,flowType:d,lock:f,debug:m},p,y){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new J_({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),p),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:o,flowType:d,lock:f,debug:m,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Nv(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Z_=(i,e,t)=>new Y_(i,e,t),Q_={},X_="https://uvenhewnicmpgxqhtcfd.supabase.co",e0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2ZW5oZXduaWNtcGd4cWh0Y2ZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg3ODA3MDcsImV4cCI6MjA2NDM1NjcwN30.-e97RGlYLXjzBzWcy23TXb3XLiMffYTD7e-26ayhnlY";let ro,io;typeof import.meta<"u"&&typeof Q_<"u"&&(ro=void 0,io=void 0);ro||(console.warn("Warning: VITE_SUPABASE_URL not found in environment variables or import.meta.env is undefined. Falling back to hardcoded URL for local testing. For development/production, ensure Vite is running and .env.local is configured."),ro=X_);io||(console.warn("Warning: VITE_SUPABASE_ANON_KEY not found in environment variables or import.meta.env is undefined. Falling back to hardcoded anon key for local testing. For development/production, ensure Vite is running and .env.local is configured."),io=e0);if(!ro)throw new Error("CRITICAL Configuration Error: Supabase URL is not defined. This should not happen if fallbacks are set. Please check supabaseClient.ts.");if(!io)throw new Error("CRITICAL Configuration Error: Supabase Anon Key is not defined. This should not happen if fallbacks are set. Please check supabaseClient.ts.");const ze=Z_(ro,io);async function t0(i,e){const t={...i.options||{}};t.data={...t.data||{},role:e.role,full_name:e.full_name||i.email.split("@")[0]||"New User"};const{data:n,error:o}=await ze.auth.signUp({email:i.email,password:i.password,options:t});if(o)throw o;return n}async function n0(i){const{data:e,error:t}=await ze.auth.signInWithPassword(i);if(t)throw t;return e}async function r0(){const{error:i}=await ze.auth.signOut();if(i)throw i}async function i0(i){const{data:e,error:t}=await ze.from("profiles").select("*").eq("id",i).single();if(t&&t.code!=="PGRST116")throw console.error("Original Supabase Error during getUserProfile:",t),new Error(t.message||"An unknown error occurred while fetching user profile.");return e}async function o0(i){const{data:e,error:t}=await ze.from("influencers").select("*").eq("user_id",i).single();if(t&&t.code!=="PGRST116")throw console.error("Original Supabase Error during getCreatorProfile:",t),new Error(t.message||"An unknown error occurred while fetching creator profile.");return e}async function s0(i,e){const{data:t,error:n}=await ze.from("influencers").select("id").eq("user_id",i).single();if(n&&n.code!=="PGRST116")throw console.error("Error checking for existing creator profile:",n),new Error(n.message||"Could not verify existing creator profile.");let o=null,a=null;if(e.content_tags&&Array.isArray(e.content_tags)&&(e.content_tags=[...new Set(e.content_tags.map(d=>String(d||"").toLowerCase().trim()).filter(d=>d!==""))]),t&&t.id){const{data:d,error:f}=await ze.from("influencers").update({...e}).eq("user_id",i).select().single();o=d,a=f}else{const{data:d,error:f}=await ze.from("influencers").insert([{...e,user_id:i}]).select().single();o=d,a=f}if(a)throw console.error("Original Supabase Error during createOrUpdateCreatorProfile:",a),new Error(a.message||"An unknown error occurred while saving creator profile.");if(!o)throw new Error("Creator profile operation did not return data.");return o}async function a0(i,e,t,n,o,a){const d={user_id:i,name:e,description:t,budget:n||null,goals:o||null,campaign_tag:a||null,status:"New",current_workflow_step:"Campaign Created",matched_influencers_data:[]};console.log("[dbService.createCampaign] Attempting to insert campaign:",d);const{data:f,error:m}=await ze.from("campaigns").insert([d]).select();if(m)throw console.error("Original Supabase Error during createCampaign:",m),m.code==="23503"&&m.message.includes("campaigns_user_id_fkey")?new Error(`Failed to create campaign: The brand user ID (${i}) does not exist in the 'profiles' table. This usually means the 'handle_new_user' trigger failed to create a profile upon signup, or the 'campaigns.user_id' foreign key is misconfigured (it should point to 'profiles.id'). Original error: ${m.message}`):new Error(m.message||"An unknown error occurred while creating the campaign.");if(console.log("[dbService.createCampaign] Campaign creation successful, data:",f),f&&f.length>0&&f[0]){const p={name:d.name,budget:d.budget,goals:d.goals,campaign_tag:d.campaign_tag};try{await Dt(f[0].id,"Campaign Created",p,"success")}catch(y){console.warn("Failed to log campaign creation step, but campaign was created:",y)}}else return console.warn("createCampaign insert operation succeeded but returned no data."),[];return f}async function l0(i){const{data:e,error:t}=await ze.from("campaigns").select("*").eq("user_id",i).order("created_at",{ascending:!1});if(t)throw console.error("Original Supabase Error during getCampaigns:",t),new Error(t.message||"An unknown error occurred while fetching campaigns.");return e||[]}async function u0(i,e){const{error:t}=await ze.from("campaigns").delete().eq("id",i).eq("user_id",e);if(t)throw console.error("Original Supabase Error during deleteCampaign:",t),new Error(t.message||"An unknown error occurred while deleting the campaign.")}async function dm(i,e){const{data:t,error:n}=await ze.from("campaigns").update(e).eq("id",i).select();if(n)throw console.error("Original Supabase Error during updateCampaign:",n),new Error(n.message||"An unknown error occurred while updating the campaign.");return t||[]}async function c0(i){console.log("[dbService.getInfluencersByTagsArray] Received tags for query:",i);const e=(i||[]).map(o=>String(o||"").toLowerCase().trim()).filter(o=>o!=="");if(console.log("[dbService.getInfluencersByTagsArray] Normalized query tags for Supabase:",e),e.length===0)return console.log("[dbService.getInfluencersByTagsArray] No valid query tags after normalization, returning empty array."),[];const{data:t,error:n}=await ze.from("influencers").select("*").overlaps("content_tags",e);if(console.log("[dbService.getInfluencersByTagsArray] Supabase RAW response - data:",JSON.stringify(t),"error:",JSON.stringify(n)),n)throw console.error("Original Supabase Error during getInfluencersByTagsArray:",n),new Error(n.message||"An unknown error occurred while fetching influencers by tags array.");return console.log(`[dbService.getInfluencersByTagsArray] Found ${t?t.length:0} influencers matching tags:`,e),t||[]}async function d0(i,e,t,n){console.log("[dbService.createCampaignEnrollment] Attempting to create enrollment with:",{campaignId:i,influencerUserId:e,brandUserId:t,offerDetails:n});const{data:o,error:a}=await ze.from("campaign_enrollments").insert([{campaign_id:i,influencer_user_id:e,status:"pending_creator_approval",offer_details:n||null}]).select().single();if(a)throw console.error("Original Supabase Error during createCampaignEnrollment:",a),a.code==="23505"?new Error("This creator has already been offered a spot or is enrolled in this campaign."):new Error(a.message||"Failed to create campaign enrollment offer.");if(!o)throw new Error("Campaign enrollment offer created but no data returned.");return console.log("[dbService.createCampaignEnrollment] Enrollment created successfully:",o),o}async function f0(i){console.log("[dbService.getEnrollmentsForCreator] Fetching enrollments for creatorUserId:",i);const{data:e,error:t}=await ze.from("campaign_enrollments").select(`
      *,
      campaigns (
        name,
        description,
        campaign_tag
      )
    `).eq("influencer_user_id",i).order("created_at",{ascending:!1});if(t)throw console.error("Original Supabase Error during getEnrollmentsForCreator:",t),t.message.includes('relation "public.campaign_enrollments" does not exist')?new Error("Database Error: The 'campaign_enrollments' table does not exist. Please ensure database schema is up to date."):t.message.includes("Could not find a relationship between 'campaign_enrollments' and 'campaigns'")?new Error("Database Error: Relationship between 'campaign_enrollments' and 'campaigns' is missing or misconfigured. Check foreign keys."):new Error(t.message||"Failed to fetch creator enrollments.");return console.log("[dbService.getEnrollmentsForCreator] Fetched enrollments:",e),e||[]}async function h0(i){var a;console.log("[dbService.getEnrollmentsForCampaign] Fetching enrollments for campaignId:",i);const e=`
    *,
    profile_data:influencer_user_id!profiles ( 
      id,
      full_name,
      role,
      influencer_profile:influencers!user_id (
        id,
        name,
        niche
      )
    )
  `,t="*";let n=await ze.from("campaign_enrollments").select(e).eq("campaign_id",i).order("created_at",{ascending:!1});if(n.error){console.error(`Original Supabase Error during getEnrollmentsForCampaign (with join). Raw error object logged below. Key properties:
  Message: ${n.error.message||"N/A"}
  Code: ${n.error.code||"N/A"}
  Details: ${n.error.details||"N/A"}
  Hint: ${n.error.hint||"N/A"}`),console.error("Raw error object for inspection:",n.error);const d=n.error.message?n.error.message.toLowerCase():"";if(d.includes("could not find a relationship")&&d.includes("campaign_enrollments")&&(d.includes("influencer_user_id")||d.includes("profiles"))){if(console.warn(`[dbService.getEnrollmentsForCampaign] CRITICAL DB SCHEMA ISSUE: Failed to join 'profiles' and 'influencers' data due to missing/misconfigured Foreign Key constraints. The error was: "${n.error.message||"N/A"}". This usually means 'campaign_enrollments.influencer_user_id' is not correctly linked to 'profiles.id', or 'influencers.user_id' to 'profiles.id'. FALLING BACK to fetching enrollments without profile details. Influencer names and details might be missing in the UI. ACTION REQUIRED: Please verify your database schema in Supabase SQL Editor as per previous detailed error logs.`),n=await ze.from("campaign_enrollments").select(t).eq("campaign_id",i).order("created_at",{ascending:!1}),n.error)throw console.error("Original Supabase Error during getEnrollmentsForCampaign (fallback query):",n.error),new Error(`Fallback query also failed: ${n.error.message||"Failed to fetch enrollments for campaign."}`);const f=((a=n.data)==null?void 0:a.map(m=>({...m,profile_data:null})))||[];return console.log("[dbService.getEnrollmentsForCampaign] Fetched enrollments using FALLBACK (no profile join):",JSON.stringify(f,null,2)),f}else{let m=`CRITICAL DATABASE SCHEMA ERROR: ${`Failed to fetch enrollments for campaign (ID: ${i}). Supabase Error: ${n.error.message||"N/A"}.`} Supabase could not resolve the requested relationships. This means your database tables ('campaign_enrollments', 'profiles', 'influencers') are likely MISSING critical FOREIGN KEY constraints or UNIQUE constraints that define how they link together. The query uses explicit hints (e.g., '!profiles', '!user_id'), so if it still fails, the DB schema is the problem. ACTION REQUIRED: You MUST verify the following in your Supabase SQL Editor: 1. A Foreign Key constraint EXISTS from 'campaign_enrollments.influencer_user_id' to 'profiles.id'. This is the MOST LIKELY cause of this specific error. 2. A Foreign Key constraint EXISTS from 'influencers.user_id' to 'profiles.id'. 3. The 'influencers.user_id' column MUST have a UNIQUE constraint. 4. Ensure all tables ('campaign_enrollments', 'profiles', 'influencers') and their columns ('id', 'influencer_user_id', 'user_id', 'name', 'full_name', etc.) exist and are correctly named. Frontend code CANNOT fix this. Please correct your database schema. Hint from Supabase: `+(n.error.hint||"N/A");throw console.error("[dbService.getEnrollmentsForCampaign] Detailed error context (non-fallback):",m),new Error(m)}}const o=n.data;if(o&&o.length>0){const d=o.some(m=>!m.profile_data),f=o.some(m=>m.profile_data&&!m.profile_data.influencer_profile);if(d||f){const p=`Data inconsistency in getEnrollmentsForCampaign (ID: ${i}): ${d?"'profile_data' is null":"'influencer_profile' is null within 'profile_data'"} for one or more enrollments. This strongly suggests an issue with Foreign Key relationships or UNIQUE constraints in your Supabase schema, even if the main join succeeded. Please verify: 1. FK: 'campaign_enrollments.influencer_user_id' -> 'profiles.id'. 2. FK: 'influencers.user_id' -> 'profiles.id'. 3. UNIQUE constraint on 'influencers.user_id'. 4. Ensure 'influencers' table has 'id', 'name', 'niche' and 'profiles' has 'id', 'full_name', 'role'. The name for the Contracting Module will be incorrect until this is resolved.`;console.error(p)}}return console.log("[dbService.getEnrollmentsForCampaign] Fetched enrollments for campaign (with join attempt):",JSON.stringify(o,null,2)),o||[]}async function p0(i,e,t,n){const o={status:e};e==="approved_by_creator"&&(o.enrolled_at=new Date().toISOString()),n&&(o.creator_notes=n),console.log("[dbService.updateCreatorEnrollmentStatus] Updating enrollment:",{enrollmentId:i,newStatus:e,creatorUserId:t,notes:n});const{data:a,error:d}=await ze.from("campaign_enrollments").update(o).eq("id",i).eq("influencer_user_id",t).select().single();if(d)throw console.error("Original Supabase Error during updateCreatorEnrollmentStatus:",d),new Error(d.message||"Failed to update enrollment status.");if(!a)throw new Error("Enrollment status updated but no data returned.");return console.log("[dbService.updateCreatorEnrollmentStatus] Enrollment updated successfully:",a),a}async function fh(i,e,t){console.log("[dbService.updateCampaignEnrollmentDetails] Updating enrollment:",{enrollmentId:i,updates:e,brandUserId_context:t});const{data:n,error:o,count:a}=await ze.from("campaign_enrollments").update(e).eq("id",i).select().single();if(o){console.error("Supabase Error during updateCampaignEnrollmentDetails:"),console.error("Message:",o.message),console.error("Details:",o.details),console.error("Hint:",o.hint),console.error("Code:",o.code);let d=`Failed to update enrollment (ID: ${i}). Supabase code: ${o.code}. Message: ${o.message}.`;throw o.code==="PGRST116"||a!==null&&a===0&&!o.message.includes("violates row-level security policy")?d+=" This often means the record was not found, or Row Level Security (RLS) policies prevented access or modification, or no actual changes were made by the update (data was identical).":o.message.toLowerCase().includes("rls")||o.message.toLowerCase().includes("row level security")||o.message.toLowerCase().includes("row-level security policy")||o.code==="42501"?d+=" This is LIKELY due to Row Level Security (RLS) policies. Please ensure your 'campaign_enrollments' table permissions in Supabase allow the current user (brand) to perform this UPDATE operation. The policy usually checks if the brand owns the parent campaign.":o.code==="23503"&&(d+=" This could be a foreign key violation. Ensure all referenced IDs (like campaign_id) are valid."),console.error("[dbService.updateCampaignEnrollmentDetails] User-friendly error to throw:",d),new Error(d)}if(!n)throw console.warn("[dbService.updateCampaignEnrollmentDetails] Update operation returned no error, but also no data. Enrollment ID:",i,"Count:",a),new Error("Enrollment details update seemed to succeed (no Supabase error) but no data was returned from the SELECT. This might indicate the record was not found or an RLS issue prevented seeing the updated record after the update.");return console.log("[dbService.updateCampaignEnrollmentDetails] Enrollment details updated successfully:",n,"Rows affected by update (if available):",a),n}async function m0(i){console.log("[dbService.getAvailableCampaignsForCreator] Fetching available campaigns for creatorUserId:",i);const e=["New","Matching Complete","Creator Offers Sent","Initial Outreach Complete"],{data:t,error:n}=await ze.from("campaigns").select("*").in("status",e).order("created_at",{ascending:!1});if(n)throw console.error("Error fetching potentially available campaigns:",n),new Error(n.message||"Failed to fetch potentially available campaigns.");if(!t)return console.log("[dbService.getAvailableCampaignsForCreator] No potentially available campaigns found."),[];console.log("[dbService.getAvailableCampaignsForCreator] All potentially available campaigns:",t);const{data:o,error:a}=await ze.from("campaign_enrollments").select("campaign_id").eq("influencer_user_id",i);if(a)throw console.error("Error fetching creator existing enrollments:",a),a.message.includes('relation "public.campaign_enrollments" does not exist')?new Error("Database Error: The 'campaign_enrollments' table does not exist for filtering. Please ensure database schema is up to date."):new Error(a.message||"Failed to fetch creator involvement data for filtering.");console.log("[dbService.getAvailableCampaignsForCreator] Creator existing enrollments (for filtering):",o);const d=new Set((o==null?void 0:o.map(m=>m.campaign_id))||[]);console.log("[dbService.getAvailableCampaignsForCreator] Enrolled campaign IDs for filtering:",d);const f=t.filter(m=>!d.has(m.id));return console.log("[dbService.getAvailableCampaignsForCreator] Final list of available campaigns:",f),f||[]}async function Dt(i,e,t,n="info"){const{data:o,error:a}=await ze.from("workflow_logs").insert([{campaign_id:i,step_name:e,details:t,status:n}]).select();return a?(console.error("Original Supabase Error during logWorkflowStep:",a),console.warn(`Failed to log workflow step "${e}" for campaign ${i}. Error: ${a.message}. The operation continued.`),[]):o||[]}async function g0(i){const{data:e,error:t}=await ze.from("workflow_logs").select("*").eq("campaign_id",i).order("created_at",{ascending:!0});if(t)throw console.error("Original Supabase Error during getWorkflowLogs:",t),new Error(t.message||"An unknown error occurred while fetching workflow logs.");return e||[]}const fm=V.createContext(void 0),y0=({children:i})=>{const[e,t]=V.useState(null),[n,o]=V.useState(null),[a,d]=V.useState(null),[f,m]=V.useState(null),[p,y]=V.useState(!1),[_,x]=V.useState(!1),[S,k]=V.useState(!1),[I,P]=V.useState(!1),[O,z]=V.useState(null);V.useEffect(()=>{ze.auth.getSession().then(({data:{session:$}})=>{t($),o(($==null?void 0:$.user)??null),y(!0)}).catch($=>{console.error("Error in initial getSession:",$),z("Failed to initialize session."),y(!0)});const{data:U}=ze.auth.onAuthStateChange(($,R)=>{t(R);const te=(R==null?void 0:R.user)??null;o(te),y(!0),(!R||!te||(n==null?void 0:n.id)!==te.id)&&(d(null),m(null),x(!1),k(!1))});return()=>{var $;($=U==null?void 0:U.subscription)==null||$.unsubscribe()}},[n==null?void 0:n.id]),V.useEffect(()=>{n&&p&&!_?(k(!0),x(!0),z(null),i0(n.id).then(U=>{U?(d(U),m(U.role)):(console.warn(`Profile not found for user ${n.id}. This is expected if the user just signed up and the profile creation trigger is asynchronous or if there was an issue.`),d(null),m(null))}).catch(U=>{console.error("Error fetching user profile:",U),z(U instanceof Error?U.message:"Failed to load user profile."),d(null),m(null)}).finally(()=>{k(!1)})):!n&&p&&(d(null),m(null),k(!1),x(!1))},[n,p,_]);const Y={session:e,user:n,profile:a,role:f,loading:!p||S,actionInProgress:I,error:O,signIn:async U=>{P(!0),z(null);try{return await n0(U)}catch($){const R=$;throw z(R.message||"Sign in failed."),R}finally{P(!1)}},signUpWithRole:async(U,$)=>{P(!0),z(null);try{return await t0(U,$)}catch(R){const te=R;throw z(te.message||"Sign up failed."),te}finally{P(!1)}},signOut:async()=>{P(!0),z(null);try{await r0()}catch(U){z(U instanceof Error?U.message:"Failed to sign out."),console.error("Sign out error:",U)}finally{P(!1)}}};return w.jsx(fm.Provider,{value:Y,children:i})},ar=()=>{const i=V.useContext(fm);if(i===void 0)throw new Error("useAuth must be used within an AuthProvider");return i},v0=({navigateToLanding:i,navigateToAuth:e,navigateToDashboard:t})=>{const{user:n,profile:o,role:a,signOut:d,loading:f,actionInProgress:m}=ar(),p=async()=>{try{await d(),i()}catch(y){console.error("Logout failed on Navbar:",y)}};return w.jsx("nav",{className:"bg-gray-800 text-white shadow-lg sticky top-0 z-50",children:w.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-3 flex justify-between items-center",children:[w.jsx("button",{onClick:i,className:"text-xl font-bold hover:text-gray-300 transition-colors",children:"Influencer AI Flow"}),w.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[w.jsx("button",{onClick:i,className:"px-2 sm:px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 transition-colors","aria-label":"Home",children:"Home"}),n&&o&&a==="brand"&&w.jsx("button",{onClick:t,className:"px-2 sm:px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 transition-colors",children:"My Campaigns"}),n&&o&&a==="creator"&&w.jsx("button",{onClick:t,className:"px-2 sm:px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 transition-colors",children:"My Dashboard"}),f&&w.jsx("span",{className:"text-sm text-gray-400",children:"Checking auth..."}),!f&&n&&o?w.jsxs(w.Fragment,{children:[w.jsxs("span",{className:"text-sm text-gray-300 hidden sm:inline truncate max-w-[150px]",title:o.full_name||n.email,children:[o.full_name||n.email," (",a,")"]}),w.jsx("button",{onClick:p,disabled:m,className:"px-2 sm:px-3 py-2 rounded-md text-sm font-medium bg-red-500 hover:bg-red-600 transition-colors disabled:bg-red-300",children:m?"Logging out...":"Logout"})]}):!f&&w.jsx("button",{onClick:e,className:"px-2 sm:px-3 py-2 rounded-md text-sm font-medium bg-blue-500 hover:bg-blue-600 transition-colors",children:"Login / Sign Up"})]})]})})},hh=({navigateToAuth:i,navigateToDashboard:e})=>{const{user:t,profile:n,role:o,loading:a}=ar(),d=()=>{a||(t&&n?e():i())},f=t&&n?o==="brand"?"Manage My Campaigns":"Go To My Dashboard":"Get Started Now",m=t&&n?`View ${o==="brand"?"Campaigns":"Dashboard"}`:null,p=()=>{a||(t&&n?e():i())};return w.jsxs("div",{className:"flex flex-col items-center justify-center bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 text-white p-8 text-center flex-grow",children:[w.jsxs("header",{className:"mb-12",children:[w.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold mb-4 animate-fade-in-down",children:"Influencer Marketing, Reimagined."}),w.jsx("p",{className:"text-xl md:text-2xl text-indigo-100 mb-8 animate-fade-in-up max-w-2xl mx-auto",children:"Orchestrate your entire influencer campaign workflow, from creation to reporting, powered by AI and automation. For Brands and Creators."})]}),w.jsxs("main",{className:"flex flex-col items-center md:flex-row gap-4 md:gap-6 animate-fade-in",children:[w.jsxs("button",{onClick:d,disabled:a,className:"bg-white text-purple-700 font-bold py-3 px-8 rounded-lg shadow-xl hover:bg-gray-100 transform hover:scale-105 transition-all duration-300 ease-in-out text-lg w-full md:w-auto",children:[" ",a?"Loading...":f]}),m&&!a&&w.jsx("button",{onClick:p,disabled:a,className:"bg-transparent border-2 border-white text-white font-bold py-3 px-8 rounded-lg shadow-xl hover:bg-white hover:text-purple-700 transform hover:scale-105 transition-all duration-300 ease-in-out text-lg w-full md:w-auto",children:a?"Loading...":m})]}),w.jsxs("section",{className:"mt-16 max-w-4xl w-full mx-auto animate-fade-in-slow",children:[w.jsx("h2",{className:"text-3xl font-bold mb-8 text-white",children:"Key Features"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-left",children:[w.jsxs("div",{className:"bg-white/20 backdrop-blur-md p-6 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-300",children:[w.jsx("h3",{className:"text-xl font-semibold mb-2 text-indigo-100",children:" AI-Powered Matching"}),w.jsx("p",{className:"text-sm text-indigo-200",children:"Discover the perfect influencers using advanced AI to analyze profiles and campaign goals."})]}),w.jsxs("div",{className:"bg-white/20 backdrop-blur-md p-6 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-300",children:[w.jsx("h3",{className:"text-xl font-semibold mb-2 text-indigo-100",children:" Automated Outreach"}),w.jsx("p",{className:"text-sm text-indigo-200",children:"Generate personalized, multilingual messages and even synthesize voice for impactful communication."})]}),w.jsxs("div",{className:"bg-white/20 backdrop-blur-md p-6 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-300",children:[w.jsx("h3",{className:"text-xl font-semibold mb-2 text-indigo-100",children:" Streamlined Workflow"}),w.jsx("p",{className:"text-sm text-indigo-200",children:"Manage contracts, payments, and performance reporting, all within a unified platform."})]})]})]}),w.jsx("footer",{className:"mt-20 text-indigo-200 text-sm animate-fade-in-very-slow",children:w.jsxs("p",{children:[" ",new Date().getFullYear()," Influencer Workflow AI. All rights reserved."]})}),w.jsx("style",{children:`
        @keyframes fade-in-down {
          0% { opacity: 0; transform: translateY(-20px); }
          100% { opacity: 1; transform: translateY(0); }
        }
        @keyframes fade-in-up {
          0% { opacity: 0; transform: translateY(20px); }
          100% { opacity: 1; transform: translateY(0); }
        }
        @keyframes fade-in {
          0% { opacity: 0; }
          100% { opacity: 1; }
        }
        .animate-fade-in-down { animation: fade-in-down 0.5s ease-out forwards; }
        .animate-fade-in-up { animation: fade-in-up 0.5s ease-out 0.2s forwards; }
        .animate-fade-in { animation: fade-in 1s ease-out 0.4s forwards; }
        .animate-fade-in-slow { animation: fade-in 1s ease-out 0.6s forwards; }
        .animate-fade-in-very-slow { animation: fade-in 1s ease-out 0.8s forwards; }
      `})]})},_0=({onAuthSuccess:i})=>{const{signIn:e,error:t,actionInProgress:n}=ar(),[o,a]=V.useState(""),[d,f]=V.useState(""),[m,p]=V.useState(null),y=async _=>{_.preventDefault(),p(null);try{await e({email:o,password:d}),i()}catch(x){x instanceof Error?p(x.message):p("An unknown error occurred during sign in."),console.error("Sign in failed from form:",x)}};return w.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,noValidate:!0,children:[m&&w.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded text-sm",children:m}),!m&&t&&w.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded text-sm",children:t}),w.jsx("input",{type:"hidden",name:"remember",defaultValue:"true"}),w.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email-address-login",className:"sr-only",children:"Email address"}),w.jsx("input",{id:"email-address-login",name:"email",type:"email",autoComplete:"email",required:!0,value:o,onChange:_=>a(_.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm bg-white",placeholder:"Email address"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password-login",className:"sr-only",children:"Password"}),w.jsx("input",{id:"password-login",name:"password",type:"password",autoComplete:"current-password",required:!0,value:d,onChange:_=>f(_.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm bg-white",placeholder:"Password"})]})]}),w.jsx("div",{className:"mt-6",children:w.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400",children:n?"Signing in...":"Sign in"})})]})},w0=({onAuthSuccess:i})=>{const{signUpWithRole:e,error:t,actionInProgress:n}=ar(),[o,a]=V.useState(""),[d,f]=V.useState(""),[m,p]=V.useState(""),[y,_]=V.useState(""),[x,S]=V.useState("creator"),[k,I]=V.useState(null),P=async O=>{if(O.preventDefault(),I(null),d!==m){I("Passwords do not match.");return}if(d.length<6){I("Password should be at least 6 characters long.");return}const z={email:o,password:d},L={role:x,full_name:y||void 0};try{await e(z,L),i()}catch(H){H instanceof Error?I(H.message):I("An unknown error occurred during sign up."),console.error("Sign up failed from form:",H)}};return w.jsxs("form",{className:"mt-8 space-y-6",onSubmit:P,noValidate:!0,children:[k&&w.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded text-sm",children:k}),!k&&t&&w.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded text-sm",children:t}),w.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"fullName",className:"sr-only",children:"Full Name (Optional)"}),w.jsx("input",{id:"fullName",name:"fullName",type:"text",value:y,onChange:O=>_(O.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm bg-white",placeholder:"Full Name (Optional)"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email-address-signup",className:"sr-only",children:"Email address"}),w.jsx("input",{id:"email-address-signup",name:"email",type:"email",autoComplete:"email",required:!0,value:o,onChange:O=>a(O.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm bg-white",placeholder:"Email address"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password-signup",className:"sr-only",children:"Password"}),w.jsx("input",{id:"password-signup",name:"password",type:"password",autoComplete:"new-password",required:!0,value:d,onChange:O=>f(O.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm bg-white",placeholder:"Password (min. 6 characters)"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm Password"}),w.jsx("input",{id:"confirm-password",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:m,onChange:O=>p(O.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm bg-white",placeholder:"Confirm Password"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 py-2",children:"I am a..."}),w.jsxs("select",{id:"role",name:"role",value:x,onChange:O=>S(O.target.value),required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm bg-white",children:[w.jsx("option",{value:"creator",children:"Creator / Influencer"}),w.jsx("option",{value:"brand",children:"Brand / Company"})]})]})]}),w.jsx("div",{children:w.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400",children:n?"Signing up...":"Sign up"})})]})},C0=({onAuthSuccess:i})=>{const[e,t]=V.useState(!0);return w.jsx("div",{className:"min-h-[calc(100vh-64px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-gray-50",children:w.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 sm:p-10 rounded-xl shadow-2xl",children:[w.jsx("div",{children:w.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:e?"Sign in to your account":"Create your account"})}),e?w.jsx(_0,{onAuthSuccess:i}):w.jsx(w0,{onAuthSuccess:i}),w.jsx("div",{className:"text-sm text-center",children:e?w.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",w.jsx("button",{onClick:()=>t(!1),className:"font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none focus:underline","aria-label":"Switch to sign up form",children:"Sign up"})]}):w.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",w.jsx("button",{onClick:()=>t(!0),className:"font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none focus:underline","aria-label":"Switch to sign in form",children:"Sign in"})]})})]})})},x0=({currentUserId:i,onCampaignCreated:e,onCancel:t})=>{const[n,o]=V.useState(""),[a,d]=V.useState(""),[f,m]=V.useState(""),[p,y]=V.useState(""),[_,x]=V.useState(""),[S,k]=V.useState(!1),[I,P]=V.useState(null),O=async z=>{z.preventDefault(),k(!0),P(null);try{await a0(i,n,a,parseFloat(f)||void 0,p,_),e()}catch(L){console.error("Failed to create campaign:",L),P(L instanceof Error?L.message:"An unknown error occurred.")}finally{k(!1)}};return w.jsxs("div",{className:"max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-md",children:[w.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-6",children:"Create New Campaign"}),I&&w.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:I}),w.jsxs("form",{onSubmit:O,children:[w.jsxs("div",{className:"mb-4",children:[w.jsx("label",{htmlFor:"name",className:"block text-gray-700 text-sm font-bold mb-2",children:"Campaign Name"}),w.jsx("input",{type:"text",id:"name",value:n,onChange:z=>o(z.target.value),required:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white"})]}),w.jsxs("div",{className:"mb-4",children:[w.jsx("label",{htmlFor:"description",className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),w.jsx("textarea",{id:"description",value:a,onChange:z=>d(z.target.value),rows:3,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white"})]}),w.jsxs("div",{className:"mb-4",children:[w.jsx("label",{htmlFor:"budget",className:"block text-gray-700 text-sm font-bold mb-2",children:"Budget (Optional)"}),w.jsx("input",{type:"number",id:"budget",value:f,onChange:z=>m(z.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white",placeholder:"e.g., 5000"})]}),w.jsxs("div",{className:"mb-4",children:[w.jsx("label",{htmlFor:"goals",className:"block text-gray-700 text-sm font-bold mb-2",children:"Campaign Goals (Optional)"}),w.jsx("textarea",{id:"goals",value:p,onChange:z=>y(z.target.value),rows:3,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white",placeholder:"e.g., Increase brand awareness, drive product sales"})]}),w.jsxs("div",{className:"mb-6",children:[w.jsx("label",{htmlFor:"campaignTag",className:"block text-gray-700 text-sm font-bold mb-2",children:"Campaign Tags/Categories (Optional)"}),w.jsx("input",{type:"text",id:"campaignTag",value:_,onChange:z=>x(z.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white",placeholder:"e.g., Lifestyle, Tech, Gaming, Food (comma-separated)"}),w.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter multiple tags separated by commas. Creators will be matched if they have any of these tags."})]}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("button",{type:"submit",disabled:S,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:S?"Creating...":"Create Campaign"}),w.jsx("button",{type:"button",onClick:t,className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Cancel"})]})]})]})},S0=({campaign:i,onCampaignUpdate:e,advanceWorkflowStep:t,currentUserId:n})=>{const[o,a]=V.useState([]),[d,f]=V.useState(()=>{const U=new Set;return i.matched_influencers_data&&i.matched_influencers_data.forEach($=>U.add($.id)),U}),[m,p]=V.useState(!1),[y,_]=V.useState(null),[x,S]=V.useState(!1),[k,I]=V.useState(null),P=U=>U?U.split(",").map($=>$.trim().toLowerCase()).filter($=>$):[];V.useEffect(()=>{console.log("[CreatorMatchingModule] useEffect for fetchInfluencers triggered. Campaign ID:",i.id,"Status:",i.status,"Current Step:",i.current_workflow_step,"Campaign Tag:",i.campaign_tag);const U=async()=>{const R=P(i.campaign_tag);if(console.log("[CreatorMatchingModule] Parsed campaign tags for query:",R),R.length>0){p(!0),_(null),console.log("[CreatorMatchingModule] Attempting to fetch influencers...");try{const te=await c0(R);console.log("[CreatorMatchingModule] Fetched influencers RAW:",JSON.stringify(te)),a(te)}catch(te){console.error("[CreatorMatchingModule] Error fetching influencers in useEffect:",te),_(te instanceof Error?te.message:"Could not load influencers. Check console for Supabase errors and ensure creator tags are lowercase in the database."),a([])}finally{p(!1)}}else console.log("[CreatorMatchingModule] No campaign tags to query by. Clearing available influencers."),a([]),p(!1)},$=i.status==="New"||i.status==="Matching"||i.current_workflow_step==="Campaign Created";if(console.log("[CreatorMatchingModule] shouldFetch based on status/step:",$),$)U();else if(i.matched_influencers_data&&i.matched_influencers_data.length>0){const R=P(i.campaign_tag);R.length>0&&o.length===0&&!m?(console.log("[CreatorMatchingModule] Attempting gentle re-fetch for context on existing matched data."),U()):o.length===0&&R.length}else console.log("[CreatorMatchingModule] Conditions not met for fetching, or no existing matched data to enrich. Clearing available influencers."),a([])},[i.campaign_tag,i.status,i.current_workflow_step,i.id,i.matched_influencers_data]);const O=U=>{f($=>{const R=new Set($);return R.has(U)?R.delete(U):R.add(U),R})},z=async()=>{S(!0),I(null),console.log("[CreatorMatchingModule.handleSaveMatches] Starting to save matches/create enrollments."),console.log("[CreatorMatchingModule.handleSaveMatches] Selected Influencer IDs (these are influencers.id):",Array.from(d)),console.log("[CreatorMatchingModule.handleSaveMatches] All Available Influencers (for lookup):",o);const U=o.filter($=>d.has($.id));if(U.length===0){I("No influencers selected to save or offer."),S(!1),console.warn("[CreatorMatchingModule.handleSaveMatches] No influencers selected.");return}console.log("[CreatorMatchingModule.handleSaveMatches] Filtered selectedFullInfluencers:",U);try{let $=0;const R=[],te=[];for(const fe of U){if(console.log(`[CreatorMatchingModule.handleSaveMatches] Processing selected influencer: ${fe.name} (ID: ${fe.id}, User/Profile ID: ${fe.user_id})`),!fe.user_id){const j=`Cannot enroll influencer ${fe.name} (ID: ${fe.id}) as their user_id (profile ID for enrollment) is missing. Please ensure creator profile is complete.`;console.error(j),R.push(j);continue}try{const j={message:`Hi ${fe.name}, we'd love to collaborate with you on our campaign: ${i.name}!`,proposed_budget_share:i.budget?(i.budget/U.length).toFixed(2):"To be discussed"};console.log(`[CreatorMatchingModule.handleSaveMatches] Calling createCampaignEnrollment for campaign ${i.id}, influencer_user_id ${fe.user_id}, brand_user_id ${n}`);const oe=await d0(i.id,fe.user_id,n,j);console.log(`[CreatorMatchingModule.handleSaveMatches] Enrollment successful for ${fe.name}:`,oe),te.push({influencer_name:fe.name,enrollment_id:oe.id}),$++}catch(j){const oe=j instanceof Error?j.message:`Offer failed for ${fe.name}.`;console.error(`[CreatorMatchingModule.handleSaveMatches] Failed to create enrollment for influencer ${fe.name}:`,oe,j),R.push(oe)}}if(R.length>0){const fe=`Some offers failed: ${R.join("; ")}`;I(fe),console.warn("[CreatorMatchingModule.handleSaveMatches] Enrollment errors occurred:",fe)}const _e=U.map(fe=>({id:fe.id,name:fe.name,niche:fe.niche})),xe=await dm(i.id,{matched_influencers_data:_e});if(xe&&xe.length>0&&xe[0])e(xe[0]),await t("Creator Offers Sent","Offers Sent",{offers_sent_count:$,successful_enrollments:te,failed_offer_count:R.length,brand_user_id:n}),R.length===0&&$>0?alert(`${$} influencer(s) have been invited to the campaign.`):$>0&&alert(`${$} influencer(s) invited. Some offers may have failed. Check errors.`);else throw new Error("Failed to update campaign after attempting enrollment offers.")}catch($){const R=$ instanceof Error?$.message:"An unknown error occurred.";console.error("[CreatorMatchingModule.handleSaveMatches] Overall error saving matches/sending offers:",R,$),k||I(R),await Dt(i.id,"Creator Offers Send Failed",{error:R,brand_user_id:n},"failed")}finally{S(!1)}},L=i.status==="New"||i.status==="Matching"||i.current_workflow_step==="Campaign Created"||i.current_workflow_step==="Creator Matching Complete",H=P(i.campaign_tag),X=H.join(", ")||"Not specified",F=L?"Selected for Offer:":"Previously Selected/Offered Influencers:";let Y=[];return L?Y=o.filter(U=>d.has(U.id)).map(U=>({id:U.id,name:U.name,niche:U.niche,user_id:U.user_id})):i.matched_influencers_data&&i.matched_influencers_data.length>0&&(Y=i.matched_influencers_data.map(U=>{const $=o.find(R=>R.id===U.id);return{id:U.id,name:U.name,niche:U.niche,user_id:$==null?void 0:$.user_id}})),w.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg shadow",children:[w.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"1. Creator Matching & Offers"}),!L&&i.matched_influencers_data&&i.matched_influencers_data.length>0&&w.jsxs("p",{className:"text-sm text-yellow-600 bg-yellow-50 p-2 rounded mb-3",children:["Initial matching/offer phase may be complete. Current step: ",i.current_workflow_step,"."]}),k&&w.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:k}),L&&w.jsxs(w.Fragment,{children:[w.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Searching for influencers matching campaign tags: ",w.jsx("strong",{className:"text-indigo-600",children:X}),"."]}),w.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:['Select influencers to send collaboration offers for: "',i.goals||"General Campaign",'". Creators are matched if any of their profile tags align with the campaign tags.']})]}),m&&w.jsx("p",{className:"text-sm text-blue-600 my-3 p-3 bg-blue-50 border border-blue-200 rounded",children:"Loading influencers based on tags..."}),y&&w.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded my-3",children:y}),!m&&!y&&o.length===0&&L&&H.length>0&&w.jsxs("div",{className:"text-sm text-orange-600 bg-orange-50 p-3 rounded my-3 border border-orange-200",children:[w.jsxs("p",{className:"font-medium",children:['No influencers found matching the tags: "',X,'".']}),w.jsx("p",{className:"text-xs mt-1",children:"Troubleshooting tips:"}),w.jsxs("ul",{className:"list-disc list-inside pl-4 text-xs",children:[w.jsx("li",{children:"Ensure creator profiles exist in the database."}),w.jsx("li",{children:"Check that creator profiles have `content_tags` that include at least one of these campaign tags."}),w.jsx("li",{children:'Creator `content_tags` in the database **MUST be lowercase** (e.g., "lifestyle", not "Lifestyle"). Run the provided SQL script if you haven\'t.'}),w.jsx("li",{children:"Verify in browser console logs: search for `[dbService.getInfluencersByTagsArray] Supabase RAW response` to see if Supabase returned any data."})]})]}),!m&&!y&&L&&H.length===0&&w.jsx("p",{className:"text-sm text-yellow-700 bg-yellow-50 p-3 rounded my-3 border border-yellow-300",children:"Please specify comma-separated campaign tags in the main campaign form to find relevant influencers. Matching cannot proceed without tags."}),o.length>0&&w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:o.map(U=>{var $;return w.jsxs("div",{onClick:()=>L&&O(U.id),className:`p-3 border rounded-md transition-all
                          ${d.has(U.id)?"bg-blue-100 border-blue-400 ring-2 ring-blue-300":"bg-gray-50 hover:bg-gray-100 border-gray-300"}
                          ${L?"cursor-pointer":"opacity-70 cursor-not-allowed"}`,role:L?"button":void 0,tabIndex:L?0:-1,"aria-pressed":d.has(U.id),children:[w.jsx("h4",{className:"font-medium text-gray-800",children:U.name}),w.jsxs("p",{className:"text-sm text-gray-500",children:["Primary Niche: ",U.niche]}),w.jsxs("p",{className:"text-xs text-gray-400",children:["Relevant Tags: ",(U.content_tags||[]).join(", ")||"N/A"]}),w.jsxs("p",{className:"text-xs text-gray-400",children:["Followers: ",(($=U.followers)==null?void 0:$.toLocaleString())||"N/A"]}),!U.user_id&&w.jsx("p",{className:"text-xs text-red-500",children:"Warning: Profile ID (user_id) missing, cannot enroll."}),U.user_id&&w.jsxs("p",{className:"text-xs text-green-500",children:["Profile ID: ",U.user_id.substring(0,8),"..."]})]},U.id)})}),L&&o.length>0&&w.jsx("button",{onClick:z,disabled:x||d.size===0,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded disabled:bg-gray-400",children:x?"Sending Offers...":`Send Offers to ${d.size} Influencer(s)`}),Y.length>0&&w.jsxs("div",{className:"mt-6",children:[w.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:F}),w.jsx("ul",{className:"list-disc list-inside pl-2 text-sm text-gray-600 space-y-1",children:Y.map(U=>w.jsxs("li",{children:[U.name," (Primary Niche: ",U.niche,")",U.user_id?` (Profile ID: ${U.user_id.substring(0,8)}...)`:L&&!U.user_id?" (Missing Profile ID for offer)":""]},U.id))})]}),d.size>0&&Y.length===0&&!L&&w.jsxs("div",{className:"mt-6",children:[w.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:F}),w.jsx("p",{className:"text-sm text-gray-400 italic",children:"Details for previously selected influencers might not be fully available if campaign tags or influencer profiles have changed significantly."})]})]})};var Pe;(function(i){i.assertEqual=o=>{};function e(o){}i.assertIs=e;function t(o){throw new Error}i.assertNever=t,i.arrayToEnum=o=>{const a={};for(const d of o)a[d]=d;return a},i.getValidEnumValues=o=>{const a=i.objectKeys(o).filter(f=>typeof o[o[f]]!="number"),d={};for(const f of a)d[f]=o[f];return i.objectValues(d)},i.objectValues=o=>i.objectKeys(o).map(function(a){return o[a]}),i.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const a=[];for(const d in o)Object.prototype.hasOwnProperty.call(o,d)&&a.push(d);return a},i.find=(o,a)=>{for(const d of o)if(a(d))return d},i.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function n(o,a=" | "){return o.map(d=>typeof d=="string"?`'${d}'`:d).join(a)}i.joinValues=n,i.jsonStringifyReplacer=(o,a)=>typeof a=="bigint"?a.toString():a})(Pe||(Pe={}));var ph;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(ph||(ph={}));const ae=Pe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Rn=i=>{switch(typeof i){case"undefined":return ae.undefined;case"string":return ae.string;case"number":return Number.isNaN(i)?ae.nan:ae.number;case"boolean":return ae.boolean;case"function":return ae.function;case"bigint":return ae.bigint;case"symbol":return ae.symbol;case"object":return Array.isArray(i)?ae.array:i===null?ae.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?ae.promise:typeof Map<"u"&&i instanceof Map?ae.map:typeof Set<"u"&&i instanceof Set?ae.set:typeof Date<"u"&&i instanceof Date?ae.date:ae.object;default:return ae.unknown}},Q=Pe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class cn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},n={_errors:[]},o=a=>{for(const d of a.issues)if(d.code==="invalid_union")d.unionErrors.map(o);else if(d.code==="invalid_return_type")o(d.returnTypeError);else if(d.code==="invalid_arguments")o(d.argumentsError);else if(d.path.length===0)n._errors.push(t(d));else{let f=n,m=0;for(;m<d.path.length;){const p=d.path[m];m===d.path.length-1?(f[p]=f[p]||{_errors:[]},f[p]._errors.push(t(d))):f[p]=f[p]||{_errors:[]},f=f[p],m++}}};return o(this),n}static assert(e){if(!(e instanceof cn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Pe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const o of this.issues)o.path.length>0?(t[o.path[0]]=t[o.path[0]]||[],t[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}cn.create=i=>new cn(i);const lu=(i,e)=>{let t;switch(i.code){case Q.invalid_type:i.received===ae.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case Q.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,Pe.jsonStringifyReplacer)}`;break;case Q.unrecognized_keys:t=`Unrecognized key(s) in object: ${Pe.joinValues(i.keys,", ")}`;break;case Q.invalid_union:t="Invalid input";break;case Q.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Pe.joinValues(i.options)}`;break;case Q.invalid_enum_value:t=`Invalid enum value. Expected ${Pe.joinValues(i.options)}, received '${i.received}'`;break;case Q.invalid_arguments:t="Invalid function arguments";break;case Q.invalid_return_type:t="Invalid function return type";break;case Q.invalid_date:t="Invalid date";break;case Q.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:Pe.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case Q.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case Q.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case Q.custom:t="Invalid input";break;case Q.invalid_intersection_types:t="Intersection results could not be merged";break;case Q.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case Q.not_finite:t="Number must be finite";break;default:t=e.defaultError,Pe.assertNever(i)}return{message:t}};let T0=lu;function E0(){return T0}const k0=i=>{const{data:e,path:t,errorMaps:n,issueData:o}=i,a=[...t,...o.path||[]],d={...o,path:a};if(o.message!==void 0)return{...o,path:a,message:o.message};let f="";const m=n.filter(p=>!!p).slice().reverse();for(const p of m)f=p(d,{data:e,defaultError:f}).message;return{...o,path:a,message:f}};function ne(i,e){const t=E0(),n=k0({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===lu?void 0:lu].filter(o=>!!o)});i.common.issues.push(n)}class ht{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const o of t){if(o.status==="aborted")return ve;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const o of t){const a=await o.key,d=await o.value;n.push({key:a,value:d})}return ht.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const o of t){const{key:a,value:d}=o;if(a.status==="aborted"||d.status==="aborted")return ve;a.status==="dirty"&&e.dirty(),d.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof d.value<"u"||o.alwaysSet)&&(n[a.value]=d.value)}return{status:e.value,value:n}}}const ve=Object.freeze({status:"aborted"}),Yi=i=>({status:"dirty",value:i}),Lt=i=>({status:"valid",value:i}),mh=i=>i.status==="aborted",gh=i=>i.status==="dirty",Yr=i=>i.status==="valid",Ms=i=>typeof Promise<"u"&&i instanceof Promise;var ce;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ce||(ce={}));class Xt{constructor(e,t,n,o){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const yh=(i,e)=>{if(Yr(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new cn(i.common.issues);return this._error=t,this._error}}};function Ce(i){if(!i)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:o}=i;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(d,f)=>{const{message:m}=i;return d.code==="invalid_enum_value"?{message:m??f.defaultError}:typeof f.data>"u"?{message:m??n??f.defaultError}:d.code!=="invalid_type"?{message:f.defaultError}:{message:m??t??f.defaultError}},description:o}}class ke{get description(){return this._def.description}_getType(e){return Rn(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Rn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ht,ctx:{common:e.parent.common,data:e.data,parsedType:Rn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Ms(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rn(e)},o=this._parseSync({data:e,path:n.path,parent:n});return yh(n,o)}"~validate"(e){var n,o;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rn(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:t});return Yr(a)?{value:a.value}:{issues:t.common.issues}}catch(a){(o=(n=a==null?void 0:a.message)==null?void 0:n.toLowerCase())!=null&&o.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(a=>Yr(a)?{value:a.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rn(e)},o=this._parse({data:e,path:n.path,parent:n}),a=await(Ms(o)?o:Promise.resolve(o));return yh(n,a)}refine(e,t){const n=o=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(o):t;return this._refinement((o,a)=>{const d=e(o),f=()=>a.addIssue({code:Q.custom,...n(o)});return typeof Promise<"u"&&d instanceof Promise?d.then(m=>m?!0:(f(),!1)):d?!0:(f(),!1)})}refinement(e,t){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof t=="function"?t(n,o):t),!1))}_refinement(e){return new Xr({schema:this,typeName:ye.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Ln.create(this,this._def)}nullable(){return ei.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qt.create(this)}promise(){return Us.create(this,this._def)}or(e){return Ds.create([this,e],this._def)}and(e){return Ls.create(this,e,this._def)}transform(e){return new Xr({...Ce(this._def),schema:this,typeName:ye.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new fu({...Ce(this._def),innerType:this,defaultValue:t,typeName:ye.ZodDefault})}brand(){return new K0({typeName:ye.ZodBranded,type:this,...Ce(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new hu({...Ce(this._def),innerType:this,catchValue:t,typeName:ye.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return bu.create(this,e)}readonly(){return pu.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const A0=/^c[^\s-]{8,}$/i,I0=/^[0-9a-z]+$/,N0=/^[0-9A-HJKMNP-TV-Z]{26}$/i,P0=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,b0=/^[a-z0-9_-]{21}$/i,M0=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,R0=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,D0=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,L0="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Kl;const F0=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,U0=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,O0=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,$0=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,V0=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,B0=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,hm="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",z0=new RegExp(`^${hm}$`);function pm(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const t=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function G0(i){return new RegExp(`^${pm(i)}$`)}function q0(i){let e=`${hm}T${pm(i)}`;const t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function H0(i,e){return!!((e==="v4"||!e)&&F0.test(i)||(e==="v6"||!e)&&O0.test(i))}function W0(i,e){if(!M0.test(i))return!1;try{const[t]=i.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||"typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||e&&o.alg!==e)}catch{return!1}}function j0(i,e){return!!((e==="v4"||!e)&&U0.test(i)||(e==="v6"||!e)&&$0.test(i))}class Zt extends ke{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ae.string){const a=this._getOrReturnCtx(e);return ne(a,{code:Q.invalid_type,expected:ae.string,received:a.parsedType}),ve}const n=new ht;let o;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(o=this._getOrReturnCtx(e,o),ne(o,{code:Q.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(o=this._getOrReturnCtx(e,o),ne(o,{code:Q.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const d=e.data.length>a.value,f=e.data.length<a.value;(d||f)&&(o=this._getOrReturnCtx(e,o),d?ne(o,{code:Q.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):f&&ne(o,{code:Q.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")D0.test(e.data)||(o=this._getOrReturnCtx(e,o),ne(o,{validation:"email",code:Q.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Kl||(Kl=new RegExp(L0,"u")),Kl.test(e.data)||(o=this._getOrReturnCtx(e,o),ne(o,{validation:"emoji",code:Q.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")P0.test(e.data)||(o=this._getOrReturnCtx(e,o),ne(o,{validation:"uuid",code:Q.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")b0.test(e.data)||(o=this._getOrReturnCtx(e,o),ne(o,{validation:"nanoid",code:Q.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")A0.test(e.data)||(o=this._getOrReturnCtx(e,o),ne(o,{validation:"cuid",code:Q.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")I0.test(e.data)||(o=this._getOrReturnCtx(e,o),ne(o,{validation:"cuid2",code:Q.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")N0.test(e.data)||(o=this._getOrReturnCtx(e,o),ne(o,{validation:"ulid",code:Q.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),ne(o,{validation:"url",code:Q.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),ne(o,{validation:"regex",code:Q.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(o=this._getOrReturnCtx(e,o),ne(o,{code:Q.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(o=this._getOrReturnCtx(e,o),ne(o,{code:Q.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(o=this._getOrReturnCtx(e,o),ne(o,{code:Q.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?q0(a).test(e.data)||(o=this._getOrReturnCtx(e,o),ne(o,{code:Q.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?z0.test(e.data)||(o=this._getOrReturnCtx(e,o),ne(o,{code:Q.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?G0(a).test(e.data)||(o=this._getOrReturnCtx(e,o),ne(o,{code:Q.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?R0.test(e.data)||(o=this._getOrReturnCtx(e,o),ne(o,{validation:"duration",code:Q.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?H0(e.data,a.version)||(o=this._getOrReturnCtx(e,o),ne(o,{validation:"ip",code:Q.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?W0(e.data,a.alg)||(o=this._getOrReturnCtx(e,o),ne(o,{validation:"jwt",code:Q.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?j0(e.data,a.version)||(o=this._getOrReturnCtx(e,o),ne(o,{validation:"cidr",code:Q.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?V0.test(e.data)||(o=this._getOrReturnCtx(e,o),ne(o,{validation:"base64",code:Q.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?B0.test(e.data)||(o=this._getOrReturnCtx(e,o),ne(o,{validation:"base64url",code:Q.invalid_string,message:a.message}),n.dirty()):Pe.assertNever(a);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(o=>e.test(o),{validation:t,code:Q.invalid_string,...ce.errToObj(n)})}_addCheck(e){return new Zt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ce.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ce.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ce.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ce.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ce.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ce.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...ce.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ce.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ce.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ce.errToObj(t)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new Zt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Zt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Zt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Zt.create=i=>new Zt({checks:[],typeName:ye.ZodString,coerce:(i==null?void 0:i.coerce)??!1,...Ce(i)});function J0(i,e){const t=(i.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=t>n?t:n,a=Number.parseInt(i.toFixed(o).replace(".","")),d=Number.parseInt(e.toFixed(o).replace(".",""));return a%d/10**o}class rr extends ke{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ae.number){const a=this._getOrReturnCtx(e);return ne(a,{code:Q.invalid_type,expected:ae.number,received:a.parsedType}),ve}let n;const o=new ht;for(const a of this._def.checks)a.kind==="int"?Pe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ne(n,{code:Q.invalid_type,expected:"integer",received:"float",message:a.message}),o.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),ne(n,{code:Q.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),o.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),ne(n,{code:Q.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),o.dirty()):a.kind==="multipleOf"?J0(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),ne(n,{code:Q.not_multiple_of,multipleOf:a.value,message:a.message}),o.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ne(n,{code:Q.not_finite,message:a.message}),o.dirty()):Pe.assertNever(a);return{status:o.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,n,o){return new rr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ce.toString(o)}]})}_addCheck(e){return new rr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Pe.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}rr.create=i=>new rr({checks:[],typeName:ye.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...Ce(i)});class ir extends ke{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ae.bigint)return this._getInvalidInput(e);let n;const o=new ht;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),ne(n,{code:Q.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),o.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),ne(n,{code:Q.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),o.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ne(n,{code:Q.not_multiple_of,multipleOf:a.value,message:a.message}),o.dirty()):Pe.assertNever(a);return{status:o.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return ne(t,{code:Q.invalid_type,expected:ae.bigint,received:t.parsedType}),ve}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,n,o){return new ir({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ce.toString(o)}]})}_addCheck(e){return new ir({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ir.create=i=>new ir({checks:[],typeName:ye.ZodBigInt,coerce:(i==null?void 0:i.coerce)??!1,...Ce(i)});class Rs extends ke{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ae.boolean){const n=this._getOrReturnCtx(e);return ne(n,{code:Q.invalid_type,expected:ae.boolean,received:n.parsedType}),ve}return Lt(e.data)}}Rs.create=i=>new Rs({typeName:ye.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...Ce(i)});class Zr extends ke{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ae.date){const a=this._getOrReturnCtx(e);return ne(a,{code:Q.invalid_type,expected:ae.date,received:a.parsedType}),ve}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return ne(a,{code:Q.invalid_date}),ve}const n=new ht;let o;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(o=this._getOrReturnCtx(e,o),ne(o,{code:Q.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(o=this._getOrReturnCtx(e,o),ne(o,{code:Q.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):Pe.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Zr({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Zr.create=i=>new Zr({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:ye.ZodDate,...Ce(i)});class vh extends ke{_parse(e){if(this._getType(e)!==ae.symbol){const n=this._getOrReturnCtx(e);return ne(n,{code:Q.invalid_type,expected:ae.symbol,received:n.parsedType}),ve}return Lt(e.data)}}vh.create=i=>new vh({typeName:ye.ZodSymbol,...Ce(i)});class _h extends ke{_parse(e){if(this._getType(e)!==ae.undefined){const n=this._getOrReturnCtx(e);return ne(n,{code:Q.invalid_type,expected:ae.undefined,received:n.parsedType}),ve}return Lt(e.data)}}_h.create=i=>new _h({typeName:ye.ZodUndefined,...Ce(i)});class wh extends ke{_parse(e){if(this._getType(e)!==ae.null){const n=this._getOrReturnCtx(e);return ne(n,{code:Q.invalid_type,expected:ae.null,received:n.parsedType}),ve}return Lt(e.data)}}wh.create=i=>new wh({typeName:ye.ZodNull,...Ce(i)});class Ch extends ke{constructor(){super(...arguments),this._any=!0}_parse(e){return Lt(e.data)}}Ch.create=i=>new Ch({typeName:ye.ZodAny,...Ce(i)});class uu extends ke{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Lt(e.data)}}uu.create=i=>new uu({typeName:ye.ZodUnknown,...Ce(i)});class Fn extends ke{_parse(e){const t=this._getOrReturnCtx(e);return ne(t,{code:Q.invalid_type,expected:ae.never,received:t.parsedType}),ve}}Fn.create=i=>new Fn({typeName:ye.ZodNever,...Ce(i)});class xh extends ke{_parse(e){if(this._getType(e)!==ae.undefined){const n=this._getOrReturnCtx(e);return ne(n,{code:Q.invalid_type,expected:ae.void,received:n.parsedType}),ve}return Lt(e.data)}}xh.create=i=>new xh({typeName:ye.ZodVoid,...Ce(i)});class Qt extends ke{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),o=this._def;if(t.parsedType!==ae.array)return ne(t,{code:Q.invalid_type,expected:ae.array,received:t.parsedType}),ve;if(o.exactLength!==null){const d=t.data.length>o.exactLength.value,f=t.data.length<o.exactLength.value;(d||f)&&(ne(t,{code:d?Q.too_big:Q.too_small,minimum:f?o.exactLength.value:void 0,maximum:d?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&t.data.length<o.minLength.value&&(ne(t,{code:Q.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&t.data.length>o.maxLength.value&&(ne(t,{code:Q.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((d,f)=>o.type._parseAsync(new Xt(t,d,t.path,f)))).then(d=>ht.mergeArray(n,d));const a=[...t.data].map((d,f)=>o.type._parseSync(new Xt(t,d,t.path,f)));return ht.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new Qt({...this._def,minLength:{value:e,message:ce.toString(t)}})}max(e,t){return new Qt({...this._def,maxLength:{value:e,message:ce.toString(t)}})}length(e,t){return new Qt({...this._def,exactLength:{value:e,message:ce.toString(t)}})}nonempty(e){return this.min(1,e)}}Qt.create=(i,e)=>new Qt({type:i,minLength:null,maxLength:null,exactLength:null,typeName:ye.ZodArray,...Ce(e)});function Gr(i){if(i instanceof Ye){const e={};for(const t in i.shape){const n=i.shape[t];e[t]=Ln.create(Gr(n))}return new Ye({...i._def,shape:()=>e})}else return i instanceof Qt?new Qt({...i._def,type:Gr(i.element)}):i instanceof Ln?Ln.create(Gr(i.unwrap())):i instanceof ei?ei.create(Gr(i.unwrap())):i instanceof or?or.create(i.items.map(e=>Gr(e))):i}class Ye extends ke{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Pe.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==ae.object){const p=this._getOrReturnCtx(e);return ne(p,{code:Q.invalid_type,expected:ae.object,received:p.parsedType}),ve}const{status:n,ctx:o}=this._processInputParams(e),{shape:a,keys:d}=this._getCached(),f=[];if(!(this._def.catchall instanceof Fn&&this._def.unknownKeys==="strip"))for(const p in o.data)d.includes(p)||f.push(p);const m=[];for(const p of d){const y=a[p],_=o.data[p];m.push({key:{status:"valid",value:p},value:y._parse(new Xt(o,_,o.path,p)),alwaysSet:p in o.data})}if(this._def.catchall instanceof Fn){const p=this._def.unknownKeys;if(p==="passthrough")for(const y of f)m.push({key:{status:"valid",value:y},value:{status:"valid",value:o.data[y]}});else if(p==="strict")f.length>0&&(ne(o,{code:Q.unrecognized_keys,keys:f}),n.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const y of f){const _=o.data[y];m.push({key:{status:"valid",value:y},value:p._parse(new Xt(o,_,o.path,y)),alwaysSet:y in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const p=[];for(const y of m){const _=await y.key,x=await y.value;p.push({key:_,value:x,alwaysSet:y.alwaysSet})}return p}).then(p=>ht.mergeObjectSync(n,p)):ht.mergeObjectSync(n,m)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new Ye({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var a,d;const o=((d=(a=this._def).errorMap)==null?void 0:d.call(a,t,n).message)??n.defaultError;return t.code==="unrecognized_keys"?{message:ce.errToObj(e).message??o}:{message:o}}}:{}})}strip(){return new Ye({...this._def,unknownKeys:"strip"})}passthrough(){return new Ye({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ye({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ye({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ye.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Ye({...this._def,catchall:e})}pick(e){const t={};for(const n of Pe.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new Ye({...this._def,shape:()=>t})}omit(e){const t={};for(const n of Pe.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new Ye({...this._def,shape:()=>t})}deepPartial(){return Gr(this)}partial(e){const t={};for(const n of Pe.objectKeys(this.shape)){const o=this.shape[n];e&&!e[n]?t[n]=o:t[n]=o.optional()}return new Ye({...this._def,shape:()=>t})}required(e){const t={};for(const n of Pe.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Ln;)a=a._def.innerType;t[n]=a}return new Ye({...this._def,shape:()=>t})}keyof(){return mm(Pe.objectKeys(this.shape))}}Ye.create=(i,e)=>new Ye({shape:()=>i,unknownKeys:"strip",catchall:Fn.create(),typeName:ye.ZodObject,...Ce(e)});Ye.strictCreate=(i,e)=>new Ye({shape:()=>i,unknownKeys:"strict",catchall:Fn.create(),typeName:ye.ZodObject,...Ce(e)});Ye.lazycreate=(i,e)=>new Ye({shape:i,unknownKeys:"strip",catchall:Fn.create(),typeName:ye.ZodObject,...Ce(e)});class Ds extends ke{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function o(a){for(const f of a)if(f.result.status==="valid")return f.result;for(const f of a)if(f.result.status==="dirty")return t.common.issues.push(...f.ctx.common.issues),f.result;const d=a.map(f=>new cn(f.ctx.common.issues));return ne(t,{code:Q.invalid_union,unionErrors:d}),ve}if(t.common.async)return Promise.all(n.map(async a=>{const d={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:d}),ctx:d}})).then(o);{let a;const d=[];for(const m of n){const p={...t,common:{...t.common,issues:[]},parent:null},y=m._parseSync({data:t.data,path:t.path,parent:p});if(y.status==="valid")return y;y.status==="dirty"&&!a&&(a={result:y,ctx:p}),p.common.issues.length&&d.push(p.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const f=d.map(m=>new cn(m));return ne(t,{code:Q.invalid_union,unionErrors:f}),ve}}get options(){return this._def.options}}Ds.create=(i,e)=>new Ds({options:i,typeName:ye.ZodUnion,...Ce(e)});function cu(i,e){const t=Rn(i),n=Rn(e);if(i===e)return{valid:!0,data:i};if(t===ae.object&&n===ae.object){const o=Pe.objectKeys(e),a=Pe.objectKeys(i).filter(f=>o.indexOf(f)!==-1),d={...i,...e};for(const f of a){const m=cu(i[f],e[f]);if(!m.valid)return{valid:!1};d[f]=m.data}return{valid:!0,data:d}}else if(t===ae.array&&n===ae.array){if(i.length!==e.length)return{valid:!1};const o=[];for(let a=0;a<i.length;a++){const d=i[a],f=e[a],m=cu(d,f);if(!m.valid)return{valid:!1};o.push(m.data)}return{valid:!0,data:o}}else return t===ae.date&&n===ae.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class Ls extends ke{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=(a,d)=>{if(mh(a)||mh(d))return ve;const f=cu(a.value,d.value);return f.valid?((gh(a)||gh(d))&&t.dirty(),{status:t.value,value:f.data}):(ne(n,{code:Q.invalid_intersection_types}),ve)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,d])=>o(a,d)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Ls.create=(i,e,t)=>new Ls({left:i,right:e,typeName:ye.ZodIntersection,...Ce(t)});class or extends ke{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ae.array)return ne(n,{code:Q.invalid_type,expected:ae.array,received:n.parsedType}),ve;if(n.data.length<this._def.items.length)return ne(n,{code:Q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ve;!this._def.rest&&n.data.length>this._def.items.length&&(ne(n,{code:Q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((d,f)=>{const m=this._def.items[f]||this._def.rest;return m?m._parse(new Xt(n,d,n.path,f)):null}).filter(d=>!!d);return n.common.async?Promise.all(a).then(d=>ht.mergeArray(t,d)):ht.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new or({...this._def,rest:e})}}or.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new or({items:i,typeName:ye.ZodTuple,rest:null,...Ce(e)})};class Fs extends ke{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ae.object)return ne(n,{code:Q.invalid_type,expected:ae.object,received:n.parsedType}),ve;const o=[],a=this._def.keyType,d=this._def.valueType;for(const f in n.data)o.push({key:a._parse(new Xt(n,f,n.path,f)),value:d._parse(new Xt(n,n.data[f],n.path,f)),alwaysSet:f in n.data});return n.common.async?ht.mergeObjectAsync(t,o):ht.mergeObjectSync(t,o)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof ke?new Fs({keyType:e,valueType:t,typeName:ye.ZodRecord,...Ce(n)}):new Fs({keyType:Zt.create(),valueType:e,typeName:ye.ZodRecord,...Ce(t)})}}class Sh extends ke{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ae.map)return ne(n,{code:Q.invalid_type,expected:ae.map,received:n.parsedType}),ve;const o=this._def.keyType,a=this._def.valueType,d=[...n.data.entries()].map(([f,m],p)=>({key:o._parse(new Xt(n,f,n.path,[p,"key"])),value:a._parse(new Xt(n,m,n.path,[p,"value"]))}));if(n.common.async){const f=new Map;return Promise.resolve().then(async()=>{for(const m of d){const p=await m.key,y=await m.value;if(p.status==="aborted"||y.status==="aborted")return ve;(p.status==="dirty"||y.status==="dirty")&&t.dirty(),f.set(p.value,y.value)}return{status:t.value,value:f}})}else{const f=new Map;for(const m of d){const p=m.key,y=m.value;if(p.status==="aborted"||y.status==="aborted")return ve;(p.status==="dirty"||y.status==="dirty")&&t.dirty(),f.set(p.value,y.value)}return{status:t.value,value:f}}}}Sh.create=(i,e,t)=>new Sh({valueType:e,keyType:i,typeName:ye.ZodMap,...Ce(t)});class oo extends ke{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ae.set)return ne(n,{code:Q.invalid_type,expected:ae.set,received:n.parsedType}),ve;const o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(ne(n,{code:Q.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),t.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(ne(n,{code:Q.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),t.dirty());const a=this._def.valueType;function d(m){const p=new Set;for(const y of m){if(y.status==="aborted")return ve;y.status==="dirty"&&t.dirty(),p.add(y.value)}return{status:t.value,value:p}}const f=[...n.data.values()].map((m,p)=>a._parse(new Xt(n,m,n.path,p)));return n.common.async?Promise.all(f).then(m=>d(m)):d(f)}min(e,t){return new oo({...this._def,minSize:{value:e,message:ce.toString(t)}})}max(e,t){return new oo({...this._def,maxSize:{value:e,message:ce.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}oo.create=(i,e)=>new oo({valueType:i,minSize:null,maxSize:null,typeName:ye.ZodSet,...Ce(e)});class du extends ke{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}du.create=(i,e)=>new du({getter:i,typeName:ye.ZodLazy,...Ce(e)});class Th extends ke{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ne(t,{received:t.data,code:Q.invalid_literal,expected:this._def.value}),ve}return{status:"valid",value:e.data}}get value(){return this._def.value}}Th.create=(i,e)=>new Th({value:i,typeName:ye.ZodLiteral,...Ce(e)});function mm(i,e){return new Qr({values:i,typeName:ye.ZodEnum,...Ce(e)})}class Qr extends ke{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return ne(t,{expected:Pe.joinValues(n),received:t.parsedType,code:Q.invalid_type}),ve}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return ne(t,{received:t.data,code:Q.invalid_enum_value,options:n}),ve}return Lt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Qr.create(e,{...this._def,...t})}exclude(e,t=this._def){return Qr.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Qr.create=mm;class Eh extends ke{_parse(e){const t=Pe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ae.string&&n.parsedType!==ae.number){const o=Pe.objectValues(t);return ne(n,{expected:Pe.joinValues(o),received:n.parsedType,code:Q.invalid_type}),ve}if(this._cache||(this._cache=new Set(Pe.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const o=Pe.objectValues(t);return ne(n,{received:n.data,code:Q.invalid_enum_value,options:o}),ve}return Lt(e.data)}get enum(){return this._def.values}}Eh.create=(i,e)=>new Eh({values:i,typeName:ye.ZodNativeEnum,...Ce(e)});class Us extends ke{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ae.promise&&t.common.async===!1)return ne(t,{code:Q.invalid_type,expected:ae.promise,received:t.parsedType}),ve;const n=t.parsedType===ae.promise?t.data:Promise.resolve(t.data);return Lt(n.then(o=>this._def.type.parseAsync(o,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Us.create=(i,e)=>new Us({type:i,typeName:ye.ZodPromise,...Ce(e)});class Xr extends ke{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ye.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=this._def.effect||null,a={addIssue:d=>{ne(n,d),d.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),o.type==="preprocess"){const d=o.transform(n.data,a);if(n.common.async)return Promise.resolve(d).then(async f=>{if(t.value==="aborted")return ve;const m=await this._def.schema._parseAsync({data:f,path:n.path,parent:n});return m.status==="aborted"?ve:m.status==="dirty"||t.value==="dirty"?Yi(m.value):m});{if(t.value==="aborted")return ve;const f=this._def.schema._parseSync({data:d,path:n.path,parent:n});return f.status==="aborted"?ve:f.status==="dirty"||t.value==="dirty"?Yi(f.value):f}}if(o.type==="refinement"){const d=f=>{const m=o.refinement(f,a);if(n.common.async)return Promise.resolve(m);if(m instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return f};if(n.common.async===!1){const f=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return f.status==="aborted"?ve:(f.status==="dirty"&&t.dirty(),d(f.value),{status:t.value,value:f.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(f=>f.status==="aborted"?ve:(f.status==="dirty"&&t.dirty(),d(f.value).then(()=>({status:t.value,value:f.value}))))}if(o.type==="transform")if(n.common.async===!1){const d=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Yr(d))return ve;const f=o.transform(d.value,a);if(f instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:f}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(d=>Yr(d)?Promise.resolve(o.transform(d.value,a)).then(f=>({status:t.value,value:f})):ve);Pe.assertNever(o)}}Xr.create=(i,e,t)=>new Xr({schema:i,typeName:ye.ZodEffects,effect:e,...Ce(t)});Xr.createWithPreprocess=(i,e,t)=>new Xr({schema:e,effect:{type:"preprocess",transform:i},typeName:ye.ZodEffects,...Ce(t)});class Ln extends ke{_parse(e){return this._getType(e)===ae.undefined?Lt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ln.create=(i,e)=>new Ln({innerType:i,typeName:ye.ZodOptional,...Ce(e)});class ei extends ke{_parse(e){return this._getType(e)===ae.null?Lt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ei.create=(i,e)=>new ei({innerType:i,typeName:ye.ZodNullable,...Ce(e)});class fu extends ke{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===ae.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}fu.create=(i,e)=>new fu({innerType:i,typeName:ye.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ce(e)});class hu extends ke{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ms(o)?o.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new cn(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new cn(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}hu.create=(i,e)=>new hu({innerType:i,typeName:ye.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ce(e)});class kh extends ke{_parse(e){if(this._getType(e)!==ae.nan){const n=this._getOrReturnCtx(e);return ne(n,{code:Q.invalid_type,expected:ae.nan,received:n.parsedType}),ve}return{status:"valid",value:e.data}}}kh.create=i=>new kh({typeName:ye.ZodNaN,...Ce(i)});class K0 extends ke{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class bu extends ke{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?ve:a.status==="dirty"?(t.dirty(),Yi(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ve:o.status==="dirty"?(t.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,t){return new bu({in:e,out:t,typeName:ye.ZodPipeline})}}class pu extends ke{_parse(e){const t=this._def.innerType._parse(e),n=o=>(Yr(o)&&(o.value=Object.freeze(o.value)),o);return Ms(t)?t.then(o=>n(o)):n(t)}unwrap(){return this._def.innerType}}pu.create=(i,e)=>new pu({innerType:i,typeName:ye.ZodReadonly,...Ce(e)});var ye;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(ye||(ye={}));const er=Zt.create,Ah=rr.create;ir.create;const Y0=Rs.create;Zr.create;const Ih=uu.create;Fn.create;const Zi=Qt.create,Z0=Ye.create,Q0=Ds.create;Ls.create;or.create;const X0=Fs.create,ew=du.create,tw=Qr.create;Us.create;Ln.create;ei.create;const Br={string:i=>Zt.create({...i,coerce:!0}),number:i=>rr.create({...i,coerce:!0}),boolean:i=>Rs.create({...i,coerce:!0}),bigint:i=>ir.create({...i,coerce:!0}),date:i=>Zr.create({...i,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nw,rw;function iw(){return{geminiUrl:nw,vertexUrl:rw}}function ow(i,e,t){var n,o,a;if(!(!((n=i.httpOptions)===null||n===void 0)&&n.baseUrl)){const d=iw();return i.vertexai?(o=d.vertexUrl)!==null&&o!==void 0?o:e:(a=d.geminiUrl)!==null&&a!==void 0?a:t}return i.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ri{}function me(i,e){const t=/\{([^}]+)\}/g;return i.replace(t,(n,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function c(i,e,t){for(let a=0;a<e.length-1;a++){const d=e[a];if(d.endsWith("[]")){const f=d.slice(0,-2);if(!(f in i))if(Array.isArray(t))i[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(i[f])){const m=i[f];if(Array.isArray(t))for(let p=0;p<m.length;p++){const y=m[p];c(y,e.slice(a+1),t[p])}else for(const p of m)c(p,e.slice(a+1),t)}return}else if(d.endsWith("[0]")){const f=d.slice(0,-3);f in i||(i[f]=[{}]);const m=i[f];c(m[0],e.slice(a+1),t);return}(!i[d]||typeof i[d]!="object")&&(i[d]={}),i=i[d]}const n=e[e.length-1],o=i[n];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else i[n]=t}function u(i,e){try{if(e.length===1&&e[0]==="_self")return i;for(let t=0;t<e.length;t++){if(typeof i!="object"||i===null)return;const n=e[t];if(n.endsWith("[]")){const o=n.slice(0,-2);if(o in i){const a=i[o];return Array.isArray(a)?a.map(d=>u(d,e.slice(t+1))):void 0}else return}else i=i[n]}return i}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Nh;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Nh||(Nh={}));var Ph;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(Ph||(Ph={}));var Rt;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Rt||(Rt={}));var bh;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(bh||(bh={}));var Mh;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(Mh||(Mh={}));var Rh;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(Rh||(Rh={}));var Dh;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Dh||(Dh={}));var Lh;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Lh||(Lh={}));var Fh;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Fh||(Fh={}));var Uh;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(Uh||(Uh={}));var Oh;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Oh||(Oh={}));var $h;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})($h||($h={}));var Vh;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Vh||(Vh={}));var Os;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(Os||(Os={}));var Bh;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Bh||(Bh={}));var mu;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(mu||(mu={}));var zh;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(zh||(zh={}));var Gh;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(Gh||(Gh={}));var qh;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(qh||(qh={}));var Hh;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Hh||(Hh={}));var Wh;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(Wh||(Wh={}));var jh;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(jh||(jh={}));var Jh;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(Jh||(Jh={}));var Kh;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(Kh||(Kh={}));var Yh;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi"})(Yh||(Yh={}));var Zh;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Zh||(Zh={}));var Qh;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Qh||(Qh={}));var Xh;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Xh||(Xh={}));var ep;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ep||(ep={}));var tp;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(tp||(tp={}));var np;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(np||(np={}));var rp;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(rp||(rp={}));var ip;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ip||(ip={}));var op;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(op||(op={}));var sp;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(sp||(sp={}));var ap;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ap||(ap={}));var lp;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(lp||(lp={}));var up;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(up||(up={}));var qr;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(qr||(qr={}));class ji{get text(){var e,t,n,o,a,d,f,m;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",y=!1;const _=[];for(const x of(m=(f=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[S,k]of Object.entries(x))S!=="text"&&S!=="thought"&&(k!==null||k!==void 0)&&_.push(S);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;y=!0,p+=x.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?p:void 0}get data(){var e,t,n,o,a,d,f,m;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const y=[];for(const _ of(m=(f=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[x,S]of Object.entries(_))x!=="inlineData"&&(S!==null||S!==void 0)&&y.push(x);_.inlineData&&typeof _.inlineData.data=="string"&&(p+=atob(_.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,n,o,a,d,f,m;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(f=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,n,o,a,d,f,m,p;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(m=(f=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((y==null?void 0:y.length)!==0)return(p=y==null?void 0:y[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,n,o,a,d,f,m,p;if(((o=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(m=(f=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((y==null?void 0:y.length)!==0)return(p=y==null?void 0:y[0])===null||p===void 0?void 0:p.output}}class cp{}class dp{}class sw{}class aw{}class fp{}class hp{}class pp{}class lw{}class mp{}class gp{}class yp{}class uw{}class gu{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class cw{}class dw{}class fw{get text(){var e,t,n;let o="",a=!1;const d=[];for(const f of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[m,p]of Object.entries(f))m!=="text"&&m!=="thought"&&p!==null&&d.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;a=!0,o+=f.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,n;let o="";const a=[];for(const d of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[f,m]of Object.entries(d))f!=="inlineData"&&m!==null&&a.push(f);d.inlineData&&typeof d.inlineData.data=="string"&&(o+=atob(d.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class hw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oe(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function gm(i,e){const t=Oe(i,e);return t?t.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:t.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${t}`:t:""}function ym(i,e){return Array.isArray(e)?e.map(t=>$s(i,t)):[$s(i,e)]}function $s(i,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function pw(i,e){const t=$s(i,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function mw(i,e){const t=$s(i,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function vp(i,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function vm(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>vp(i,t)):[vp(i,e)]}function yu(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function _p(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function wp(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function ft(i,e){if(e==null)throw new Error("ContentUnion is required");return yu(e)?e:{role:"user",parts:vm(i,e)}}function _m(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const n=ft(i,t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const t=ft(i,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>ft(i,t)):[ft(i,e)]}function qt(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(_p(e)||wp(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ft(i,e)]}const t=[],n=[],o=yu(e[0]);for(const a of e){const d=yu(a);if(d!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(d)t.push(a);else{if(_p(a)||wp(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return o||t.push({role:"user",parts:vm(i,n)}),t}const gw=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),Cp=tw(["string","number","integer","object","array","boolean","null"]),yw=Q0([Cp,Zi(Cp)]);function vw(i=!0){const e=ew(()=>{const t=Z0({type:yw.optional(),format:er().optional(),title:er().optional(),description:er().optional(),default:Ih().optional(),items:e.optional(),minItems:Br.string().optional(),maxItems:Br.string().optional(),enum:Zi(Ih()).optional(),properties:X0(er(),e).optional(),required:Zi(er()).optional(),minProperties:Br.string().optional(),maxProperties:Br.string().optional(),propertyOrdering:Zi(er()).optional(),minimum:Ah().optional(),maximum:Ah().optional(),minLength:Br.string().optional(),maxLength:Br.string().optional(),pattern:er().optional(),anyOf:Zi(e).optional(),additionalProperties:Y0().optional()});return i?t.strict():t});return e}function _w(i,e){i.includes("null")&&(e.nullable=!0);const t=i.filter(n=>n!=="null");if(t.length===1)e.type=Object.keys(Rt).includes(t[0].toUpperCase())?Rt[t[0].toUpperCase()]:Rt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of t)e.anyOf.push({type:Object.keys(Rt).includes(n.toUpperCase())?Rt[n.toUpperCase()]:Rt.TYPE_UNSPECIFIED})}}function Wr(i){const e={},t=["items"],n=["anyOf"],o=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=i.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,i=a[1]):a[1].type==="null"&&(e.nullable=!0,i=a[0])),i.type instanceof Array&&_w(i.type,e);for(const[d,f]of Object.entries(i))if(f!=null)if(d=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.keys(Rt).includes(f.toUpperCase())?f.toUpperCase():Rt.TYPE_UNSPECIFIED}else if(t.includes(d))e[d]=Wr(f);else if(n.includes(d)){const m=[];for(const p of f){if(p.type=="null"){e.nullable=!0;continue}m.push(Wr(p))}e[d]=m}else if(o.includes(d)){const m={};for(const[p,y]of Object.entries(f))m[p]=Wr(y);e[d]=m}else{if(d==="additionalProperties")continue;e[d]=f}return e}function Vs(i,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const t=vw().parse(e);return Wr(t)}else return Wr(e)}function wm(i,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Mu(i,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function ao(i,e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(t.parameters=Vs(i,t.parameters)),t.response&&(t.response=Vs(i,t.response));return e}function lo(i,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function ww(i,e,t,n=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===n;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:o?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function On(i,e){if(typeof e!="string")throw new Error("name must be a string");return ww(i,e,"cachedContents")}function Cm(i,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function $n(i,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function Cw(i){return i!=null&&typeof i=="object"&&"name"in i}function xw(i){return i!=null&&typeof i=="object"&&"video"in i}function Sw(i){return i!=null&&typeof i=="object"&&"uri"in i}function xm(i,e){var t;let n;if(Cw(e)&&(n=e.name),!(Sw(e)&&(n=e.uri,n===void 0))&&!(xw(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Sm(i,e){let t;return i.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Tm(i,e){for(const t of["models","tunedModels","publisherModels"])if(Tw(e,t))return e[t];return[]}function Tw(i,e){return i!==null&&typeof i=="object"&&e in i}function Ew(i,e={}){const t=i,n={name:t.name,description:t.description,parameters:Wr(zs(t.inputSchema))};return e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function kw(i,e={}){const t=[],n=new Set;for(const o of i){const a=o.name;if(n.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);n.add(a);const d=Ew(o,e);d.functionDeclarations&&t.push(...d.functionDeclarations)}return{functionDeclarations:t}}function Aw(i){const e=[];for(const t of i)e.push(zs(t));return e}function Iw(i){const e={};for(const[t,n]of Object.entries(i)){const o=n;e[t]=zs(o)}return e}function zs(i){const e=new Set(["items"]),t=new Set(["anyOf"]),n=new Set(["properties"]),o={};for(const[a,d]of Object.entries(i))if(e.has(a))o[a]=zs(d);else if(t.has(a))o[a]=Aw(d);else if(n.has(a))o[a]=Iw(d);else if(a==="type"){const f=d.toUpperCase();o[a]=Object.keys(Rt).includes(f)?f:Rt.TYPE_UNSPECIFIED}else gw.has(a)&&(o[a]=d);return o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nw(i,e){const t={},n=u(e,["fps"]);n!=null&&c(t,["fps"],n);const o=u(e,["endOffset"]);o!=null&&c(t,["endOffset"],o);const a=u(e,["startOffset"]);return a!=null&&c(t,["startOffset"],a),t}function Pw(i,e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["data"]);n!=null&&c(t,["data"],n);const o=u(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function bw(i,e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const o=u(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function Mw(i,e){const t={},n=u(e,["videoMetadata"]);n!=null&&c(t,["videoMetadata"],Nw(i,n));const o=u(e,["thought"]);o!=null&&c(t,["thought"],o);const a=u(e,["inlineData"]);a!=null&&c(t,["inlineData"],Pw(i,a));const d=u(e,["fileData"]);d!=null&&c(t,["fileData"],bw(i,d));const f=u(e,["thoughtSignature"]);f!=null&&c(t,["thoughtSignature"],f);const m=u(e,["codeExecutionResult"]);m!=null&&c(t,["codeExecutionResult"],m);const p=u(e,["executableCode"]);p!=null&&c(t,["executableCode"],p);const y=u(e,["functionCall"]);y!=null&&c(t,["functionCall"],y);const _=u(e,["functionResponse"]);_!=null&&c(t,["functionResponse"],_);const x=u(e,["text"]);return x!=null&&c(t,["text"],x),t}function xp(i,e){const t={},n=u(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>Mw(i,d))),c(t,["parts"],a)}const o=u(e,["role"]);return o!=null&&c(t,["role"],o),t}function Rw(i,e){const t={},n=u(e,["behavior"]);n!=null&&c(t,["behavior"],n);const o=u(e,["description"]);o!=null&&c(t,["description"],o);const a=u(e,["name"]);a!=null&&c(t,["name"],a);const d=u(e,["parameters"]);d!=null&&c(t,["parameters"],d);const f=u(e,["response"]);return f!=null&&c(t,["response"],f),t}function Dw(i,e){const t={},n=u(e,["startTime"]);n!=null&&c(t,["startTime"],n);const o=u(e,["endTime"]);return o!=null&&c(t,["endTime"],o),t}function Lw(i,e){const t={},n=u(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],Dw(i,n)),t}function Fw(i,e){const t={},n=u(e,["mode"]);n!=null&&c(t,["mode"],n);const o=u(e,["dynamicThreshold"]);return o!=null&&c(t,["dynamicThreshold"],o),t}function Uw(i,e){const t={},n=u(e,["dynamicRetrievalConfig"]);return n!=null&&c(t,["dynamicRetrievalConfig"],Fw(i,n)),t}function Ow(){return{}}function $w(i,e){const t={},n=u(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>Rw(i,p))),c(t,["functionDeclarations"],m)}if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(e,["googleSearch"]);o!=null&&c(t,["googleSearch"],Lw(i,o));const a=u(e,["googleSearchRetrieval"]);if(a!=null&&c(t,["googleSearchRetrieval"],Uw(i,a)),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(e,["urlContext"])!=null&&c(t,["urlContext"],Ow());const f=u(e,["codeExecution"]);return f!=null&&c(t,["codeExecution"],f),t}function Vw(i,e){const t={},n=u(e,["mode"]);n!=null&&c(t,["mode"],n);const o=u(e,["allowedFunctionNames"]);return o!=null&&c(t,["allowedFunctionNames"],o),t}function Bw(i,e){const t={},n=u(e,["latitude"]);n!=null&&c(t,["latitude"],n);const o=u(e,["longitude"]);return o!=null&&c(t,["longitude"],o),t}function zw(i,e){const t={},n=u(e,["latLng"]);n!=null&&c(t,["latLng"],Bw(i,n));const o=u(e,["languageCode"]);return o!=null&&c(t,["languageCode"],o),t}function Gw(i,e){const t={},n=u(e,["functionCallingConfig"]);n!=null&&c(t,["functionCallingConfig"],Vw(i,n));const o=u(e,["retrievalConfig"]);return o!=null&&c(t,["retrievalConfig"],zw(i,o)),t}function qw(i,e,t){const n={},o=u(e,["ttl"]);t!==void 0&&o!=null&&c(t,["ttl"],o);const a=u(e,["expireTime"]);t!==void 0&&a!=null&&c(t,["expireTime"],a);const d=u(e,["displayName"]);t!==void 0&&d!=null&&c(t,["displayName"],d);const f=u(e,["contents"]);if(t!==void 0&&f!=null){let _=qt(i,f);Array.isArray(_)&&(_=_.map(x=>xp(i,x))),c(t,["contents"],_)}const m=u(e,["systemInstruction"]);t!==void 0&&m!=null&&c(t,["systemInstruction"],xp(i,ft(i,m)));const p=u(e,["tools"]);if(t!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(x=>$w(i,x))),c(t,["tools"],_)}const y=u(e,["toolConfig"]);if(t!==void 0&&y!=null&&c(t,["toolConfig"],Gw(i,y)),u(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Hw(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["model"],gm(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],qw(i,o,t)),t}function Ww(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["_url","name"],On(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function jw(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["_url","name"],On(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function Jw(i,e,t){const n={},o=u(e,["ttl"]);t!==void 0&&o!=null&&c(t,["ttl"],o);const a=u(e,["expireTime"]);return t!==void 0&&a!=null&&c(t,["expireTime"],a),n}function Kw(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["_url","name"],On(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],Jw(i,o,t)),t}function Yw(i,e,t){const n={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const a=u(e,["pageToken"]);return t!==void 0&&a!=null&&c(t,["_query","pageToken"],a),n}function Zw(i,e){const t={},n=u(e,["config"]);return n!=null&&c(t,["config"],Yw(i,n,t)),t}function Qw(i,e){const t={},n=u(e,["fps"]);n!=null&&c(t,["fps"],n);const o=u(e,["endOffset"]);o!=null&&c(t,["endOffset"],o);const a=u(e,["startOffset"]);return a!=null&&c(t,["startOffset"],a),t}function Xw(i,e){const t={},n=u(e,["displayName"]);n!=null&&c(t,["displayName"],n);const o=u(e,["data"]);o!=null&&c(t,["data"],o);const a=u(e,["mimeType"]);return a!=null&&c(t,["mimeType"],a),t}function eC(i,e){const t={},n=u(e,["displayName"]);n!=null&&c(t,["displayName"],n);const o=u(e,["fileUri"]);o!=null&&c(t,["fileUri"],o);const a=u(e,["mimeType"]);return a!=null&&c(t,["mimeType"],a),t}function tC(i,e){const t={},n=u(e,["videoMetadata"]);n!=null&&c(t,["videoMetadata"],Qw(i,n));const o=u(e,["thought"]);o!=null&&c(t,["thought"],o);const a=u(e,["inlineData"]);a!=null&&c(t,["inlineData"],Xw(i,a));const d=u(e,["fileData"]);d!=null&&c(t,["fileData"],eC(i,d));const f=u(e,["thoughtSignature"]);f!=null&&c(t,["thoughtSignature"],f);const m=u(e,["codeExecutionResult"]);m!=null&&c(t,["codeExecutionResult"],m);const p=u(e,["executableCode"]);p!=null&&c(t,["executableCode"],p);const y=u(e,["functionCall"]);y!=null&&c(t,["functionCall"],y);const _=u(e,["functionResponse"]);_!=null&&c(t,["functionResponse"],_);const x=u(e,["text"]);return x!=null&&c(t,["text"],x),t}function Sp(i,e){const t={},n=u(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>tC(i,d))),c(t,["parts"],a)}const o=u(e,["role"]);return o!=null&&c(t,["role"],o),t}function nC(i,e){const t={};if(u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(e,["description"]);n!=null&&c(t,["description"],n);const o=u(e,["name"]);o!=null&&c(t,["name"],o);const a=u(e,["parameters"]);a!=null&&c(t,["parameters"],a);const d=u(e,["response"]);return d!=null&&c(t,["response"],d),t}function rC(i,e){const t={},n=u(e,["startTime"]);n!=null&&c(t,["startTime"],n);const o=u(e,["endTime"]);return o!=null&&c(t,["endTime"],o),t}function iC(i,e){const t={},n=u(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],rC(i,n)),t}function oC(i,e){const t={},n=u(e,["mode"]);n!=null&&c(t,["mode"],n);const o=u(e,["dynamicThreshold"]);return o!=null&&c(t,["dynamicThreshold"],o),t}function sC(i,e){const t={},n=u(e,["dynamicRetrievalConfig"]);return n!=null&&c(t,["dynamicRetrievalConfig"],oC(i,n)),t}function aC(){return{}}function lC(i,e){const t={},n=u(e,["apiKeyString"]);return n!=null&&c(t,["apiKeyString"],n),t}function uC(i,e){const t={},n=u(e,["apiKeyConfig"]);n!=null&&c(t,["apiKeyConfig"],lC(i,n));const o=u(e,["authType"]);o!=null&&c(t,["authType"],o);const a=u(e,["googleServiceAccountConfig"]);a!=null&&c(t,["googleServiceAccountConfig"],a);const d=u(e,["httpBasicAuthConfig"]);d!=null&&c(t,["httpBasicAuthConfig"],d);const f=u(e,["oauthConfig"]);f!=null&&c(t,["oauthConfig"],f);const m=u(e,["oidcConfig"]);return m!=null&&c(t,["oidcConfig"],m),t}function cC(i,e){const t={},n=u(e,["authConfig"]);return n!=null&&c(t,["authConfig"],uC(i,n)),t}function dC(i,e){const t={},n=u(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>nC(i,_))),c(t,["functionDeclarations"],y)}const o=u(e,["retrieval"]);o!=null&&c(t,["retrieval"],o);const a=u(e,["googleSearch"]);a!=null&&c(t,["googleSearch"],iC(i,a));const d=u(e,["googleSearchRetrieval"]);d!=null&&c(t,["googleSearchRetrieval"],sC(i,d)),u(e,["enterpriseWebSearch"])!=null&&c(t,["enterpriseWebSearch"],aC());const m=u(e,["googleMaps"]);if(m!=null&&c(t,["googleMaps"],cC(i,m)),u(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const p=u(e,["codeExecution"]);return p!=null&&c(t,["codeExecution"],p),t}function fC(i,e){const t={},n=u(e,["mode"]);n!=null&&c(t,["mode"],n);const o=u(e,["allowedFunctionNames"]);return o!=null&&c(t,["allowedFunctionNames"],o),t}function hC(i,e){const t={},n=u(e,["latitude"]);n!=null&&c(t,["latitude"],n);const o=u(e,["longitude"]);return o!=null&&c(t,["longitude"],o),t}function pC(i,e){const t={},n=u(e,["latLng"]);n!=null&&c(t,["latLng"],hC(i,n));const o=u(e,["languageCode"]);return o!=null&&c(t,["languageCode"],o),t}function mC(i,e){const t={},n=u(e,["functionCallingConfig"]);n!=null&&c(t,["functionCallingConfig"],fC(i,n));const o=u(e,["retrievalConfig"]);return o!=null&&c(t,["retrievalConfig"],pC(i,o)),t}function gC(i,e,t){const n={},o=u(e,["ttl"]);t!==void 0&&o!=null&&c(t,["ttl"],o);const a=u(e,["expireTime"]);t!==void 0&&a!=null&&c(t,["expireTime"],a);const d=u(e,["displayName"]);t!==void 0&&d!=null&&c(t,["displayName"],d);const f=u(e,["contents"]);if(t!==void 0&&f!=null){let x=qt(i,f);Array.isArray(x)&&(x=x.map(S=>Sp(i,S))),c(t,["contents"],x)}const m=u(e,["systemInstruction"]);t!==void 0&&m!=null&&c(t,["systemInstruction"],Sp(i,ft(i,m)));const p=u(e,["tools"]);if(t!==void 0&&p!=null){let x=p;Array.isArray(x)&&(x=x.map(S=>dC(i,S))),c(t,["tools"],x)}const y=u(e,["toolConfig"]);t!==void 0&&y!=null&&c(t,["toolConfig"],mC(i,y));const _=u(e,["kmsKeyName"]);return t!==void 0&&_!=null&&c(t,["encryption_spec","kmsKeyName"],_),n}function yC(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["model"],gm(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],gC(i,o,t)),t}function vC(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["_url","name"],On(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function _C(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["_url","name"],On(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function wC(i,e,t){const n={},o=u(e,["ttl"]);t!==void 0&&o!=null&&c(t,["ttl"],o);const a=u(e,["expireTime"]);return t!==void 0&&a!=null&&c(t,["expireTime"],a),n}function CC(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["_url","name"],On(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],wC(i,o,t)),t}function xC(i,e,t){const n={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const a=u(e,["pageToken"]);return t!==void 0&&a!=null&&c(t,["_query","pageToken"],a),n}function SC(i,e){const t={},n=u(e,["config"]);return n!=null&&c(t,["config"],xC(i,n,t)),t}function Is(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["name"],n);const o=u(e,["displayName"]);o!=null&&c(t,["displayName"],o);const a=u(e,["model"]);a!=null&&c(t,["model"],a);const d=u(e,["createTime"]);d!=null&&c(t,["createTime"],d);const f=u(e,["updateTime"]);f!=null&&c(t,["updateTime"],f);const m=u(e,["expireTime"]);m!=null&&c(t,["expireTime"],m);const p=u(e,["usageMetadata"]);return p!=null&&c(t,["usageMetadata"],p),t}function TC(){return{}}function EC(i,e){const t={},n=u(e,["nextPageToken"]);n!=null&&c(t,["nextPageToken"],n);const o=u(e,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>Is(i,d))),c(t,["cachedContents"],a)}return t}function Ns(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["name"],n);const o=u(e,["displayName"]);o!=null&&c(t,["displayName"],o);const a=u(e,["model"]);a!=null&&c(t,["model"],a);const d=u(e,["createTime"]);d!=null&&c(t,["createTime"],d);const f=u(e,["updateTime"]);f!=null&&c(t,["updateTime"],f);const m=u(e,["expireTime"]);m!=null&&c(t,["expireTime"],m);const p=u(e,["usageMetadata"]);return p!=null&&c(t,["usageMetadata"],p),t}function kC(){return{}}function AC(i,e){const t={},n=u(e,["nextPageToken"]);n!=null&&c(t,["nextPageToken"],n);const o=u(e,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>Ns(i,d))),c(t,["cachedContents"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ti;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ti||(ti={}));class Gs{constructor(e,t,n,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,o)}init(e,t,n){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let d={config:{}};n?typeof n=="object"?d=Object.assign({},n):d=n:d={config:{}},d.config&&(d.config.pageToken=t.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(a=(o=d.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IC extends ri{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Gs(ti.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(t),t)}async create(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=yC(this.apiClient,e);return f=me("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(y=>Ns(this.apiClient,y))}else{const p=Hw(this.apiClient,e);return f=me("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>Is(this.apiClient,y))}}async get(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=vC(this.apiClient,e);return f=me("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(y=>Ns(this.apiClient,y))}else{const p=Ww(this.apiClient,e);return f=me("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>Is(this.apiClient,y))}}async delete(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=_C(this.apiClient,e);return f=me("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(()=>{const y=kC(),_=new gp;return Object.assign(_,y),_})}else{const p=jw(this.apiClient,e);return f=me("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(()=>{const y=TC(),_=new gp;return Object.assign(_,y),_})}}async update(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=CC(this.apiClient,e);return f=me("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(y=>Ns(this.apiClient,y))}else{const p=Kw(this.apiClient,e);return f=me("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>Is(this.apiClient,y))}}async listInternal(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=SC(this.apiClient,e);return f=me("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(y=>{const _=AC(this.apiClient,y),x=new yp;return Object.assign(x,_),x})}else{const p=Zw(this.apiClient,e);return f=me("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>{const _=EC(this.apiClient,y),x=new yp;return Object.assign(x,_),x})}}}function Tp(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Be(i){return this instanceof Be?(this.v=i,this):new Be(i)}function jr(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",d),o[Symbol.asyncIterator]=function(){return this},o;function d(S){return function(k){return Promise.resolve(k).then(S,_)}}function f(S,k){n[S]&&(o[S]=function(I){return new Promise(function(P,O){a.push([S,I,P,O])>1||m(S,I)})},k&&(o[S]=k(o[S])))}function m(S,k){try{p(n[S](k))}catch(I){x(a[0][3],I)}}function p(S){S.value instanceof Be?Promise.resolve(S.value.v).then(y,_):x(a[0][2],S)}function y(S){m("next",S)}function _(S){m("throw",S)}function x(S,k){S(k),a.shift(),a.length&&m(a[0][0],a[0][1])}}function to(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Tp=="function"?Tp(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=i[a]&&function(d){return new Promise(function(f,m){d=i[a](d),o(f,m,d.done,d.value)})}}function o(a,d,f,m){Promise.resolve(m).then(function(p){a({value:p,done:f})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NC(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const t=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Em(t)}function Em(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function PC(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Ep(i){if(i===void 0||i.length===0)return[];const e=[],t=i.length;let n=0;for(;n<t;)if(i[n].role==="user")e.push(i[n]),n++;else{const o=[];let a=!0;for(;n<t&&i[n].role==="model";)o.push(i[n]),a&&!Em(i[n])&&(a=!1),n++;a?e.push(...o):e.pop()}return e}class bC{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new MC(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class MC{constructor(e,t,n,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),PC(a)}async sendMessage(e){var t;await this.sendPromise;const n=ft(this.apiClient,e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,d,f;const m=await o,p=(d=(a=m.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content,y=m.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let x=[];y!=null&&(x=(f=y.slice(_))!==null&&f!==void 0?f:[]);const S=p?[p]:[];this.recordHistory(n,S,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const n=ft(this.apiClient,e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,n)}getHistory(e=!1){const t=e?Ep(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var n,o;return jr(this,arguments,function*(){var d,f,m,p;const y=[];try{for(var _=!0,x=to(e),S;S=yield Be(x.next()),d=S.done,!d;_=!0){p=S.value,_=!1;const k=p;if(NC(k)){const I=(o=(n=k.candidates)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.content;I!==void 0&&y.push(I)}yield yield Be(k)}}catch(k){f={error:k}}finally{try{!_&&!d&&(m=x.return)&&(yield Be(m.call(x)))}finally{if(f)throw f.error}}this.recordHistory(t,y)})}recordHistory(e,t,n){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...Ep(n)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RC(i,e,t){const n={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const a=u(e,["pageToken"]);return t!==void 0&&a!=null&&c(t,["_query","pageToken"],a),n}function DC(i,e){const t={},n=u(e,["config"]);return n!=null&&c(t,["config"],RC(i,n,t)),t}function LC(i,e){const t={},n=u(e,["details"]);n!=null&&c(t,["details"],n);const o=u(e,["message"]);o!=null&&c(t,["message"],o);const a=u(e,["code"]);return a!=null&&c(t,["code"],a),t}function FC(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["name"],n);const o=u(e,["displayName"]);o!=null&&c(t,["displayName"],o);const a=u(e,["mimeType"]);a!=null&&c(t,["mimeType"],a);const d=u(e,["sizeBytes"]);d!=null&&c(t,["sizeBytes"],d);const f=u(e,["createTime"]);f!=null&&c(t,["createTime"],f);const m=u(e,["expirationTime"]);m!=null&&c(t,["expirationTime"],m);const p=u(e,["updateTime"]);p!=null&&c(t,["updateTime"],p);const y=u(e,["sha256Hash"]);y!=null&&c(t,["sha256Hash"],y);const _=u(e,["uri"]);_!=null&&c(t,["uri"],_);const x=u(e,["downloadUri"]);x!=null&&c(t,["downloadUri"],x);const S=u(e,["state"]);S!=null&&c(t,["state"],S);const k=u(e,["source"]);k!=null&&c(t,["source"],k);const I=u(e,["videoMetadata"]);I!=null&&c(t,["videoMetadata"],I);const P=u(e,["error"]);return P!=null&&c(t,["error"],LC(i,P)),t}function UC(i,e){const t={},n=u(e,["file"]);n!=null&&c(t,["file"],FC(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function OC(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["_url","file"],xm(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function $C(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["_url","file"],xm(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function VC(i,e){const t={},n=u(e,["details"]);n!=null&&c(t,["details"],n);const o=u(e,["message"]);o!=null&&c(t,["message"],o);const a=u(e,["code"]);return a!=null&&c(t,["code"],a),t}function vu(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["name"],n);const o=u(e,["displayName"]);o!=null&&c(t,["displayName"],o);const a=u(e,["mimeType"]);a!=null&&c(t,["mimeType"],a);const d=u(e,["sizeBytes"]);d!=null&&c(t,["sizeBytes"],d);const f=u(e,["createTime"]);f!=null&&c(t,["createTime"],f);const m=u(e,["expirationTime"]);m!=null&&c(t,["expirationTime"],m);const p=u(e,["updateTime"]);p!=null&&c(t,["updateTime"],p);const y=u(e,["sha256Hash"]);y!=null&&c(t,["sha256Hash"],y);const _=u(e,["uri"]);_!=null&&c(t,["uri"],_);const x=u(e,["downloadUri"]);x!=null&&c(t,["downloadUri"],x);const S=u(e,["state"]);S!=null&&c(t,["state"],S);const k=u(e,["source"]);k!=null&&c(t,["source"],k);const I=u(e,["videoMetadata"]);I!=null&&c(t,["videoMetadata"],I);const P=u(e,["error"]);return P!=null&&c(t,["error"],VC(i,P)),t}function BC(i,e){const t={},n=u(e,["nextPageToken"]);n!=null&&c(t,["nextPageToken"],n);const o=u(e,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>vu(i,d))),c(t,["files"],a)}return t}function zC(){return{}}function GC(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qC extends ri{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Gs(ti.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>vu(this.apiClient,t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let o,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=DC(this.apiClient,e);return a=me("files",f._url),d=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>{const p=BC(this.apiClient,m),y=new uw;return Object.assign(y,p),y})}}async createInternal(e){var t,n;let o,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=UC(this.apiClient,e);return a=me("upload/v1beta/files",f._url),d=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(()=>{const m=zC(),p=new cw;return Object.assign(p,m),p})}}async get(e){var t,n;let o,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=OC(this.apiClient,e);return a=me("files/{file}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>vu(this.apiClient,m))}}async delete(e){var t,n;let o,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=$C(this.apiClient,e);return a=me("files/{file}",f._url),d=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(()=>{const m=GC(),p=new dw;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HC(i,e){const t={},n=u(e,["voiceName"]);return n!=null&&c(t,["voiceName"],n),t}function WC(i,e){const t={},n=u(e,["voiceName"]);return n!=null&&c(t,["voiceName"],n),t}function km(i,e){const t={},n=u(e,["prebuiltVoiceConfig"]);return n!=null&&c(t,["prebuiltVoiceConfig"],HC(i,n)),t}function jC(i,e){const t={},n=u(e,["prebuiltVoiceConfig"]);return n!=null&&c(t,["prebuiltVoiceConfig"],WC(i,n)),t}function JC(i,e){const t={},n=u(e,["speaker"]);n!=null&&c(t,["speaker"],n);const o=u(e,["voiceConfig"]);return o!=null&&c(t,["voiceConfig"],km(i,o)),t}function KC(i,e){const t={},n=u(e,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>JC(i,a))),c(t,["speakerVoiceConfigs"],o)}return t}function YC(i,e){const t={},n=u(e,["voiceConfig"]);n!=null&&c(t,["voiceConfig"],km(i,n));const o=u(e,["multiSpeakerVoiceConfig"]);o!=null&&c(t,["multiSpeakerVoiceConfig"],KC(i,o));const a=u(e,["languageCode"]);return a!=null&&c(t,["languageCode"],a),t}function ZC(i,e){const t={},n=u(e,["voiceConfig"]);if(n!=null&&c(t,["voiceConfig"],jC(i,n)),u(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=u(e,["languageCode"]);return o!=null&&c(t,["languageCode"],o),t}function QC(i,e){const t={},n=u(e,["fps"]);n!=null&&c(t,["fps"],n);const o=u(e,["endOffset"]);o!=null&&c(t,["endOffset"],o);const a=u(e,["startOffset"]);return a!=null&&c(t,["startOffset"],a),t}function XC(i,e){const t={},n=u(e,["fps"]);n!=null&&c(t,["fps"],n);const o=u(e,["endOffset"]);o!=null&&c(t,["endOffset"],o);const a=u(e,["startOffset"]);return a!=null&&c(t,["startOffset"],a),t}function ex(i,e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["data"]);n!=null&&c(t,["data"],n);const o=u(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function tx(i,e){const t={},n=u(e,["displayName"]);n!=null&&c(t,["displayName"],n);const o=u(e,["data"]);o!=null&&c(t,["data"],o);const a=u(e,["mimeType"]);return a!=null&&c(t,["mimeType"],a),t}function nx(i,e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const o=u(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function rx(i,e){const t={},n=u(e,["displayName"]);n!=null&&c(t,["displayName"],n);const o=u(e,["fileUri"]);o!=null&&c(t,["fileUri"],o);const a=u(e,["mimeType"]);return a!=null&&c(t,["mimeType"],a),t}function ix(i,e){const t={},n=u(e,["videoMetadata"]);n!=null&&c(t,["videoMetadata"],QC(i,n));const o=u(e,["thought"]);o!=null&&c(t,["thought"],o);const a=u(e,["inlineData"]);a!=null&&c(t,["inlineData"],ex(i,a));const d=u(e,["fileData"]);d!=null&&c(t,["fileData"],nx(i,d));const f=u(e,["thoughtSignature"]);f!=null&&c(t,["thoughtSignature"],f);const m=u(e,["codeExecutionResult"]);m!=null&&c(t,["codeExecutionResult"],m);const p=u(e,["executableCode"]);p!=null&&c(t,["executableCode"],p);const y=u(e,["functionCall"]);y!=null&&c(t,["functionCall"],y);const _=u(e,["functionResponse"]);_!=null&&c(t,["functionResponse"],_);const x=u(e,["text"]);return x!=null&&c(t,["text"],x),t}function ox(i,e){const t={},n=u(e,["videoMetadata"]);n!=null&&c(t,["videoMetadata"],XC(i,n));const o=u(e,["thought"]);o!=null&&c(t,["thought"],o);const a=u(e,["inlineData"]);a!=null&&c(t,["inlineData"],tx(i,a));const d=u(e,["fileData"]);d!=null&&c(t,["fileData"],rx(i,d));const f=u(e,["thoughtSignature"]);f!=null&&c(t,["thoughtSignature"],f);const m=u(e,["codeExecutionResult"]);m!=null&&c(t,["codeExecutionResult"],m);const p=u(e,["executableCode"]);p!=null&&c(t,["executableCode"],p);const y=u(e,["functionCall"]);y!=null&&c(t,["functionCall"],y);const _=u(e,["functionResponse"]);_!=null&&c(t,["functionResponse"],_);const x=u(e,["text"]);return x!=null&&c(t,["text"],x),t}function sx(i,e){const t={},n=u(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>ix(i,d))),c(t,["parts"],a)}const o=u(e,["role"]);return o!=null&&c(t,["role"],o),t}function ax(i,e){const t={},n=u(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>ox(i,d))),c(t,["parts"],a)}const o=u(e,["role"]);return o!=null&&c(t,["role"],o),t}function lx(i,e){const t={},n=u(e,["behavior"]);n!=null&&c(t,["behavior"],n);const o=u(e,["description"]);o!=null&&c(t,["description"],o);const a=u(e,["name"]);a!=null&&c(t,["name"],a);const d=u(e,["parameters"]);d!=null&&c(t,["parameters"],d);const f=u(e,["response"]);return f!=null&&c(t,["response"],f),t}function ux(i,e){const t={};if(u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(e,["description"]);n!=null&&c(t,["description"],n);const o=u(e,["name"]);o!=null&&c(t,["name"],o);const a=u(e,["parameters"]);a!=null&&c(t,["parameters"],a);const d=u(e,["response"]);return d!=null&&c(t,["response"],d),t}function cx(i,e){const t={},n=u(e,["startTime"]);n!=null&&c(t,["startTime"],n);const o=u(e,["endTime"]);return o!=null&&c(t,["endTime"],o),t}function dx(i,e){const t={},n=u(e,["startTime"]);n!=null&&c(t,["startTime"],n);const o=u(e,["endTime"]);return o!=null&&c(t,["endTime"],o),t}function fx(i,e){const t={},n=u(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],cx(i,n)),t}function hx(i,e){const t={},n=u(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],dx(i,n)),t}function px(i,e){const t={},n=u(e,["mode"]);n!=null&&c(t,["mode"],n);const o=u(e,["dynamicThreshold"]);return o!=null&&c(t,["dynamicThreshold"],o),t}function mx(i,e){const t={},n=u(e,["mode"]);n!=null&&c(t,["mode"],n);const o=u(e,["dynamicThreshold"]);return o!=null&&c(t,["dynamicThreshold"],o),t}function gx(i,e){const t={},n=u(e,["dynamicRetrievalConfig"]);return n!=null&&c(t,["dynamicRetrievalConfig"],px(i,n)),t}function yx(i,e){const t={},n=u(e,["dynamicRetrievalConfig"]);return n!=null&&c(t,["dynamicRetrievalConfig"],mx(i,n)),t}function vx(){return{}}function _x(i,e){const t={},n=u(e,["apiKeyString"]);return n!=null&&c(t,["apiKeyString"],n),t}function wx(i,e){const t={},n=u(e,["apiKeyConfig"]);n!=null&&c(t,["apiKeyConfig"],_x(i,n));const o=u(e,["authType"]);o!=null&&c(t,["authType"],o);const a=u(e,["googleServiceAccountConfig"]);a!=null&&c(t,["googleServiceAccountConfig"],a);const d=u(e,["httpBasicAuthConfig"]);d!=null&&c(t,["httpBasicAuthConfig"],d);const f=u(e,["oauthConfig"]);f!=null&&c(t,["oauthConfig"],f);const m=u(e,["oidcConfig"]);return m!=null&&c(t,["oidcConfig"],m),t}function Cx(i,e){const t={},n=u(e,["authConfig"]);return n!=null&&c(t,["authConfig"],wx(i,n)),t}function xx(){return{}}function Sx(i,e){const t={},n=u(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>lx(i,p))),c(t,["functionDeclarations"],m)}if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(e,["googleSearch"]);o!=null&&c(t,["googleSearch"],fx(i,o));const a=u(e,["googleSearchRetrieval"]);if(a!=null&&c(t,["googleSearchRetrieval"],gx(i,a)),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(e,["urlContext"])!=null&&c(t,["urlContext"],xx());const f=u(e,["codeExecution"]);return f!=null&&c(t,["codeExecution"],f),t}function Tx(i,e){const t={},n=u(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>ux(i,_))),c(t,["functionDeclarations"],y)}const o=u(e,["retrieval"]);o!=null&&c(t,["retrieval"],o);const a=u(e,["googleSearch"]);a!=null&&c(t,["googleSearch"],hx(i,a));const d=u(e,["googleSearchRetrieval"]);d!=null&&c(t,["googleSearchRetrieval"],yx(i,d)),u(e,["enterpriseWebSearch"])!=null&&c(t,["enterpriseWebSearch"],vx());const m=u(e,["googleMaps"]);if(m!=null&&c(t,["googleMaps"],Cx(i,m)),u(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const p=u(e,["codeExecution"]);return p!=null&&c(t,["codeExecution"],p),t}function Ex(i,e){const t={},n=u(e,["handle"]);if(n!=null&&c(t,["handle"],n),u(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function kx(i,e){const t={},n=u(e,["handle"]);n!=null&&c(t,["handle"],n);const o=u(e,["transparent"]);return o!=null&&c(t,["transparent"],o),t}function kp(){return{}}function Ap(){return{}}function Ax(i,e){const t={},n=u(e,["disabled"]);n!=null&&c(t,["disabled"],n);const o=u(e,["startOfSpeechSensitivity"]);o!=null&&c(t,["startOfSpeechSensitivity"],o);const a=u(e,["endOfSpeechSensitivity"]);a!=null&&c(t,["endOfSpeechSensitivity"],a);const d=u(e,["prefixPaddingMs"]);d!=null&&c(t,["prefixPaddingMs"],d);const f=u(e,["silenceDurationMs"]);return f!=null&&c(t,["silenceDurationMs"],f),t}function Ix(i,e){const t={},n=u(e,["disabled"]);n!=null&&c(t,["disabled"],n);const o=u(e,["startOfSpeechSensitivity"]);o!=null&&c(t,["startOfSpeechSensitivity"],o);const a=u(e,["endOfSpeechSensitivity"]);a!=null&&c(t,["endOfSpeechSensitivity"],a);const d=u(e,["prefixPaddingMs"]);d!=null&&c(t,["prefixPaddingMs"],d);const f=u(e,["silenceDurationMs"]);return f!=null&&c(t,["silenceDurationMs"],f),t}function Nx(i,e){const t={},n=u(e,["automaticActivityDetection"]);n!=null&&c(t,["automaticActivityDetection"],Ax(i,n));const o=u(e,["activityHandling"]);o!=null&&c(t,["activityHandling"],o);const a=u(e,["turnCoverage"]);return a!=null&&c(t,["turnCoverage"],a),t}function Px(i,e){const t={},n=u(e,["automaticActivityDetection"]);n!=null&&c(t,["automaticActivityDetection"],Ix(i,n));const o=u(e,["activityHandling"]);o!=null&&c(t,["activityHandling"],o);const a=u(e,["turnCoverage"]);return a!=null&&c(t,["turnCoverage"],a),t}function bx(i,e){const t={},n=u(e,["targetTokens"]);return n!=null&&c(t,["targetTokens"],n),t}function Mx(i,e){const t={},n=u(e,["targetTokens"]);return n!=null&&c(t,["targetTokens"],n),t}function Rx(i,e){const t={},n=u(e,["triggerTokens"]);n!=null&&c(t,["triggerTokens"],n);const o=u(e,["slidingWindow"]);return o!=null&&c(t,["slidingWindow"],bx(i,o)),t}function Dx(i,e){const t={},n=u(e,["triggerTokens"]);n!=null&&c(t,["triggerTokens"],n);const o=u(e,["slidingWindow"]);return o!=null&&c(t,["slidingWindow"],Mx(i,o)),t}function Lx(i,e){const t={},n=u(e,["proactiveAudio"]);return n!=null&&c(t,["proactiveAudio"],n),t}function Fx(i,e){const t={},n=u(e,["proactiveAudio"]);return n!=null&&c(t,["proactiveAudio"],n),t}function Ux(i,e,t){const n={},o=u(e,["generationConfig"]);t!==void 0&&o!=null&&c(t,["setup","generationConfig"],o);const a=u(e,["responseModalities"]);t!==void 0&&a!=null&&c(t,["setup","generationConfig","responseModalities"],a);const d=u(e,["temperature"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","temperature"],d);const f=u(e,["topP"]);t!==void 0&&f!=null&&c(t,["setup","generationConfig","topP"],f);const m=u(e,["topK"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","topK"],m);const p=u(e,["maxOutputTokens"]);t!==void 0&&p!=null&&c(t,["setup","generationConfig","maxOutputTokens"],p);const y=u(e,["mediaResolution"]);t!==void 0&&y!=null&&c(t,["setup","generationConfig","mediaResolution"],y);const _=u(e,["seed"]);t!==void 0&&_!=null&&c(t,["setup","generationConfig","seed"],_);const x=u(e,["speechConfig"]);t!==void 0&&x!=null&&c(t,["setup","generationConfig","speechConfig"],YC(i,Mu(i,x)));const S=u(e,["enableAffectiveDialog"]);t!==void 0&&S!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],S);const k=u(e,["systemInstruction"]);t!==void 0&&k!=null&&c(t,["setup","systemInstruction"],sx(i,ft(i,k)));const I=u(e,["tools"]);if(t!==void 0&&I!=null){let F=lo(i,I);Array.isArray(F)&&(F=F.map(Y=>Sx(i,ao(i,Y)))),c(t,["setup","tools"],F)}const P=u(e,["sessionResumption"]);t!==void 0&&P!=null&&c(t,["setup","sessionResumption"],Ex(i,P));const O=u(e,["inputAudioTranscription"]);t!==void 0&&O!=null&&c(t,["setup","inputAudioTranscription"],kp());const z=u(e,["outputAudioTranscription"]);t!==void 0&&z!=null&&c(t,["setup","outputAudioTranscription"],kp());const L=u(e,["realtimeInputConfig"]);t!==void 0&&L!=null&&c(t,["setup","realtimeInputConfig"],Nx(i,L));const H=u(e,["contextWindowCompression"]);t!==void 0&&H!=null&&c(t,["setup","contextWindowCompression"],Rx(i,H));const X=u(e,["proactivity"]);return t!==void 0&&X!=null&&c(t,["setup","proactivity"],Lx(i,X)),n}function Ox(i,e,t){const n={},o=u(e,["generationConfig"]);t!==void 0&&o!=null&&c(t,["setup","generationConfig"],o);const a=u(e,["responseModalities"]);t!==void 0&&a!=null&&c(t,["setup","generationConfig","responseModalities"],a);const d=u(e,["temperature"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","temperature"],d);const f=u(e,["topP"]);t!==void 0&&f!=null&&c(t,["setup","generationConfig","topP"],f);const m=u(e,["topK"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","topK"],m);const p=u(e,["maxOutputTokens"]);t!==void 0&&p!=null&&c(t,["setup","generationConfig","maxOutputTokens"],p);const y=u(e,["mediaResolution"]);t!==void 0&&y!=null&&c(t,["setup","generationConfig","mediaResolution"],y);const _=u(e,["seed"]);t!==void 0&&_!=null&&c(t,["setup","generationConfig","seed"],_);const x=u(e,["speechConfig"]);t!==void 0&&x!=null&&c(t,["setup","generationConfig","speechConfig"],ZC(i,Mu(i,x)));const S=u(e,["enableAffectiveDialog"]);t!==void 0&&S!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],S);const k=u(e,["systemInstruction"]);t!==void 0&&k!=null&&c(t,["setup","systemInstruction"],ax(i,ft(i,k)));const I=u(e,["tools"]);if(t!==void 0&&I!=null){let F=lo(i,I);Array.isArray(F)&&(F=F.map(Y=>Tx(i,ao(i,Y)))),c(t,["setup","tools"],F)}const P=u(e,["sessionResumption"]);t!==void 0&&P!=null&&c(t,["setup","sessionResumption"],kx(i,P));const O=u(e,["inputAudioTranscription"]);t!==void 0&&O!=null&&c(t,["setup","inputAudioTranscription"],Ap());const z=u(e,["outputAudioTranscription"]);t!==void 0&&z!=null&&c(t,["setup","outputAudioTranscription"],Ap());const L=u(e,["realtimeInputConfig"]);t!==void 0&&L!=null&&c(t,["setup","realtimeInputConfig"],Px(i,L));const H=u(e,["contextWindowCompression"]);t!==void 0&&H!=null&&c(t,["setup","contextWindowCompression"],Dx(i,H));const X=u(e,["proactivity"]);return t!==void 0&&X!=null&&c(t,["setup","proactivity"],Fx(i,X)),n}function $x(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["setup","model"],Oe(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],Ux(i,o,t)),t}function Vx(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["setup","model"],Oe(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],Ox(i,o,t)),t}function Bx(){return{}}function zx(){return{}}function Gx(){return{}}function qx(){return{}}function Hx(i,e){const t={},n=u(e,["media"]);n!=null&&c(t,["mediaChunks"],ym(i,n));const o=u(e,["audio"]);o!=null&&c(t,["audio"],mw(i,o));const a=u(e,["audioStreamEnd"]);a!=null&&c(t,["audioStreamEnd"],a);const d=u(e,["video"]);d!=null&&c(t,["video"],pw(i,d));const f=u(e,["text"]);return f!=null&&c(t,["text"],f),u(e,["activityStart"])!=null&&c(t,["activityStart"],Bx()),u(e,["activityEnd"])!=null&&c(t,["activityEnd"],Gx()),t}function Wx(i,e){const t={},n=u(e,["media"]);if(n!=null&&c(t,["mediaChunks"],ym(i,n)),u(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const o=u(e,["audioStreamEnd"]);if(o!=null&&c(t,["audioStreamEnd"],o),u(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(u(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return u(e,["activityStart"])!=null&&c(t,["activityStart"],zx()),u(e,["activityEnd"])!=null&&c(t,["activityEnd"],qx()),t}function Am(i,e){const t={},n=u(e,["text"]);n!=null&&c(t,["text"],n);const o=u(e,["weight"]);return o!=null&&c(t,["weight"],o),t}function jx(i,e){const t={},n=u(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Am(i,a))),c(t,["weightedPrompts"],o)}return t}function Im(i,e){const t={},n=u(e,["temperature"]);n!=null&&c(t,["temperature"],n);const o=u(e,["topK"]);o!=null&&c(t,["topK"],o);const a=u(e,["seed"]);a!=null&&c(t,["seed"],a);const d=u(e,["guidance"]);d!=null&&c(t,["guidance"],d);const f=u(e,["bpm"]);f!=null&&c(t,["bpm"],f);const m=u(e,["density"]);m!=null&&c(t,["density"],m);const p=u(e,["brightness"]);p!=null&&c(t,["brightness"],p);const y=u(e,["scale"]);y!=null&&c(t,["scale"],y);const _=u(e,["muteBass"]);_!=null&&c(t,["muteBass"],_);const x=u(e,["muteDrums"]);x!=null&&c(t,["muteDrums"],x);const S=u(e,["onlyBassAndDrums"]);return S!=null&&c(t,["onlyBassAndDrums"],S),t}function Jx(i,e){const t={},n=u(e,["musicGenerationConfig"]);return n!=null&&c(t,["musicGenerationConfig"],Im(i,n)),t}function Nm(i,e){const t={},n=u(e,["model"]);return n!=null&&c(t,["model"],n),t}function Pm(i,e){const t={},n=u(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Am(i,a))),c(t,["weightedPrompts"],o)}return t}function _u(i,e){const t={},n=u(e,["setup"]);n!=null&&c(t,["setup"],Nm(i,n));const o=u(e,["clientContent"]);o!=null&&c(t,["clientContent"],Pm(i,o));const a=u(e,["musicGenerationConfig"]);a!=null&&c(t,["musicGenerationConfig"],Im(i,a));const d=u(e,["playbackControl"]);return d!=null&&c(t,["playbackControl"],d),t}function Kx(){return{}}function Yx(){return{}}function Zx(i,e){const t={},n=u(e,["fps"]);n!=null&&c(t,["fps"],n);const o=u(e,["endOffset"]);o!=null&&c(t,["endOffset"],o);const a=u(e,["startOffset"]);return a!=null&&c(t,["startOffset"],a),t}function Qx(i,e){const t={},n=u(e,["fps"]);n!=null&&c(t,["fps"],n);const o=u(e,["endOffset"]);o!=null&&c(t,["endOffset"],o);const a=u(e,["startOffset"]);return a!=null&&c(t,["startOffset"],a),t}function Xx(i,e){const t={},n=u(e,["data"]);n!=null&&c(t,["data"],n);const o=u(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function eS(i,e){const t={},n=u(e,["displayName"]);n!=null&&c(t,["displayName"],n);const o=u(e,["data"]);o!=null&&c(t,["data"],o);const a=u(e,["mimeType"]);return a!=null&&c(t,["mimeType"],a),t}function tS(i,e){const t={},n=u(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const o=u(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function nS(i,e){const t={},n=u(e,["displayName"]);n!=null&&c(t,["displayName"],n);const o=u(e,["fileUri"]);o!=null&&c(t,["fileUri"],o);const a=u(e,["mimeType"]);return a!=null&&c(t,["mimeType"],a),t}function rS(i,e){const t={},n=u(e,["videoMetadata"]);n!=null&&c(t,["videoMetadata"],Zx(i,n));const o=u(e,["thought"]);o!=null&&c(t,["thought"],o);const a=u(e,["inlineData"]);a!=null&&c(t,["inlineData"],Xx(i,a));const d=u(e,["fileData"]);d!=null&&c(t,["fileData"],tS(i,d));const f=u(e,["thoughtSignature"]);f!=null&&c(t,["thoughtSignature"],f);const m=u(e,["codeExecutionResult"]);m!=null&&c(t,["codeExecutionResult"],m);const p=u(e,["executableCode"]);p!=null&&c(t,["executableCode"],p);const y=u(e,["functionCall"]);y!=null&&c(t,["functionCall"],y);const _=u(e,["functionResponse"]);_!=null&&c(t,["functionResponse"],_);const x=u(e,["text"]);return x!=null&&c(t,["text"],x),t}function iS(i,e){const t={},n=u(e,["videoMetadata"]);n!=null&&c(t,["videoMetadata"],Qx(i,n));const o=u(e,["thought"]);o!=null&&c(t,["thought"],o);const a=u(e,["inlineData"]);a!=null&&c(t,["inlineData"],eS(i,a));const d=u(e,["fileData"]);d!=null&&c(t,["fileData"],nS(i,d));const f=u(e,["thoughtSignature"]);f!=null&&c(t,["thoughtSignature"],f);const m=u(e,["codeExecutionResult"]);m!=null&&c(t,["codeExecutionResult"],m);const p=u(e,["executableCode"]);p!=null&&c(t,["executableCode"],p);const y=u(e,["functionCall"]);y!=null&&c(t,["functionCall"],y);const _=u(e,["functionResponse"]);_!=null&&c(t,["functionResponse"],_);const x=u(e,["text"]);return x!=null&&c(t,["text"],x),t}function oS(i,e){const t={},n=u(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>rS(i,d))),c(t,["parts"],a)}const o=u(e,["role"]);return o!=null&&c(t,["role"],o),t}function sS(i,e){const t={},n=u(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>iS(i,d))),c(t,["parts"],a)}const o=u(e,["role"]);return o!=null&&c(t,["role"],o),t}function Ip(i,e){const t={},n=u(e,["text"]);n!=null&&c(t,["text"],n);const o=u(e,["finished"]);return o!=null&&c(t,["finished"],o),t}function Np(i,e){const t={},n=u(e,["text"]);n!=null&&c(t,["text"],n);const o=u(e,["finished"]);return o!=null&&c(t,["finished"],o),t}function aS(i,e){const t={},n=u(e,["retrievedUrl"]);n!=null&&c(t,["retrievedUrl"],n);const o=u(e,["urlRetrievalStatus"]);return o!=null&&c(t,["urlRetrievalStatus"],o),t}function lS(i,e){const t={},n=u(e,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>aS(i,a))),c(t,["urlMetadata"],o)}return t}function uS(i,e){const t={},n=u(e,["modelTurn"]);n!=null&&c(t,["modelTurn"],oS(i,n));const o=u(e,["turnComplete"]);o!=null&&c(t,["turnComplete"],o);const a=u(e,["interrupted"]);a!=null&&c(t,["interrupted"],a);const d=u(e,["groundingMetadata"]);d!=null&&c(t,["groundingMetadata"],d);const f=u(e,["generationComplete"]);f!=null&&c(t,["generationComplete"],f);const m=u(e,["inputTranscription"]);m!=null&&c(t,["inputTranscription"],Ip(i,m));const p=u(e,["outputTranscription"]);p!=null&&c(t,["outputTranscription"],Ip(i,p));const y=u(e,["urlContextMetadata"]);return y!=null&&c(t,["urlContextMetadata"],lS(i,y)),t}function cS(i,e){const t={},n=u(e,["modelTurn"]);n!=null&&c(t,["modelTurn"],sS(i,n));const o=u(e,["turnComplete"]);o!=null&&c(t,["turnComplete"],o);const a=u(e,["interrupted"]);a!=null&&c(t,["interrupted"],a);const d=u(e,["groundingMetadata"]);d!=null&&c(t,["groundingMetadata"],d);const f=u(e,["generationComplete"]);f!=null&&c(t,["generationComplete"],f);const m=u(e,["inputTranscription"]);m!=null&&c(t,["inputTranscription"],Np(i,m));const p=u(e,["outputTranscription"]);return p!=null&&c(t,["outputTranscription"],Np(i,p)),t}function dS(i,e){const t={},n=u(e,["id"]);n!=null&&c(t,["id"],n);const o=u(e,["args"]);o!=null&&c(t,["args"],o);const a=u(e,["name"]);return a!=null&&c(t,["name"],a),t}function fS(i,e){const t={},n=u(e,["args"]);n!=null&&c(t,["args"],n);const o=u(e,["name"]);return o!=null&&c(t,["name"],o),t}function hS(i,e){const t={},n=u(e,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>dS(i,a))),c(t,["functionCalls"],o)}return t}function pS(i,e){const t={},n=u(e,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>fS(i,a))),c(t,["functionCalls"],o)}return t}function mS(i,e){const t={},n=u(e,["ids"]);return n!=null&&c(t,["ids"],n),t}function gS(i,e){const t={},n=u(e,["ids"]);return n!=null&&c(t,["ids"],n),t}function ks(i,e){const t={},n=u(e,["modality"]);n!=null&&c(t,["modality"],n);const o=u(e,["tokenCount"]);return o!=null&&c(t,["tokenCount"],o),t}function As(i,e){const t={},n=u(e,["modality"]);n!=null&&c(t,["modality"],n);const o=u(e,["tokenCount"]);return o!=null&&c(t,["tokenCount"],o),t}function yS(i,e){const t={},n=u(e,["promptTokenCount"]);n!=null&&c(t,["promptTokenCount"],n);const o=u(e,["cachedContentTokenCount"]);o!=null&&c(t,["cachedContentTokenCount"],o);const a=u(e,["responseTokenCount"]);a!=null&&c(t,["responseTokenCount"],a);const d=u(e,["toolUsePromptTokenCount"]);d!=null&&c(t,["toolUsePromptTokenCount"],d);const f=u(e,["thoughtsTokenCount"]);f!=null&&c(t,["thoughtsTokenCount"],f);const m=u(e,["totalTokenCount"]);m!=null&&c(t,["totalTokenCount"],m);const p=u(e,["promptTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(k=>ks(i,k))),c(t,["promptTokensDetails"],S)}const y=u(e,["cacheTokensDetails"]);if(y!=null){let S=y;Array.isArray(S)&&(S=S.map(k=>ks(i,k))),c(t,["cacheTokensDetails"],S)}const _=u(e,["responseTokensDetails"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(k=>ks(i,k))),c(t,["responseTokensDetails"],S)}const x=u(e,["toolUsePromptTokensDetails"]);if(x!=null){let S=x;Array.isArray(S)&&(S=S.map(k=>ks(i,k))),c(t,["toolUsePromptTokensDetails"],S)}return t}function vS(i,e){const t={},n=u(e,["promptTokenCount"]);n!=null&&c(t,["promptTokenCount"],n);const o=u(e,["cachedContentTokenCount"]);o!=null&&c(t,["cachedContentTokenCount"],o);const a=u(e,["candidatesTokenCount"]);a!=null&&c(t,["responseTokenCount"],a);const d=u(e,["toolUsePromptTokenCount"]);d!=null&&c(t,["toolUsePromptTokenCount"],d);const f=u(e,["thoughtsTokenCount"]);f!=null&&c(t,["thoughtsTokenCount"],f);const m=u(e,["totalTokenCount"]);m!=null&&c(t,["totalTokenCount"],m);const p=u(e,["promptTokensDetails"]);if(p!=null){let k=p;Array.isArray(k)&&(k=k.map(I=>As(i,I))),c(t,["promptTokensDetails"],k)}const y=u(e,["cacheTokensDetails"]);if(y!=null){let k=y;Array.isArray(k)&&(k=k.map(I=>As(i,I))),c(t,["cacheTokensDetails"],k)}const _=u(e,["candidatesTokensDetails"]);if(_!=null){let k=_;Array.isArray(k)&&(k=k.map(I=>As(i,I))),c(t,["responseTokensDetails"],k)}const x=u(e,["toolUsePromptTokensDetails"]);if(x!=null){let k=x;Array.isArray(k)&&(k=k.map(I=>As(i,I))),c(t,["toolUsePromptTokensDetails"],k)}const S=u(e,["trafficType"]);return S!=null&&c(t,["trafficType"],S),t}function _S(i,e){const t={},n=u(e,["timeLeft"]);return n!=null&&c(t,["timeLeft"],n),t}function wS(i,e){const t={},n=u(e,["timeLeft"]);return n!=null&&c(t,["timeLeft"],n),t}function CS(i,e){const t={},n=u(e,["newHandle"]);n!=null&&c(t,["newHandle"],n);const o=u(e,["resumable"]);o!=null&&c(t,["resumable"],o);const a=u(e,["lastConsumedClientMessageIndex"]);return a!=null&&c(t,["lastConsumedClientMessageIndex"],a),t}function xS(i,e){const t={},n=u(e,["newHandle"]);n!=null&&c(t,["newHandle"],n);const o=u(e,["resumable"]);o!=null&&c(t,["resumable"],o);const a=u(e,["lastConsumedClientMessageIndex"]);return a!=null&&c(t,["lastConsumedClientMessageIndex"],a),t}function SS(i,e){const t={};u(e,["setupComplete"])!=null&&c(t,["setupComplete"],Kx());const o=u(e,["serverContent"]);o!=null&&c(t,["serverContent"],uS(i,o));const a=u(e,["toolCall"]);a!=null&&c(t,["toolCall"],hS(i,a));const d=u(e,["toolCallCancellation"]);d!=null&&c(t,["toolCallCancellation"],mS(i,d));const f=u(e,["usageMetadata"]);f!=null&&c(t,["usageMetadata"],yS(i,f));const m=u(e,["goAway"]);m!=null&&c(t,["goAway"],_S(i,m));const p=u(e,["sessionResumptionUpdate"]);return p!=null&&c(t,["sessionResumptionUpdate"],CS(i,p)),t}function TS(i,e){const t={};u(e,["setupComplete"])!=null&&c(t,["setupComplete"],Yx());const o=u(e,["serverContent"]);o!=null&&c(t,["serverContent"],cS(i,o));const a=u(e,["toolCall"]);a!=null&&c(t,["toolCall"],pS(i,a));const d=u(e,["toolCallCancellation"]);d!=null&&c(t,["toolCallCancellation"],gS(i,d));const f=u(e,["usageMetadata"]);f!=null&&c(t,["usageMetadata"],vS(i,f));const m=u(e,["goAway"]);m!=null&&c(t,["goAway"],wS(i,m));const p=u(e,["sessionResumptionUpdate"]);return p!=null&&c(t,["sessionResumptionUpdate"],xS(i,p)),t}function ES(){return{}}function kS(i,e){const t={},n=u(e,["text"]);n!=null&&c(t,["text"],n);const o=u(e,["weight"]);return o!=null&&c(t,["weight"],o),t}function AS(i,e){const t={},n=u(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>kS(i,a))),c(t,["weightedPrompts"],o)}return t}function IS(i,e){const t={},n=u(e,["temperature"]);n!=null&&c(t,["temperature"],n);const o=u(e,["topK"]);o!=null&&c(t,["topK"],o);const a=u(e,["seed"]);a!=null&&c(t,["seed"],a);const d=u(e,["guidance"]);d!=null&&c(t,["guidance"],d);const f=u(e,["bpm"]);f!=null&&c(t,["bpm"],f);const m=u(e,["density"]);m!=null&&c(t,["density"],m);const p=u(e,["brightness"]);p!=null&&c(t,["brightness"],p);const y=u(e,["scale"]);y!=null&&c(t,["scale"],y);const _=u(e,["muteBass"]);_!=null&&c(t,["muteBass"],_);const x=u(e,["muteDrums"]);x!=null&&c(t,["muteDrums"],x);const S=u(e,["onlyBassAndDrums"]);return S!=null&&c(t,["onlyBassAndDrums"],S),t}function NS(i,e){const t={},n=u(e,["clientContent"]);n!=null&&c(t,["clientContent"],AS(i,n));const o=u(e,["musicGenerationConfig"]);return o!=null&&c(t,["musicGenerationConfig"],IS(i,o)),t}function PS(i,e){const t={},n=u(e,["data"]);n!=null&&c(t,["data"],n);const o=u(e,["mimeType"]);o!=null&&c(t,["mimeType"],o);const a=u(e,["sourceMetadata"]);return a!=null&&c(t,["sourceMetadata"],NS(i,a)),t}function bS(i,e){const t={},n=u(e,["audioChunks"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>PS(i,a))),c(t,["audioChunks"],o)}return t}function MS(i,e){const t={},n=u(e,["text"]);n!=null&&c(t,["text"],n);const o=u(e,["filteredReason"]);return o!=null&&c(t,["filteredReason"],o),t}function RS(i,e){const t={};u(e,["setupComplete"])!=null&&c(t,["setupComplete"],ES());const o=u(e,["serverContent"]);o!=null&&c(t,["serverContent"],bS(i,o));const a=u(e,["filteredPrompt"]);return a!=null&&c(t,["filteredPrompt"],MS(i,a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DS(i,e){const t={},n=u(e,["fps"]);n!=null&&c(t,["fps"],n);const o=u(e,["endOffset"]);o!=null&&c(t,["endOffset"],o);const a=u(e,["startOffset"]);return a!=null&&c(t,["startOffset"],a),t}function LS(i,e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["data"]);n!=null&&c(t,["data"],n);const o=u(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function FS(i,e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const o=u(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function US(i,e){const t={},n=u(e,["videoMetadata"]);n!=null&&c(t,["videoMetadata"],DS(i,n));const o=u(e,["thought"]);o!=null&&c(t,["thought"],o);const a=u(e,["inlineData"]);a!=null&&c(t,["inlineData"],LS(i,a));const d=u(e,["fileData"]);d!=null&&c(t,["fileData"],FS(i,d));const f=u(e,["thoughtSignature"]);f!=null&&c(t,["thoughtSignature"],f);const m=u(e,["codeExecutionResult"]);m!=null&&c(t,["codeExecutionResult"],m);const p=u(e,["executableCode"]);p!=null&&c(t,["executableCode"],p);const y=u(e,["functionCall"]);y!=null&&c(t,["functionCall"],y);const _=u(e,["functionResponse"]);_!=null&&c(t,["functionResponse"],_);const x=u(e,["text"]);return x!=null&&c(t,["text"],x),t}function qs(i,e){const t={},n=u(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>US(i,d))),c(t,["parts"],a)}const o=u(e,["role"]);return o!=null&&c(t,["role"],o),t}function OS(i,e){const t={},n=u(e,["anyOf"]);n!=null&&c(t,["anyOf"],n);const o=u(e,["default"]);o!=null&&c(t,["default"],o);const a=u(e,["description"]);a!=null&&c(t,["description"],a);const d=u(e,["enum"]);d!=null&&c(t,["enum"],d);const f=u(e,["example"]);f!=null&&c(t,["example"],f);const m=u(e,["format"]);m!=null&&c(t,["format"],m);const p=u(e,["items"]);p!=null&&c(t,["items"],p);const y=u(e,["maxItems"]);y!=null&&c(t,["maxItems"],y);const _=u(e,["maxLength"]);_!=null&&c(t,["maxLength"],_);const x=u(e,["maxProperties"]);x!=null&&c(t,["maxProperties"],x);const S=u(e,["maximum"]);S!=null&&c(t,["maximum"],S);const k=u(e,["minItems"]);k!=null&&c(t,["minItems"],k);const I=u(e,["minLength"]);I!=null&&c(t,["minLength"],I);const P=u(e,["minProperties"]);P!=null&&c(t,["minProperties"],P);const O=u(e,["minimum"]);O!=null&&c(t,["minimum"],O);const z=u(e,["nullable"]);z!=null&&c(t,["nullable"],z);const L=u(e,["pattern"]);L!=null&&c(t,["pattern"],L);const H=u(e,["properties"]);H!=null&&c(t,["properties"],H);const X=u(e,["propertyOrdering"]);X!=null&&c(t,["propertyOrdering"],X);const F=u(e,["required"]);F!=null&&c(t,["required"],F);const Y=u(e,["title"]);Y!=null&&c(t,["title"],Y);const U=u(e,["type"]);return U!=null&&c(t,["type"],U),t}function $S(i,e){const t={};if(u(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(e,["category"]);n!=null&&c(t,["category"],n);const o=u(e,["threshold"]);return o!=null&&c(t,["threshold"],o),t}function VS(i,e){const t={},n=u(e,["behavior"]);n!=null&&c(t,["behavior"],n);const o=u(e,["description"]);o!=null&&c(t,["description"],o);const a=u(e,["name"]);a!=null&&c(t,["name"],a);const d=u(e,["parameters"]);d!=null&&c(t,["parameters"],d);const f=u(e,["response"]);return f!=null&&c(t,["response"],f),t}function BS(i,e){const t={},n=u(e,["startTime"]);n!=null&&c(t,["startTime"],n);const o=u(e,["endTime"]);return o!=null&&c(t,["endTime"],o),t}function zS(i,e){const t={},n=u(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],BS(i,n)),t}function GS(i,e){const t={},n=u(e,["mode"]);n!=null&&c(t,["mode"],n);const o=u(e,["dynamicThreshold"]);return o!=null&&c(t,["dynamicThreshold"],o),t}function qS(i,e){const t={},n=u(e,["dynamicRetrievalConfig"]);return n!=null&&c(t,["dynamicRetrievalConfig"],GS(i,n)),t}function HS(){return{}}function WS(i,e){const t={},n=u(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>VS(i,p))),c(t,["functionDeclarations"],m)}if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(e,["googleSearch"]);o!=null&&c(t,["googleSearch"],zS(i,o));const a=u(e,["googleSearchRetrieval"]);if(a!=null&&c(t,["googleSearchRetrieval"],qS(i,a)),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(e,["urlContext"])!=null&&c(t,["urlContext"],HS());const f=u(e,["codeExecution"]);return f!=null&&c(t,["codeExecution"],f),t}function jS(i,e){const t={},n=u(e,["mode"]);n!=null&&c(t,["mode"],n);const o=u(e,["allowedFunctionNames"]);return o!=null&&c(t,["allowedFunctionNames"],o),t}function JS(i,e){const t={},n=u(e,["latitude"]);n!=null&&c(t,["latitude"],n);const o=u(e,["longitude"]);return o!=null&&c(t,["longitude"],o),t}function KS(i,e){const t={},n=u(e,["latLng"]);n!=null&&c(t,["latLng"],JS(i,n));const o=u(e,["languageCode"]);return o!=null&&c(t,["languageCode"],o),t}function YS(i,e){const t={},n=u(e,["functionCallingConfig"]);n!=null&&c(t,["functionCallingConfig"],jS(i,n));const o=u(e,["retrievalConfig"]);return o!=null&&c(t,["retrievalConfig"],KS(i,o)),t}function ZS(i,e){const t={},n=u(e,["voiceName"]);return n!=null&&c(t,["voiceName"],n),t}function bm(i,e){const t={},n=u(e,["prebuiltVoiceConfig"]);return n!=null&&c(t,["prebuiltVoiceConfig"],ZS(i,n)),t}function QS(i,e){const t={},n=u(e,["speaker"]);n!=null&&c(t,["speaker"],n);const o=u(e,["voiceConfig"]);return o!=null&&c(t,["voiceConfig"],bm(i,o)),t}function XS(i,e){const t={},n=u(e,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>QS(i,a))),c(t,["speakerVoiceConfigs"],o)}return t}function eT(i,e){const t={},n=u(e,["voiceConfig"]);n!=null&&c(t,["voiceConfig"],bm(i,n));const o=u(e,["multiSpeakerVoiceConfig"]);o!=null&&c(t,["multiSpeakerVoiceConfig"],XS(i,o));const a=u(e,["languageCode"]);return a!=null&&c(t,["languageCode"],a),t}function tT(i,e){const t={},n=u(e,["includeThoughts"]);n!=null&&c(t,["includeThoughts"],n);const o=u(e,["thinkingBudget"]);return o!=null&&c(t,["thinkingBudget"],o),t}function nT(i,e,t){const n={},o=u(e,["systemInstruction"]);t!==void 0&&o!=null&&c(t,["systemInstruction"],qs(i,ft(i,o)));const a=u(e,["temperature"]);a!=null&&c(n,["temperature"],a);const d=u(e,["topP"]);d!=null&&c(n,["topP"],d);const f=u(e,["topK"]);f!=null&&c(n,["topK"],f);const m=u(e,["candidateCount"]);m!=null&&c(n,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&c(n,["maxOutputTokens"],p);const y=u(e,["stopSequences"]);y!=null&&c(n,["stopSequences"],y);const _=u(e,["responseLogprobs"]);_!=null&&c(n,["responseLogprobs"],_);const x=u(e,["logprobs"]);x!=null&&c(n,["logprobs"],x);const S=u(e,["presencePenalty"]);S!=null&&c(n,["presencePenalty"],S);const k=u(e,["frequencyPenalty"]);k!=null&&c(n,["frequencyPenalty"],k);const I=u(e,["seed"]);I!=null&&c(n,["seed"],I);const P=u(e,["responseMimeType"]);P!=null&&c(n,["responseMimeType"],P);const O=u(e,["responseSchema"]);if(O!=null&&c(n,["responseSchema"],OS(i,Vs(i,O))),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=u(e,["safetySettings"]);if(t!==void 0&&z!=null){let R=z;Array.isArray(R)&&(R=R.map(te=>$S(i,te))),c(t,["safetySettings"],R)}const L=u(e,["tools"]);if(t!==void 0&&L!=null){let R=lo(i,L);Array.isArray(R)&&(R=R.map(te=>WS(i,ao(i,te)))),c(t,["tools"],R)}const H=u(e,["toolConfig"]);if(t!==void 0&&H!=null&&c(t,["toolConfig"],YS(i,H)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const X=u(e,["cachedContent"]);t!==void 0&&X!=null&&c(t,["cachedContent"],On(i,X));const F=u(e,["responseModalities"]);F!=null&&c(n,["responseModalities"],F);const Y=u(e,["mediaResolution"]);Y!=null&&c(n,["mediaResolution"],Y);const U=u(e,["speechConfig"]);if(U!=null&&c(n,["speechConfig"],eT(i,wm(i,U))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=u(e,["thinkingConfig"]);return $!=null&&c(n,["thinkingConfig"],tT(i,$)),n}function Pp(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","model"],Oe(i,n));const o=u(e,["contents"]);if(o!=null){let d=qt(i,o);Array.isArray(d)&&(d=d.map(f=>qs(i,f))),c(t,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(t,["generationConfig"],nT(i,a,t)),t}function rT(i,e,t){const n={},o=u(e,["taskType"]);t!==void 0&&o!=null&&c(t,["requests[]","taskType"],o);const a=u(e,["title"]);t!==void 0&&a!=null&&c(t,["requests[]","title"],a);const d=u(e,["outputDimensionality"]);if(t!==void 0&&d!=null&&c(t,["requests[]","outputDimensionality"],d),u(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function iT(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","model"],Oe(i,n));const o=u(e,["contents"]);o!=null&&c(t,["requests[]","content"],_m(i,o));const a=u(e,["config"]);a!=null&&c(t,["config"],rT(i,a,t));const d=u(e,["model"]);return d!==void 0&&c(t,["requests[]","model"],Oe(i,d)),t}function oT(i,e,t){const n={};if(u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=u(e,["numberOfImages"]);t!==void 0&&o!=null&&c(t,["parameters","sampleCount"],o);const a=u(e,["aspectRatio"]);t!==void 0&&a!=null&&c(t,["parameters","aspectRatio"],a);const d=u(e,["guidanceScale"]);if(t!==void 0&&d!=null&&c(t,["parameters","guidanceScale"],d),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=u(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&c(t,["parameters","safetySetting"],f);const m=u(e,["personGeneration"]);t!==void 0&&m!=null&&c(t,["parameters","personGeneration"],m);const p=u(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&c(t,["parameters","includeSafetyAttributes"],p);const y=u(e,["includeRaiReason"]);t!==void 0&&y!=null&&c(t,["parameters","includeRaiReason"],y);const _=u(e,["language"]);t!==void 0&&_!=null&&c(t,["parameters","language"],_);const x=u(e,["outputMimeType"]);t!==void 0&&x!=null&&c(t,["parameters","outputOptions","mimeType"],x);const S=u(e,["outputCompressionQuality"]);if(t!==void 0&&S!=null&&c(t,["parameters","outputOptions","compressionQuality"],S),u(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function sT(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","model"],Oe(i,n));const o=u(e,["prompt"]);o!=null&&c(t,["instances[0]","prompt"],o);const a=u(e,["config"]);return a!=null&&c(t,["config"],oT(i,a,t)),t}function aT(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","name"],Oe(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function lT(i,e,t){const n={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const a=u(e,["pageToken"]);t!==void 0&&a!=null&&c(t,["_query","pageToken"],a);const d=u(e,["filter"]);t!==void 0&&d!=null&&c(t,["_query","filter"],d);const f=u(e,["queryBase"]);return t!==void 0&&f!=null&&c(t,["_url","models_url"],Sm(i,f)),n}function uT(i,e){const t={},n=u(e,["config"]);return n!=null&&c(t,["config"],lT(i,n,t)),t}function cT(i,e,t){const n={},o=u(e,["displayName"]);t!==void 0&&o!=null&&c(t,["displayName"],o);const a=u(e,["description"]);t!==void 0&&a!=null&&c(t,["description"],a);const d=u(e,["defaultCheckpointId"]);return t!==void 0&&d!=null&&c(t,["defaultCheckpointId"],d),n}function dT(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","name"],Oe(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],cT(i,o,t)),t}function fT(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","name"],Oe(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function hT(i,e){const t={};if(u(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function pT(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","model"],Oe(i,n));const o=u(e,["contents"]);if(o!=null){let d=qt(i,o);Array.isArray(d)&&(d=d.map(f=>qs(i,f))),c(t,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(t,["config"],hT(i,a)),t}function mT(i,e){const t={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(e,["imageBytes"]);n!=null&&c(t,["bytesBase64Encoded"],$n(i,n));const o=u(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function gT(i,e,t){const n={},o=u(e,["numberOfVideos"]);if(t!==void 0&&o!=null&&c(t,["parameters","sampleCount"],o),u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=u(e,["durationSeconds"]);if(t!==void 0&&a!=null&&c(t,["parameters","durationSeconds"],a),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=u(e,["aspectRatio"]);if(t!==void 0&&d!=null&&c(t,["parameters","aspectRatio"],d),u(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const f=u(e,["personGeneration"]);if(t!==void 0&&f!=null&&c(t,["parameters","personGeneration"],f),u(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=u(e,["negativePrompt"]);if(t!==void 0&&m!=null&&c(t,["parameters","negativePrompt"],m),u(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");if(u(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");return n}function yT(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","model"],Oe(i,n));const o=u(e,["prompt"]);o!=null&&c(t,["instances[0]","prompt"],o);const a=u(e,["image"]);a!=null&&c(t,["instances[0]","image"],mT(i,a));const d=u(e,["config"]);return d!=null&&c(t,["config"],gT(i,d,t)),t}function vT(i,e){const t={},n=u(e,["fps"]);n!=null&&c(t,["fps"],n);const o=u(e,["endOffset"]);o!=null&&c(t,["endOffset"],o);const a=u(e,["startOffset"]);return a!=null&&c(t,["startOffset"],a),t}function _T(i,e){const t={},n=u(e,["displayName"]);n!=null&&c(t,["displayName"],n);const o=u(e,["data"]);o!=null&&c(t,["data"],o);const a=u(e,["mimeType"]);return a!=null&&c(t,["mimeType"],a),t}function wT(i,e){const t={},n=u(e,["displayName"]);n!=null&&c(t,["displayName"],n);const o=u(e,["fileUri"]);o!=null&&c(t,["fileUri"],o);const a=u(e,["mimeType"]);return a!=null&&c(t,["mimeType"],a),t}function CT(i,e){const t={},n=u(e,["videoMetadata"]);n!=null&&c(t,["videoMetadata"],vT(i,n));const o=u(e,["thought"]);o!=null&&c(t,["thought"],o);const a=u(e,["inlineData"]);a!=null&&c(t,["inlineData"],_T(i,a));const d=u(e,["fileData"]);d!=null&&c(t,["fileData"],wT(i,d));const f=u(e,["thoughtSignature"]);f!=null&&c(t,["thoughtSignature"],f);const m=u(e,["codeExecutionResult"]);m!=null&&c(t,["codeExecutionResult"],m);const p=u(e,["executableCode"]);p!=null&&c(t,["executableCode"],p);const y=u(e,["functionCall"]);y!=null&&c(t,["functionCall"],y);const _=u(e,["functionResponse"]);_!=null&&c(t,["functionResponse"],_);const x=u(e,["text"]);return x!=null&&c(t,["text"],x),t}function ii(i,e){const t={},n=u(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>CT(i,d))),c(t,["parts"],a)}const o=u(e,["role"]);return o!=null&&c(t,["role"],o),t}function xT(i,e){const t={},n=u(e,["anyOf"]);n!=null&&c(t,["anyOf"],n);const o=u(e,["default"]);o!=null&&c(t,["default"],o);const a=u(e,["description"]);a!=null&&c(t,["description"],a);const d=u(e,["enum"]);d!=null&&c(t,["enum"],d);const f=u(e,["example"]);f!=null&&c(t,["example"],f);const m=u(e,["format"]);m!=null&&c(t,["format"],m);const p=u(e,["items"]);p!=null&&c(t,["items"],p);const y=u(e,["maxItems"]);y!=null&&c(t,["maxItems"],y);const _=u(e,["maxLength"]);_!=null&&c(t,["maxLength"],_);const x=u(e,["maxProperties"]);x!=null&&c(t,["maxProperties"],x);const S=u(e,["maximum"]);S!=null&&c(t,["maximum"],S);const k=u(e,["minItems"]);k!=null&&c(t,["minItems"],k);const I=u(e,["minLength"]);I!=null&&c(t,["minLength"],I);const P=u(e,["minProperties"]);P!=null&&c(t,["minProperties"],P);const O=u(e,["minimum"]);O!=null&&c(t,["minimum"],O);const z=u(e,["nullable"]);z!=null&&c(t,["nullable"],z);const L=u(e,["pattern"]);L!=null&&c(t,["pattern"],L);const H=u(e,["properties"]);H!=null&&c(t,["properties"],H);const X=u(e,["propertyOrdering"]);X!=null&&c(t,["propertyOrdering"],X);const F=u(e,["required"]);F!=null&&c(t,["required"],F);const Y=u(e,["title"]);Y!=null&&c(t,["title"],Y);const U=u(e,["type"]);return U!=null&&c(t,["type"],U),t}function ST(i,e){const t={},n=u(e,["featureSelectionPreference"]);return n!=null&&c(t,["featureSelectionPreference"],n),t}function TT(i,e){const t={},n=u(e,["method"]);n!=null&&c(t,["method"],n);const o=u(e,["category"]);o!=null&&c(t,["category"],o);const a=u(e,["threshold"]);return a!=null&&c(t,["threshold"],a),t}function ET(i,e){const t={};if(u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(e,["description"]);n!=null&&c(t,["description"],n);const o=u(e,["name"]);o!=null&&c(t,["name"],o);const a=u(e,["parameters"]);a!=null&&c(t,["parameters"],a);const d=u(e,["response"]);return d!=null&&c(t,["response"],d),t}function kT(i,e){const t={},n=u(e,["startTime"]);n!=null&&c(t,["startTime"],n);const o=u(e,["endTime"]);return o!=null&&c(t,["endTime"],o),t}function AT(i,e){const t={},n=u(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],kT(i,n)),t}function IT(i,e){const t={},n=u(e,["mode"]);n!=null&&c(t,["mode"],n);const o=u(e,["dynamicThreshold"]);return o!=null&&c(t,["dynamicThreshold"],o),t}function NT(i,e){const t={},n=u(e,["dynamicRetrievalConfig"]);return n!=null&&c(t,["dynamicRetrievalConfig"],IT(i,n)),t}function PT(){return{}}function bT(i,e){const t={},n=u(e,["apiKeyString"]);return n!=null&&c(t,["apiKeyString"],n),t}function MT(i,e){const t={},n=u(e,["apiKeyConfig"]);n!=null&&c(t,["apiKeyConfig"],bT(i,n));const o=u(e,["authType"]);o!=null&&c(t,["authType"],o);const a=u(e,["googleServiceAccountConfig"]);a!=null&&c(t,["googleServiceAccountConfig"],a);const d=u(e,["httpBasicAuthConfig"]);d!=null&&c(t,["httpBasicAuthConfig"],d);const f=u(e,["oauthConfig"]);f!=null&&c(t,["oauthConfig"],f);const m=u(e,["oidcConfig"]);return m!=null&&c(t,["oidcConfig"],m),t}function RT(i,e){const t={},n=u(e,["authConfig"]);return n!=null&&c(t,["authConfig"],MT(i,n)),t}function Mm(i,e){const t={},n=u(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>ET(i,_))),c(t,["functionDeclarations"],y)}const o=u(e,["retrieval"]);o!=null&&c(t,["retrieval"],o);const a=u(e,["googleSearch"]);a!=null&&c(t,["googleSearch"],AT(i,a));const d=u(e,["googleSearchRetrieval"]);d!=null&&c(t,["googleSearchRetrieval"],NT(i,d)),u(e,["enterpriseWebSearch"])!=null&&c(t,["enterpriseWebSearch"],PT());const m=u(e,["googleMaps"]);if(m!=null&&c(t,["googleMaps"],RT(i,m)),u(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const p=u(e,["codeExecution"]);return p!=null&&c(t,["codeExecution"],p),t}function DT(i,e){const t={},n=u(e,["mode"]);n!=null&&c(t,["mode"],n);const o=u(e,["allowedFunctionNames"]);return o!=null&&c(t,["allowedFunctionNames"],o),t}function LT(i,e){const t={},n=u(e,["latitude"]);n!=null&&c(t,["latitude"],n);const o=u(e,["longitude"]);return o!=null&&c(t,["longitude"],o),t}function FT(i,e){const t={},n=u(e,["latLng"]);n!=null&&c(t,["latLng"],LT(i,n));const o=u(e,["languageCode"]);return o!=null&&c(t,["languageCode"],o),t}function UT(i,e){const t={},n=u(e,["functionCallingConfig"]);n!=null&&c(t,["functionCallingConfig"],DT(i,n));const o=u(e,["retrievalConfig"]);return o!=null&&c(t,["retrievalConfig"],FT(i,o)),t}function OT(i,e){const t={},n=u(e,["voiceName"]);return n!=null&&c(t,["voiceName"],n),t}function $T(i,e){const t={},n=u(e,["prebuiltVoiceConfig"]);return n!=null&&c(t,["prebuiltVoiceConfig"],OT(i,n)),t}function VT(i,e){const t={},n=u(e,["voiceConfig"]);if(n!=null&&c(t,["voiceConfig"],$T(i,n)),u(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=u(e,["languageCode"]);return o!=null&&c(t,["languageCode"],o),t}function BT(i,e){const t={},n=u(e,["includeThoughts"]);n!=null&&c(t,["includeThoughts"],n);const o=u(e,["thinkingBudget"]);return o!=null&&c(t,["thinkingBudget"],o),t}function zT(i,e,t){const n={},o=u(e,["systemInstruction"]);t!==void 0&&o!=null&&c(t,["systemInstruction"],ii(i,ft(i,o)));const a=u(e,["temperature"]);a!=null&&c(n,["temperature"],a);const d=u(e,["topP"]);d!=null&&c(n,["topP"],d);const f=u(e,["topK"]);f!=null&&c(n,["topK"],f);const m=u(e,["candidateCount"]);m!=null&&c(n,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&c(n,["maxOutputTokens"],p);const y=u(e,["stopSequences"]);y!=null&&c(n,["stopSequences"],y);const _=u(e,["responseLogprobs"]);_!=null&&c(n,["responseLogprobs"],_);const x=u(e,["logprobs"]);x!=null&&c(n,["logprobs"],x);const S=u(e,["presencePenalty"]);S!=null&&c(n,["presencePenalty"],S);const k=u(e,["frequencyPenalty"]);k!=null&&c(n,["frequencyPenalty"],k);const I=u(e,["seed"]);I!=null&&c(n,["seed"],I);const P=u(e,["responseMimeType"]);P!=null&&c(n,["responseMimeType"],P);const O=u(e,["responseSchema"]);O!=null&&c(n,["responseSchema"],xT(i,Vs(i,O)));const z=u(e,["routingConfig"]);z!=null&&c(n,["routingConfig"],z);const L=u(e,["modelSelectionConfig"]);L!=null&&c(n,["modelConfig"],ST(i,L));const H=u(e,["safetySettings"]);if(t!==void 0&&H!=null){let fe=H;Array.isArray(fe)&&(fe=fe.map(j=>TT(i,j))),c(t,["safetySettings"],fe)}const X=u(e,["tools"]);if(t!==void 0&&X!=null){let fe=lo(i,X);Array.isArray(fe)&&(fe=fe.map(j=>Mm(i,ao(i,j)))),c(t,["tools"],fe)}const F=u(e,["toolConfig"]);t!==void 0&&F!=null&&c(t,["toolConfig"],UT(i,F));const Y=u(e,["labels"]);t!==void 0&&Y!=null&&c(t,["labels"],Y);const U=u(e,["cachedContent"]);t!==void 0&&U!=null&&c(t,["cachedContent"],On(i,U));const $=u(e,["responseModalities"]);$!=null&&c(n,["responseModalities"],$);const R=u(e,["mediaResolution"]);R!=null&&c(n,["mediaResolution"],R);const te=u(e,["speechConfig"]);te!=null&&c(n,["speechConfig"],VT(i,wm(i,te)));const _e=u(e,["audioTimestamp"]);_e!=null&&c(n,["audioTimestamp"],_e);const xe=u(e,["thinkingConfig"]);return xe!=null&&c(n,["thinkingConfig"],BT(i,xe)),n}function bp(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","model"],Oe(i,n));const o=u(e,["contents"]);if(o!=null){let d=qt(i,o);Array.isArray(d)&&(d=d.map(f=>ii(i,f))),c(t,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(t,["generationConfig"],zT(i,a,t)),t}function GT(i,e,t){const n={},o=u(e,["taskType"]);t!==void 0&&o!=null&&c(t,["instances[]","task_type"],o);const a=u(e,["title"]);t!==void 0&&a!=null&&c(t,["instances[]","title"],a);const d=u(e,["outputDimensionality"]);t!==void 0&&d!=null&&c(t,["parameters","outputDimensionality"],d);const f=u(e,["mimeType"]);t!==void 0&&f!=null&&c(t,["instances[]","mimeType"],f);const m=u(e,["autoTruncate"]);return t!==void 0&&m!=null&&c(t,["parameters","autoTruncate"],m),n}function qT(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","model"],Oe(i,n));const o=u(e,["contents"]);o!=null&&c(t,["instances[]","content"],_m(i,o));const a=u(e,["config"]);return a!=null&&c(t,["config"],GT(i,a,t)),t}function HT(i,e,t){const n={},o=u(e,["outputGcsUri"]);t!==void 0&&o!=null&&c(t,["parameters","storageUri"],o);const a=u(e,["negativePrompt"]);t!==void 0&&a!=null&&c(t,["parameters","negativePrompt"],a);const d=u(e,["numberOfImages"]);t!==void 0&&d!=null&&c(t,["parameters","sampleCount"],d);const f=u(e,["aspectRatio"]);t!==void 0&&f!=null&&c(t,["parameters","aspectRatio"],f);const m=u(e,["guidanceScale"]);t!==void 0&&m!=null&&c(t,["parameters","guidanceScale"],m);const p=u(e,["seed"]);t!==void 0&&p!=null&&c(t,["parameters","seed"],p);const y=u(e,["safetyFilterLevel"]);t!==void 0&&y!=null&&c(t,["parameters","safetySetting"],y);const _=u(e,["personGeneration"]);t!==void 0&&_!=null&&c(t,["parameters","personGeneration"],_);const x=u(e,["includeSafetyAttributes"]);t!==void 0&&x!=null&&c(t,["parameters","includeSafetyAttributes"],x);const S=u(e,["includeRaiReason"]);t!==void 0&&S!=null&&c(t,["parameters","includeRaiReason"],S);const k=u(e,["language"]);t!==void 0&&k!=null&&c(t,["parameters","language"],k);const I=u(e,["outputMimeType"]);t!==void 0&&I!=null&&c(t,["parameters","outputOptions","mimeType"],I);const P=u(e,["outputCompressionQuality"]);t!==void 0&&P!=null&&c(t,["parameters","outputOptions","compressionQuality"],P);const O=u(e,["addWatermark"]);t!==void 0&&O!=null&&c(t,["parameters","addWatermark"],O);const z=u(e,["enhancePrompt"]);return t!==void 0&&z!=null&&c(t,["parameters","enhancePrompt"],z),n}function WT(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","model"],Oe(i,n));const o=u(e,["prompt"]);o!=null&&c(t,["instances[0]","prompt"],o);const a=u(e,["config"]);return a!=null&&c(t,["config"],HT(i,a,t)),t}function Ru(i,e){const t={},n=u(e,["gcsUri"]);n!=null&&c(t,["gcsUri"],n);const o=u(e,["imageBytes"]);o!=null&&c(t,["bytesBase64Encoded"],$n(i,o));const a=u(e,["mimeType"]);return a!=null&&c(t,["mimeType"],a),t}function jT(i,e){const t={},n=u(e,["maskMode"]);n!=null&&c(t,["maskMode"],n);const o=u(e,["segmentationClasses"]);o!=null&&c(t,["maskClasses"],o);const a=u(e,["maskDilation"]);return a!=null&&c(t,["dilation"],a),t}function JT(i,e){const t={},n=u(e,["controlType"]);n!=null&&c(t,["controlType"],n);const o=u(e,["enableControlImageComputation"]);return o!=null&&c(t,["computeControl"],o),t}function KT(i,e){const t={},n=u(e,["styleDescription"]);return n!=null&&c(t,["styleDescription"],n),t}function YT(i,e){const t={},n=u(e,["subjectType"]);n!=null&&c(t,["subjectType"],n);const o=u(e,["subjectDescription"]);return o!=null&&c(t,["subjectDescription"],o),t}function ZT(i,e){const t={},n=u(e,["referenceImage"]);n!=null&&c(t,["referenceImage"],Ru(i,n));const o=u(e,["referenceId"]);o!=null&&c(t,["referenceId"],o);const a=u(e,["referenceType"]);a!=null&&c(t,["referenceType"],a);const d=u(e,["maskImageConfig"]);d!=null&&c(t,["maskImageConfig"],jT(i,d));const f=u(e,["controlImageConfig"]);f!=null&&c(t,["controlImageConfig"],JT(i,f));const m=u(e,["styleImageConfig"]);m!=null&&c(t,["styleImageConfig"],KT(i,m));const p=u(e,["subjectImageConfig"]);return p!=null&&c(t,["subjectImageConfig"],YT(i,p)),t}function QT(i,e,t){const n={},o=u(e,["outputGcsUri"]);t!==void 0&&o!=null&&c(t,["parameters","storageUri"],o);const a=u(e,["negativePrompt"]);t!==void 0&&a!=null&&c(t,["parameters","negativePrompt"],a);const d=u(e,["numberOfImages"]);t!==void 0&&d!=null&&c(t,["parameters","sampleCount"],d);const f=u(e,["aspectRatio"]);t!==void 0&&f!=null&&c(t,["parameters","aspectRatio"],f);const m=u(e,["guidanceScale"]);t!==void 0&&m!=null&&c(t,["parameters","guidanceScale"],m);const p=u(e,["seed"]);t!==void 0&&p!=null&&c(t,["parameters","seed"],p);const y=u(e,["safetyFilterLevel"]);t!==void 0&&y!=null&&c(t,["parameters","safetySetting"],y);const _=u(e,["personGeneration"]);t!==void 0&&_!=null&&c(t,["parameters","personGeneration"],_);const x=u(e,["includeSafetyAttributes"]);t!==void 0&&x!=null&&c(t,["parameters","includeSafetyAttributes"],x);const S=u(e,["includeRaiReason"]);t!==void 0&&S!=null&&c(t,["parameters","includeRaiReason"],S);const k=u(e,["language"]);t!==void 0&&k!=null&&c(t,["parameters","language"],k);const I=u(e,["outputMimeType"]);t!==void 0&&I!=null&&c(t,["parameters","outputOptions","mimeType"],I);const P=u(e,["outputCompressionQuality"]);t!==void 0&&P!=null&&c(t,["parameters","outputOptions","compressionQuality"],P);const O=u(e,["editMode"]);t!==void 0&&O!=null&&c(t,["parameters","editMode"],O);const z=u(e,["baseSteps"]);return t!==void 0&&z!=null&&c(t,["parameters","editConfig","baseSteps"],z),n}function XT(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","model"],Oe(i,n));const o=u(e,["prompt"]);o!=null&&c(t,["instances[0]","prompt"],o);const a=u(e,["referenceImages"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(m=>ZT(i,m))),c(t,["instances[0]","referenceImages"],f)}const d=u(e,["config"]);return d!=null&&c(t,["config"],QT(i,d,t)),t}function eE(i,e,t){const n={},o=u(e,["includeRaiReason"]);t!==void 0&&o!=null&&c(t,["parameters","includeRaiReason"],o);const a=u(e,["outputMimeType"]);t!==void 0&&a!=null&&c(t,["parameters","outputOptions","mimeType"],a);const d=u(e,["outputCompressionQuality"]);t!==void 0&&d!=null&&c(t,["parameters","outputOptions","compressionQuality"],d);const f=u(e,["numberOfImages"]);t!==void 0&&f!=null&&c(t,["parameters","sampleCount"],f);const m=u(e,["mode"]);return t!==void 0&&m!=null&&c(t,["parameters","mode"],m),n}function tE(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","model"],Oe(i,n));const o=u(e,["image"]);o!=null&&c(t,["instances[0]","image"],Ru(i,o));const a=u(e,["upscaleFactor"]);a!=null&&c(t,["parameters","upscaleConfig","upscaleFactor"],a);const d=u(e,["config"]);return d!=null&&c(t,["config"],eE(i,d,t)),t}function nE(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","name"],Oe(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function rE(i,e,t){const n={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const a=u(e,["pageToken"]);t!==void 0&&a!=null&&c(t,["_query","pageToken"],a);const d=u(e,["filter"]);t!==void 0&&d!=null&&c(t,["_query","filter"],d);const f=u(e,["queryBase"]);return t!==void 0&&f!=null&&c(t,["_url","models_url"],Sm(i,f)),n}function iE(i,e){const t={},n=u(e,["config"]);return n!=null&&c(t,["config"],rE(i,n,t)),t}function oE(i,e,t){const n={},o=u(e,["displayName"]);t!==void 0&&o!=null&&c(t,["displayName"],o);const a=u(e,["description"]);t!==void 0&&a!=null&&c(t,["description"],a);const d=u(e,["defaultCheckpointId"]);return t!==void 0&&d!=null&&c(t,["defaultCheckpointId"],d),n}function sE(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","model"],Oe(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],oE(i,o,t)),t}function aE(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","name"],Oe(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function lE(i,e,t){const n={},o=u(e,["systemInstruction"]);t!==void 0&&o!=null&&c(t,["systemInstruction"],ii(i,ft(i,o)));const a=u(e,["tools"]);if(t!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(m=>Mm(i,m))),c(t,["tools"],f)}const d=u(e,["generationConfig"]);return t!==void 0&&d!=null&&c(t,["generationConfig"],d),n}function uE(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","model"],Oe(i,n));const o=u(e,["contents"]);if(o!=null){let d=qt(i,o);Array.isArray(d)&&(d=d.map(f=>ii(i,f))),c(t,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(t,["config"],lE(i,a,t)),t}function cE(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","model"],Oe(i,n));const o=u(e,["contents"]);if(o!=null){let d=qt(i,o);Array.isArray(d)&&(d=d.map(f=>ii(i,f))),c(t,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(t,["config"],a),t}function dE(i,e,t){const n={},o=u(e,["numberOfVideos"]);t!==void 0&&o!=null&&c(t,["parameters","sampleCount"],o);const a=u(e,["outputGcsUri"]);t!==void 0&&a!=null&&c(t,["parameters","storageUri"],a);const d=u(e,["fps"]);t!==void 0&&d!=null&&c(t,["parameters","fps"],d);const f=u(e,["durationSeconds"]);t!==void 0&&f!=null&&c(t,["parameters","durationSeconds"],f);const m=u(e,["seed"]);t!==void 0&&m!=null&&c(t,["parameters","seed"],m);const p=u(e,["aspectRatio"]);t!==void 0&&p!=null&&c(t,["parameters","aspectRatio"],p);const y=u(e,["resolution"]);t!==void 0&&y!=null&&c(t,["parameters","resolution"],y);const _=u(e,["personGeneration"]);t!==void 0&&_!=null&&c(t,["parameters","personGeneration"],_);const x=u(e,["pubsubTopic"]);t!==void 0&&x!=null&&c(t,["parameters","pubsubTopic"],x);const S=u(e,["negativePrompt"]);t!==void 0&&S!=null&&c(t,["parameters","negativePrompt"],S);const k=u(e,["enhancePrompt"]);t!==void 0&&k!=null&&c(t,["parameters","enhancePrompt"],k);const I=u(e,["generateAudio"]);return t!==void 0&&I!=null&&c(t,["parameters","generateAudio"],I),n}function fE(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["_url","model"],Oe(i,n));const o=u(e,["prompt"]);o!=null&&c(t,["instances[0]","prompt"],o);const a=u(e,["image"]);a!=null&&c(t,["instances[0]","image"],Ru(i,a));const d=u(e,["config"]);return d!=null&&c(t,["config"],dE(i,d,t)),t}function hE(i,e){const t={},n=u(e,["fps"]);n!=null&&c(t,["fps"],n);const o=u(e,["endOffset"]);o!=null&&c(t,["endOffset"],o);const a=u(e,["startOffset"]);return a!=null&&c(t,["startOffset"],a),t}function pE(i,e){const t={},n=u(e,["data"]);n!=null&&c(t,["data"],n);const o=u(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function mE(i,e){const t={},n=u(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const o=u(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function gE(i,e){const t={},n=u(e,["videoMetadata"]);n!=null&&c(t,["videoMetadata"],hE(i,n));const o=u(e,["thought"]);o!=null&&c(t,["thought"],o);const a=u(e,["inlineData"]);a!=null&&c(t,["inlineData"],pE(i,a));const d=u(e,["fileData"]);d!=null&&c(t,["fileData"],mE(i,d));const f=u(e,["thoughtSignature"]);f!=null&&c(t,["thoughtSignature"],f);const m=u(e,["codeExecutionResult"]);m!=null&&c(t,["codeExecutionResult"],m);const p=u(e,["executableCode"]);p!=null&&c(t,["executableCode"],p);const y=u(e,["functionCall"]);y!=null&&c(t,["functionCall"],y);const _=u(e,["functionResponse"]);_!=null&&c(t,["functionResponse"],_);const x=u(e,["text"]);return x!=null&&c(t,["text"],x),t}function yE(i,e){const t={},n=u(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>gE(i,d))),c(t,["parts"],a)}const o=u(e,["role"]);return o!=null&&c(t,["role"],o),t}function vE(i,e){const t={},n=u(e,["citationSources"]);return n!=null&&c(t,["citations"],n),t}function _E(i,e){const t={},n=u(e,["retrievedUrl"]);n!=null&&c(t,["retrievedUrl"],n);const o=u(e,["urlRetrievalStatus"]);return o!=null&&c(t,["urlRetrievalStatus"],o),t}function wE(i,e){const t={},n=u(e,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>_E(i,a))),c(t,["urlMetadata"],o)}return t}function CE(i,e){const t={},n=u(e,["content"]);n!=null&&c(t,["content"],yE(i,n));const o=u(e,["citationMetadata"]);o!=null&&c(t,["citationMetadata"],vE(i,o));const a=u(e,["tokenCount"]);a!=null&&c(t,["tokenCount"],a);const d=u(e,["finishReason"]);d!=null&&c(t,["finishReason"],d);const f=u(e,["urlContextMetadata"]);f!=null&&c(t,["urlContextMetadata"],wE(i,f));const m=u(e,["avgLogprobs"]);m!=null&&c(t,["avgLogprobs"],m);const p=u(e,["groundingMetadata"]);p!=null&&c(t,["groundingMetadata"],p);const y=u(e,["index"]);y!=null&&c(t,["index"],y);const _=u(e,["logprobsResult"]);_!=null&&c(t,["logprobsResult"],_);const x=u(e,["safetyRatings"]);return x!=null&&c(t,["safetyRatings"],x),t}function Mp(i,e){const t={},n=u(e,["candidates"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>CE(i,m))),c(t,["candidates"],f)}const o=u(e,["modelVersion"]);o!=null&&c(t,["modelVersion"],o);const a=u(e,["promptFeedback"]);a!=null&&c(t,["promptFeedback"],a);const d=u(e,["usageMetadata"]);return d!=null&&c(t,["usageMetadata"],d),t}function xE(i,e){const t={},n=u(e,["values"]);return n!=null&&c(t,["values"],n),t}function SE(){return{}}function TE(i,e){const t={},n=u(e,["embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>xE(i,d))),c(t,["embeddings"],a)}return u(e,["metadata"])!=null&&c(t,["metadata"],SE()),t}function EE(i,e){const t={},n=u(e,["bytesBase64Encoded"]);n!=null&&c(t,["imageBytes"],$n(i,n));const o=u(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function Rm(i,e){const t={},n=u(e,["safetyAttributes","categories"]);n!=null&&c(t,["categories"],n);const o=u(e,["safetyAttributes","scores"]);o!=null&&c(t,["scores"],o);const a=u(e,["contentType"]);return a!=null&&c(t,["contentType"],a),t}function kE(i,e){const t={},n=u(e,["_self"]);n!=null&&c(t,["image"],EE(i,n));const o=u(e,["raiFilteredReason"]);o!=null&&c(t,["raiFilteredReason"],o);const a=u(e,["_self"]);return a!=null&&c(t,["safetyAttributes"],Rm(i,a)),t}function AE(i,e){const t={},n=u(e,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>kE(i,d))),c(t,["generatedImages"],a)}const o=u(e,["positivePromptSafetyAttributes"]);return o!=null&&c(t,["positivePromptSafetyAttributes"],Rm(i,o)),t}function IE(i,e){const t={},n=u(e,["baseModel"]);n!=null&&c(t,["baseModel"],n);const o=u(e,["createTime"]);o!=null&&c(t,["createTime"],o);const a=u(e,["updateTime"]);return a!=null&&c(t,["updateTime"],a),t}function wu(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["name"],n);const o=u(e,["displayName"]);o!=null&&c(t,["displayName"],o);const a=u(e,["description"]);a!=null&&c(t,["description"],a);const d=u(e,["version"]);d!=null&&c(t,["version"],d);const f=u(e,["_self"]);f!=null&&c(t,["tunedModelInfo"],IE(i,f));const m=u(e,["inputTokenLimit"]);m!=null&&c(t,["inputTokenLimit"],m);const p=u(e,["outputTokenLimit"]);p!=null&&c(t,["outputTokenLimit"],p);const y=u(e,["supportedGenerationMethods"]);return y!=null&&c(t,["supportedActions"],y),t}function NE(i,e){const t={},n=u(e,["nextPageToken"]);n!=null&&c(t,["nextPageToken"],n);const o=u(e,["_self"]);if(o!=null){let a=Tm(i,o);Array.isArray(a)&&(a=a.map(d=>wu(i,d))),c(t,["models"],a)}return t}function PE(){return{}}function bE(i,e){const t={},n=u(e,["totalTokens"]);n!=null&&c(t,["totalTokens"],n);const o=u(e,["cachedContentTokenCount"]);return o!=null&&c(t,["cachedContentTokenCount"],o),t}function ME(i,e){const t={},n=u(e,["video","uri"]);n!=null&&c(t,["uri"],n);const o=u(e,["video","encodedVideo"]);o!=null&&c(t,["videoBytes"],$n(i,o));const a=u(e,["encoding"]);return a!=null&&c(t,["mimeType"],a),t}function RE(i,e){const t={},n=u(e,["_self"]);return n!=null&&c(t,["video"],ME(i,n)),t}function DE(i,e){const t={},n=u(e,["generatedSamples"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>RE(i,f))),c(t,["generatedVideos"],d)}const o=u(e,["raiMediaFilteredCount"]);o!=null&&c(t,["raiMediaFilteredCount"],o);const a=u(e,["raiMediaFilteredReasons"]);return a!=null&&c(t,["raiMediaFilteredReasons"],a),t}function LE(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["name"],n);const o=u(e,["metadata"]);o!=null&&c(t,["metadata"],o);const a=u(e,["done"]);a!=null&&c(t,["done"],a);const d=u(e,["error"]);d!=null&&c(t,["error"],d);const f=u(e,["response","generateVideoResponse"]);return f!=null&&c(t,["response"],DE(i,f)),t}function FE(i,e){const t={},n=u(e,["fps"]);n!=null&&c(t,["fps"],n);const o=u(e,["endOffset"]);o!=null&&c(t,["endOffset"],o);const a=u(e,["startOffset"]);return a!=null&&c(t,["startOffset"],a),t}function UE(i,e){const t={},n=u(e,["displayName"]);n!=null&&c(t,["displayName"],n);const o=u(e,["data"]);o!=null&&c(t,["data"],o);const a=u(e,["mimeType"]);return a!=null&&c(t,["mimeType"],a),t}function OE(i,e){const t={},n=u(e,["displayName"]);n!=null&&c(t,["displayName"],n);const o=u(e,["fileUri"]);o!=null&&c(t,["fileUri"],o);const a=u(e,["mimeType"]);return a!=null&&c(t,["mimeType"],a),t}function $E(i,e){const t={},n=u(e,["videoMetadata"]);n!=null&&c(t,["videoMetadata"],FE(i,n));const o=u(e,["thought"]);o!=null&&c(t,["thought"],o);const a=u(e,["inlineData"]);a!=null&&c(t,["inlineData"],UE(i,a));const d=u(e,["fileData"]);d!=null&&c(t,["fileData"],OE(i,d));const f=u(e,["thoughtSignature"]);f!=null&&c(t,["thoughtSignature"],f);const m=u(e,["codeExecutionResult"]);m!=null&&c(t,["codeExecutionResult"],m);const p=u(e,["executableCode"]);p!=null&&c(t,["executableCode"],p);const y=u(e,["functionCall"]);y!=null&&c(t,["functionCall"],y);const _=u(e,["functionResponse"]);_!=null&&c(t,["functionResponse"],_);const x=u(e,["text"]);return x!=null&&c(t,["text"],x),t}function VE(i,e){const t={},n=u(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>$E(i,d))),c(t,["parts"],a)}const o=u(e,["role"]);return o!=null&&c(t,["role"],o),t}function BE(i,e){const t={},n=u(e,["citations"]);return n!=null&&c(t,["citations"],n),t}function zE(i,e){const t={},n=u(e,["content"]);n!=null&&c(t,["content"],VE(i,n));const o=u(e,["citationMetadata"]);o!=null&&c(t,["citationMetadata"],BE(i,o));const a=u(e,["finishMessage"]);a!=null&&c(t,["finishMessage"],a);const d=u(e,["finishReason"]);d!=null&&c(t,["finishReason"],d);const f=u(e,["avgLogprobs"]);f!=null&&c(t,["avgLogprobs"],f);const m=u(e,["groundingMetadata"]);m!=null&&c(t,["groundingMetadata"],m);const p=u(e,["index"]);p!=null&&c(t,["index"],p);const y=u(e,["logprobsResult"]);y!=null&&c(t,["logprobsResult"],y);const _=u(e,["safetyRatings"]);return _!=null&&c(t,["safetyRatings"],_),t}function Rp(i,e){const t={},n=u(e,["candidates"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(y=>zE(i,y))),c(t,["candidates"],p)}const o=u(e,["createTime"]);o!=null&&c(t,["createTime"],o);const a=u(e,["responseId"]);a!=null&&c(t,["responseId"],a);const d=u(e,["modelVersion"]);d!=null&&c(t,["modelVersion"],d);const f=u(e,["promptFeedback"]);f!=null&&c(t,["promptFeedback"],f);const m=u(e,["usageMetadata"]);return m!=null&&c(t,["usageMetadata"],m),t}function GE(i,e){const t={},n=u(e,["truncated"]);n!=null&&c(t,["truncated"],n);const o=u(e,["token_count"]);return o!=null&&c(t,["tokenCount"],o),t}function qE(i,e){const t={},n=u(e,["values"]);n!=null&&c(t,["values"],n);const o=u(e,["statistics"]);return o!=null&&c(t,["statistics"],GE(i,o)),t}function HE(i,e){const t={},n=u(e,["billableCharacterCount"]);return n!=null&&c(t,["billableCharacterCount"],n),t}function WE(i,e){const t={},n=u(e,["predictions[]","embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>qE(i,d))),c(t,["embeddings"],a)}const o=u(e,["metadata"]);return o!=null&&c(t,["metadata"],HE(i,o)),t}function jE(i,e){const t={},n=u(e,["gcsUri"]);n!=null&&c(t,["gcsUri"],n);const o=u(e,["bytesBase64Encoded"]);o!=null&&c(t,["imageBytes"],$n(i,o));const a=u(e,["mimeType"]);return a!=null&&c(t,["mimeType"],a),t}function Dm(i,e){const t={},n=u(e,["safetyAttributes","categories"]);n!=null&&c(t,["categories"],n);const o=u(e,["safetyAttributes","scores"]);o!=null&&c(t,["scores"],o);const a=u(e,["contentType"]);return a!=null&&c(t,["contentType"],a),t}function Du(i,e){const t={},n=u(e,["_self"]);n!=null&&c(t,["image"],jE(i,n));const o=u(e,["raiFilteredReason"]);o!=null&&c(t,["raiFilteredReason"],o);const a=u(e,["_self"]);a!=null&&c(t,["safetyAttributes"],Dm(i,a));const d=u(e,["prompt"]);return d!=null&&c(t,["enhancedPrompt"],d),t}function JE(i,e){const t={},n=u(e,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>Du(i,d))),c(t,["generatedImages"],a)}const o=u(e,["positivePromptSafetyAttributes"]);return o!=null&&c(t,["positivePromptSafetyAttributes"],Dm(i,o)),t}function KE(i,e){const t={},n=u(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Du(i,a))),c(t,["generatedImages"],o)}return t}function YE(i,e){const t={},n=u(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Du(i,a))),c(t,["generatedImages"],o)}return t}function ZE(i,e){const t={},n=u(e,["endpoint"]);n!=null&&c(t,["name"],n);const o=u(e,["deployedModelId"]);return o!=null&&c(t,["deployedModelId"],o),t}function QE(i,e){const t={},n=u(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&c(t,["baseModel"],n);const o=u(e,["createTime"]);o!=null&&c(t,["createTime"],o);const a=u(e,["updateTime"]);return a!=null&&c(t,["updateTime"],a),t}function XE(i,e){const t={},n=u(e,["checkpointId"]);n!=null&&c(t,["checkpointId"],n);const o=u(e,["epoch"]);o!=null&&c(t,["epoch"],o);const a=u(e,["step"]);return a!=null&&c(t,["step"],a),t}function Cu(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["name"],n);const o=u(e,["displayName"]);o!=null&&c(t,["displayName"],o);const a=u(e,["description"]);a!=null&&c(t,["description"],a);const d=u(e,["versionId"]);d!=null&&c(t,["version"],d);const f=u(e,["deployedModels"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(S=>ZE(i,S))),c(t,["endpoints"],x)}const m=u(e,["labels"]);m!=null&&c(t,["labels"],m);const p=u(e,["_self"]);p!=null&&c(t,["tunedModelInfo"],QE(i,p));const y=u(e,["defaultCheckpointId"]);y!=null&&c(t,["defaultCheckpointId"],y);const _=u(e,["checkpoints"]);if(_!=null){let x=_;Array.isArray(x)&&(x=x.map(S=>XE(i,S))),c(t,["checkpoints"],x)}return t}function ek(i,e){const t={},n=u(e,["nextPageToken"]);n!=null&&c(t,["nextPageToken"],n);const o=u(e,["_self"]);if(o!=null){let a=Tm(i,o);Array.isArray(a)&&(a=a.map(d=>Cu(i,d))),c(t,["models"],a)}return t}function tk(){return{}}function nk(i,e){const t={},n=u(e,["totalTokens"]);return n!=null&&c(t,["totalTokens"],n),t}function rk(i,e){const t={},n=u(e,["tokensInfo"]);return n!=null&&c(t,["tokensInfo"],n),t}function ik(i,e){const t={},n=u(e,["gcsUri"]);n!=null&&c(t,["uri"],n);const o=u(e,["bytesBase64Encoded"]);o!=null&&c(t,["videoBytes"],$n(i,o));const a=u(e,["mimeType"]);return a!=null&&c(t,["mimeType"],a),t}function ok(i,e){const t={},n=u(e,["_self"]);return n!=null&&c(t,["video"],ik(i,n)),t}function sk(i,e){const t={},n=u(e,["videos"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>ok(i,f))),c(t,["generatedVideos"],d)}const o=u(e,["raiMediaFilteredCount"]);o!=null&&c(t,["raiMediaFilteredCount"],o);const a=u(e,["raiMediaFilteredReasons"]);return a!=null&&c(t,["raiMediaFilteredReasons"],a),t}function ak(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["name"],n);const o=u(e,["metadata"]);o!=null&&c(t,["metadata"],o);const a=u(e,["done"]);a!=null&&c(t,["done"],a);const d=u(e,["error"]);d!=null&&c(t,["error"],d);const f=u(e,["response"]);return f!=null&&c(t,["response"],sk(i,f)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lk="Content-Type",uk="X-Server-Timeout",ck="User-Agent",xu="x-goog-api-client",dk="1.3.0",fk=`google-genai-sdk/${dk}`,hk="v1beta1",pk="v1beta",Dp=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Lm extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class Su extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class mk{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:hk,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:pk,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,n){const o=[this.getRequestUrlInternal(t)];return n&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[d,f]of Object.entries(e.queryParams))o.searchParams.append(d,String(f));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?n[o]=Object.assign(Object.assign({},n[o]),a):a!==void 0&&(n[o]=a);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,n);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n){if(t&&t.timeout||n){const o=new AbortController,a=o.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>o.abort(),t.timeout),n&&n.addEventListener("abort",()=>{o.abort()}),e.signal=a}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async o=>(await Lp(o),new gu(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async o=>(await Lp(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return jr(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let d="";for(;;){const{done:f,value:m}=yield Be(o.read());if(f){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=a.decode(m);try{const _=JSON.parse(p);if("error"in _){const x=JSON.parse(JSON.stringify(_.error)),S=x.status,k=x.code,I=`got status: ${S}. ${JSON.stringify(_)}`;if(k>=400&&k<500)throw new Lm(I);if(k>=500&&k<600)throw new Su(I)}}catch(_){const x=_;if(x.name==="ClientError"||x.name==="ServerError")throw _}d+=p;let y=d.match(Dp);for(;y;){const _=y[1];try{const x=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Be(new gu(x)),d=d.slice(y[0].length),y=d.match(Dp)}catch(x){throw new Error(`exception parsing stream chunk ${_}. ${x}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},t=fk+" "+this.clientOptions.userAgentExtra;return e[ck]=t,e[xu]=t,e[lk]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[n,o]of Object.entries(e.headers))t.append(n,o);e.timeout&&e.timeout>0&&t.append(uk,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var n;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,d=await a.stat(e);o.sizeBytes=String(d.size);const f=(n=t==null?void 0:t.mimeType)!==null&&n!==void 0?n:d.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;const m=await this.fetchUploadUrl(o,t);return a.upload(e,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var n;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},d=await this.request({path:me("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:o});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(n=d==null?void 0:d.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Lp(i){var e;if(i===void 0)throw new Su("response is undefined");if(!i.ok){const t=i.status,n=i.statusText;let o;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await i.json():o={error:{message:await i.text(),code:i.status,status:i.statusText}};const a=`got status: ${t} ${n}. ${JSON.stringify(o)}`;throw t>=400&&t<500?new Lm(a):t>=500&&t<600?new Su(a):new Error(a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gk="mcp_used/unknown";function Fm(i){for(const e of i)if(Lu(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function Um(i){var e;const t=(e=i[xu])!==null&&e!==void 0?e:"";i[xu]=(t+` ${gk}`).trimStart()}function yk(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Lu(o)))!==null&&n!==void 0?n:!1}function vk(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!Lu(o)))!==null&&n!==void 0?n:!1}function Lu(i){return i!==null&&typeof i=="object"&&i instanceof Fu}function _k(i,e=100){return jr(this,arguments,function*(){let n,o=0;for(;o<e;){const a=yield Be(i.listTools({cursor:n}));for(const d of a.tools)yield yield Be(d),o++;if(!a.nextCursor)break;n=a.nextCursor}})}class Fu{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Fu(e,t)}async initialize(){var e,t,n,o;if(this.mcpTools.length>0)return;const a={},d=[];for(const y of this.mcpClients)try{for(var f=!0,m=(t=void 0,to(_k(y))),p;p=await m.next(),e=p.done,!e;f=!0){o=p.value,f=!1;const _=o;d.push(_);const x=_.name;if(a[x])throw new Error(`Duplicate function name ${x} found in MCP tools. Please ensure function names are unique.`);a[x]=y}}catch(_){t={error:_}}finally{try{!f&&!e&&(n=m.return)&&await n.call(m)}finally{if(t)throw t.error}}this.mcpTools=d,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),kw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const a=await this.functionNameToMcpClient[n.name].callTool({name:n.name,arguments:n.args});t.push({functionResponse:{name:n.name,response:a.isError?{error:a}:a}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function wk(i,e,t){const n=new hw;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data);const a=RS(i,o);Object.assign(n,a),e(n)}class Ck{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),d=Tk(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${f}`;let p=()=>{};const y=new Promise(L=>{p=L}),_=e.callbacks,x=function(){p({})},S=this.apiClient,k={onopen:x,onmessage:L=>{wk(S,_.onmessage,L)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(L){},onclose:(n=_==null?void 0:_.onclose)!==null&&n!==void 0?n:function(L){}},I=this.webSocketFactory.create(m,Sk(d),k);I.connect(),await y;const P=Oe(this.apiClient,e.model),O=Nm(this.apiClient,{model:P}),z=_u(this.apiClient,{setup:O});return I.send(JSON.stringify(z)),new xk(I,this.apiClient)}}class xk{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=jx(this.apiClient,e),n=Pm(this.apiClient,t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Jx(this.apiClient,e),n=_u(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const t=_u(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(qr.PLAY)}pause(){this.sendPlaybackControl(qr.PAUSE)}stop(){this.sendPlaybackControl(qr.STOP)}resetContext(){this.sendPlaybackControl(qr.RESET_CONTEXT)}close(){this.conn.close()}}function Sk(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function Tk(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ek="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function kk(i,e,t){const n=new fw;let o;if(t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),i.isVertexAI()){const a=TS(i,o);Object.assign(n,a)}else{const a=SS(i,o);Object.assign(n,a)}e(n)}class Ak{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new Ck(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,o,a,d,f;const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let y;const _=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&Fm(e.config.tools)&&Um(_);const x=bk(_);if(this.apiClient.isVertexAI())y=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x);else{const $=this.apiClient.getApiKey();let R="BidiGenerateContent",te="key";$!=null&&$.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),R="BidiGenerateContentConstrained",te="access_token"),y=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${R}?${te}=${$}`}let S=()=>{};const k=new Promise($=>{S=$}),I=e.callbacks,P=function(){var $;($=I==null?void 0:I.onopen)===null||$===void 0||$.call(I),S({})},O=this.apiClient,z={onopen:P,onmessage:$=>{kk(O,I.onmessage,$)},onerror:(t=I==null?void 0:I.onerror)!==null&&t!==void 0?t:function($){},onclose:(n=I==null?void 0:I.onclose)!==null&&n!==void 0?n:function($){}},L=this.webSocketFactory.create(y,Pk(x),z);L.connect(),await k;let H=Oe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&H.startsWith("publishers/")){const $=this.apiClient.getProject(),R=this.apiClient.getLocation();H=`projects/${$}/locations/${R}/`+H}let X={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Os.AUDIO]}:e.config.responseModalities=[Os.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(f=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&f!==void 0?f:[],Y=[];for(const $ of F)if(this.isCallableTool($)){const R=$;Y.push(await R.tool())}else Y.push($);Y.length>0&&(e.config.tools=Y);const U={model:H,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=Vx(this.apiClient,U):X=$x(this.apiClient,U),delete X.config,L.send(JSON.stringify(X)),new Nk(L,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Ik={turnComplete:!0};class Nk{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let n=[];try{n=qt(e,t.turns),e.isVertexAI()?n=n.map(o=>ii(e,o)):n=n.map(o=>qs(e,o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?n=t.functionResponses:n=[t.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const a of n){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(Ek)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Ik),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Wx(this.apiClient,e)}:t={realtimeInput:Hx(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Pk(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function bk(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fp=10;function Up(i){var e,t,n;if(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const d of(t=i==null?void 0:i.tools)!==null&&t!==void 0?t:[])if(Ps(d)){o=!0;break}if(!o)return!0;const a=(n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ps(i){return"callTool"in i&&typeof i.callTool=="function"}function Op(i){var e;return!(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mk extends ri{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var n,o,a,d,f;const m=await this.processParamsForMcpUsage(t);if(!yk(t)||Up(t.config))return await this.generateContentInternal(m);if(vk(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,y;const _=qt(this.apiClient,m.contents),x=(a=(o=(n=m.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:Fp;let S=0;for(;S<x&&(p=await this.generateContentInternal(m),!(!p.functionCalls||p.functionCalls.length===0));){const k=p.candidates[0].content,I=[];for(const P of(f=(d=t.config)===null||d===void 0?void 0:d.tools)!==null&&f!==void 0?f:[])if(Ps(P)){const z=await P.callTool(p.functionCalls);I.push(...z)}S++,y={role:"user",parts:I},m.contents=qt(this.apiClient,m.contents),m.contents.push(k),m.contents.push(y),Op(m.config)&&(_.push(k),_.push(y))}return Op(m.config)&&(p.automaticFunctionCallingHistory=_),p},this.generateContentStream=async t=>{if(Up(t.config)){const n=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(n=>{var o;let a;const d=[];if(n!=null&&n.generatedImages)for(const m of n.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((o=m==null?void 0:m.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=m==null?void 0:m.safetyAttributes:d.push(m);let f;return a?f={generatedImages:d,positivePromptSafetyAttributes:a}:f={generatedImages:d},f}),this.list=async t=>{var n;const d={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((n=d.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new Gs(ti.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(d),d)},this.editImage=async t=>{const n={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(n.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async t=>{let n={numberOfImages:1,mode:"upscale"};t.config&&(n=Object.assign(Object.assign({},n),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:n};return await this.upscaleImageInternal(o)}}async processParamsForMcpUsage(e){var t,n,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const d=await Promise.all(a.map(async m=>Ps(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(f.config.tools=d,e.config&&e.config.tools&&Fm(e.config.tools)){const m=(o=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&o!==void 0?o:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),Um(p),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return f}async initAfcToolsMap(e){var t,n,o;const a=new Map;for(const d of(n=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ps(d)){const f=d,m=await f.tool();for(const p of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,f)}}return a}async processAfcStream(e){var t,n,o;const a=(o=(n=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&o!==void 0?o:Fp;let d=!1,f=0;const m=await this.initAfcToolsMap(e);return function(p,y,_){var x,S;return jr(this,arguments,function*(){for(var k,I,P,O;f<a;){d&&(f++,d=!1);const X=yield Be(p.processParamsForMcpUsage(_)),F=yield Be(p.generateContentStreamInternal(X)),Y=[],U=[];try{for(var z=!0,L=(I=void 0,to(F)),H;H=yield Be(L.next()),k=H.done,!k;z=!0){O=H.value,z=!1;const $=O;if(yield yield Be($),$.candidates&&(!((x=$.candidates[0])===null||x===void 0)&&x.content)){U.push($.candidates[0].content);for(const R of(S=$.candidates[0].content.parts)!==null&&S!==void 0?S:[])if(f<a&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(R.functionCall.name)){const te=yield Be(y.get(R.functionCall.name).callTool([R.functionCall]));Y.push(...te)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch($){I={error:$}}finally{try{!z&&!k&&(P=L.return)&&(yield Be(P.call(L)))}finally{if(I)throw I.error}}if(Y.length>0){d=!0;const $=new ji;$.candidates=[{content:{role:"user",parts:Y}}],yield yield Be($);const R=[];R.push(...U),R.push({role:"user",parts:Y});const te=qt(p.apiClient,_.contents).concat(R);_.contents=te}else break}})}(this,m,e)}async generateContentInternal(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=bp(this.apiClient,e);return f=me("{model}:generateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(y=>{const _=Rp(this.apiClient,y),x=new ji;return Object.assign(x,_),x})}else{const p=Pp(this.apiClient,e);return f=me("{model}:generateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>{const _=Mp(this.apiClient,y),x=new ji;return Object.assign(x,_),x})}}async generateContentStreamInternal(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=bp(this.apiClient,e);f=me("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p.config,delete p._url,delete p._query;const y=this.apiClient;return d=y.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),d.then(function(_){return jr(this,arguments,function*(){var x,S,k,I;try{for(var P=!0,O=to(_),z;z=yield Be(O.next()),x=z.done,!x;P=!0){I=z.value,P=!1;const H=Rp(y,yield Be(I.json())),X=new ji;Object.assign(X,H),yield yield Be(X)}}catch(L){S={error:L}}finally{try{!P&&!x&&(k=O.return)&&(yield Be(k.call(O)))}finally{if(S)throw S.error}}})})}else{const p=Pp(this.apiClient,e);f=me("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p.config,delete p._url,delete p._query;const y=this.apiClient;return d=y.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),d.then(function(_){return jr(this,arguments,function*(){var x,S,k,I;try{for(var P=!0,O=to(_),z;z=yield Be(O.next()),x=z.done,!x;P=!0){I=z.value,P=!1;const H=Mp(y,yield Be(I.json())),X=new ji;Object.assign(X,H),yield yield Be(X)}}catch(L){S={error:L}}finally{try{!P&&!x&&(k=O.return)&&(yield Be(k.call(O)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=qT(this.apiClient,e);return f=me("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(y=>{const _=WE(this.apiClient,y),x=new cp;return Object.assign(x,_),x})}else{const p=iT(this.apiClient,e);return f=me("{model}:batchEmbedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>{const _=TE(this.apiClient,y),x=new cp;return Object.assign(x,_),x})}}async generateImagesInternal(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=WT(this.apiClient,e);return f=me("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(y=>{const _=JE(this.apiClient,y),x=new dp;return Object.assign(x,_),x})}else{const p=sT(this.apiClient,e);return f=me("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>{const _=AE(this.apiClient,y),x=new dp;return Object.assign(x,_),x})}}async editImageInternal(e){var t,n;let o,a="",d={};if(this.apiClient.isVertexAI()){const f=XT(this.apiClient,e);return a=me("{model}:predict",f._url),d=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>{const p=KE(this.apiClient,m),y=new sw;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let o,a="",d={};if(this.apiClient.isVertexAI()){const f=tE(this.apiClient,e);return a=me("{model}:predict",f._url),d=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>{const p=YE(this.apiClient,m),y=new aw;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=nE(this.apiClient,e);return f=me("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(y=>Cu(this.apiClient,y))}else{const p=aT(this.apiClient,e);return f=me("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>wu(this.apiClient,y))}}async listInternal(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=iE(this.apiClient,e);return f=me("{models_url}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(y=>{const _=ek(this.apiClient,y),x=new fp;return Object.assign(x,_),x})}else{const p=uT(this.apiClient,e);return f=me("{models_url}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>{const _=NE(this.apiClient,y),x=new fp;return Object.assign(x,_),x})}}async update(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=sE(this.apiClient,e);return f=me("{model}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(y=>Cu(this.apiClient,y))}else{const p=dT(this.apiClient,e);return f=me("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>wu(this.apiClient,y))}}async delete(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=aE(this.apiClient,e);return f=me("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(()=>{const y=tk(),_=new hp;return Object.assign(_,y),_})}else{const p=fT(this.apiClient,e);return f=me("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(()=>{const y=PE(),_=new hp;return Object.assign(_,y),_})}}async countTokens(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=uE(this.apiClient,e);return f=me("{model}:countTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(y=>{const _=nk(this.apiClient,y),x=new pp;return Object.assign(x,_),x})}else{const p=pT(this.apiClient,e);return f=me("{model}:countTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>{const _=bE(this.apiClient,y),x=new pp;return Object.assign(x,_),x})}}async computeTokens(e){var t,n;let o,a="",d={};if(this.apiClient.isVertexAI()){const f=cE(this.apiClient,e);return a=me("{model}:computeTokens",f._url),d=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>{const p=rk(this.apiClient,m),y=new lw;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=fE(this.apiClient,e);return f=me("{model}:predictLongRunning",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(y=>ak(this.apiClient,y))}else{const p=yT(this.apiClient,e);return f=me("{model}:predictLongRunning",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>LE(this.apiClient,y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rk(i,e){const t={},n=u(e,["operationName"]);n!=null&&c(t,["_url","operationName"],n);const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function Dk(i,e){const t={},n=u(e,["operationName"]);n!=null&&c(t,["_url","operationName"],n);const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function Lk(i,e){const t={},n=u(e,["operationName"]);n!=null&&c(t,["operationName"],n);const o=u(e,["resourceName"]);o!=null&&c(t,["_url","resourceName"],o);const a=u(e,["config"]);return a!=null&&c(t,["config"],a),t}function Fk(i,e){const t={},n=u(e,["video","uri"]);n!=null&&c(t,["uri"],n);const o=u(e,["video","encodedVideo"]);o!=null&&c(t,["videoBytes"],$n(i,o));const a=u(e,["encoding"]);return a!=null&&c(t,["mimeType"],a),t}function Uk(i,e){const t={},n=u(e,["_self"]);return n!=null&&c(t,["video"],Fk(i,n)),t}function Ok(i,e){const t={},n=u(e,["generatedSamples"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>Uk(i,f))),c(t,["generatedVideos"],d)}const o=u(e,["raiMediaFilteredCount"]);o!=null&&c(t,["raiMediaFilteredCount"],o);const a=u(e,["raiMediaFilteredReasons"]);return a!=null&&c(t,["raiMediaFilteredReasons"],a),t}function $k(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["name"],n);const o=u(e,["metadata"]);o!=null&&c(t,["metadata"],o);const a=u(e,["done"]);a!=null&&c(t,["done"],a);const d=u(e,["error"]);d!=null&&c(t,["error"],d);const f=u(e,["response","generateVideoResponse"]);return f!=null&&c(t,["response"],Ok(i,f)),t}function Vk(i,e){const t={},n=u(e,["gcsUri"]);n!=null&&c(t,["uri"],n);const o=u(e,["bytesBase64Encoded"]);o!=null&&c(t,["videoBytes"],$n(i,o));const a=u(e,["mimeType"]);return a!=null&&c(t,["mimeType"],a),t}function Bk(i,e){const t={},n=u(e,["_self"]);return n!=null&&c(t,["video"],Vk(i,n)),t}function zk(i,e){const t={},n=u(e,["videos"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>Bk(i,f))),c(t,["generatedVideos"],d)}const o=u(e,["raiMediaFilteredCount"]);o!=null&&c(t,["raiMediaFilteredCount"],o);const a=u(e,["raiMediaFilteredReasons"]);return a!=null&&c(t,["raiMediaFilteredReasons"],a),t}function $p(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["name"],n);const o=u(e,["metadata"]);o!=null&&c(t,["metadata"],o);const a=u(e,["done"]);a!=null&&c(t,["done"],a);const d=u(e,["error"]);d!=null&&c(t,["error"],d);const f=u(e,["response"]);return f!=null&&c(t,["response"],zk(i,f)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gk extends ri{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;return n&&"httpOptions"in n&&(a=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}})}else return this.getVideosOperationInternal({operationName:t.name,config:n})}async getVideosOperationInternal(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=Dk(this.apiClient,e);return f=me("{operationName}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(y=>$p(this.apiClient,y))}else{const p=Rk(this.apiClient,e);return f=me("{operationName}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>$k(this.apiClient,y))}}async fetchPredictVideosOperationInternal(e){var t,n;let o,a="",d={};if(this.apiClient.isVertexAI()){const f=Lk(this.apiClient,e);return a=me("{resourceName}:fetchPredictOperation",f._url),d=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>$p(this.apiClient,m))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qk(i,e){const t={},n=u(e,["voiceName"]);return n!=null&&c(t,["voiceName"],n),t}function Om(i,e){const t={},n=u(e,["prebuiltVoiceConfig"]);return n!=null&&c(t,["prebuiltVoiceConfig"],qk(i,n)),t}function Hk(i,e){const t={},n=u(e,["speaker"]);n!=null&&c(t,["speaker"],n);const o=u(e,["voiceConfig"]);return o!=null&&c(t,["voiceConfig"],Om(i,o)),t}function Wk(i,e){const t={},n=u(e,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Hk(i,a))),c(t,["speakerVoiceConfigs"],o)}return t}function jk(i,e){const t={},n=u(e,["voiceConfig"]);n!=null&&c(t,["voiceConfig"],Om(i,n));const o=u(e,["multiSpeakerVoiceConfig"]);o!=null&&c(t,["multiSpeakerVoiceConfig"],Wk(i,o));const a=u(e,["languageCode"]);return a!=null&&c(t,["languageCode"],a),t}function Jk(i,e){const t={},n=u(e,["fps"]);n!=null&&c(t,["fps"],n);const o=u(e,["endOffset"]);o!=null&&c(t,["endOffset"],o);const a=u(e,["startOffset"]);return a!=null&&c(t,["startOffset"],a),t}function Kk(i,e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["data"]);n!=null&&c(t,["data"],n);const o=u(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function Yk(i,e){const t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const o=u(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function Zk(i,e){const t={},n=u(e,["videoMetadata"]);n!=null&&c(t,["videoMetadata"],Jk(i,n));const o=u(e,["thought"]);o!=null&&c(t,["thought"],o);const a=u(e,["inlineData"]);a!=null&&c(t,["inlineData"],Kk(i,a));const d=u(e,["fileData"]);d!=null&&c(t,["fileData"],Yk(i,d));const f=u(e,["thoughtSignature"]);f!=null&&c(t,["thoughtSignature"],f);const m=u(e,["codeExecutionResult"]);m!=null&&c(t,["codeExecutionResult"],m);const p=u(e,["executableCode"]);p!=null&&c(t,["executableCode"],p);const y=u(e,["functionCall"]);y!=null&&c(t,["functionCall"],y);const _=u(e,["functionResponse"]);_!=null&&c(t,["functionResponse"],_);const x=u(e,["text"]);return x!=null&&c(t,["text"],x),t}function Qk(i,e){const t={},n=u(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>Zk(i,d))),c(t,["parts"],a)}const o=u(e,["role"]);return o!=null&&c(t,["role"],o),t}function Xk(i,e){const t={},n=u(e,["behavior"]);n!=null&&c(t,["behavior"],n);const o=u(e,["description"]);o!=null&&c(t,["description"],o);const a=u(e,["name"]);a!=null&&c(t,["name"],a);const d=u(e,["parameters"]);d!=null&&c(t,["parameters"],d);const f=u(e,["response"]);return f!=null&&c(t,["response"],f),t}function eA(i,e){const t={},n=u(e,["startTime"]);n!=null&&c(t,["startTime"],n);const o=u(e,["endTime"]);return o!=null&&c(t,["endTime"],o),t}function tA(i,e){const t={},n=u(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],eA(i,n)),t}function nA(i,e){const t={},n=u(e,["mode"]);n!=null&&c(t,["mode"],n);const o=u(e,["dynamicThreshold"]);return o!=null&&c(t,["dynamicThreshold"],o),t}function rA(i,e){const t={},n=u(e,["dynamicRetrievalConfig"]);return n!=null&&c(t,["dynamicRetrievalConfig"],nA(i,n)),t}function iA(){return{}}function oA(i,e){const t={},n=u(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>Xk(i,p))),c(t,["functionDeclarations"],m)}if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(e,["googleSearch"]);o!=null&&c(t,["googleSearch"],tA(i,o));const a=u(e,["googleSearchRetrieval"]);if(a!=null&&c(t,["googleSearchRetrieval"],rA(i,a)),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(e,["urlContext"])!=null&&c(t,["urlContext"],iA());const f=u(e,["codeExecution"]);return f!=null&&c(t,["codeExecution"],f),t}function sA(i,e){const t={},n=u(e,["handle"]);if(n!=null&&c(t,["handle"],n),u(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Vp(){return{}}function aA(i,e){const t={},n=u(e,["disabled"]);n!=null&&c(t,["disabled"],n);const o=u(e,["startOfSpeechSensitivity"]);o!=null&&c(t,["startOfSpeechSensitivity"],o);const a=u(e,["endOfSpeechSensitivity"]);a!=null&&c(t,["endOfSpeechSensitivity"],a);const d=u(e,["prefixPaddingMs"]);d!=null&&c(t,["prefixPaddingMs"],d);const f=u(e,["silenceDurationMs"]);return f!=null&&c(t,["silenceDurationMs"],f),t}function lA(i,e){const t={},n=u(e,["automaticActivityDetection"]);n!=null&&c(t,["automaticActivityDetection"],aA(i,n));const o=u(e,["activityHandling"]);o!=null&&c(t,["activityHandling"],o);const a=u(e,["turnCoverage"]);return a!=null&&c(t,["turnCoverage"],a),t}function uA(i,e){const t={},n=u(e,["targetTokens"]);return n!=null&&c(t,["targetTokens"],n),t}function cA(i,e){const t={},n=u(e,["triggerTokens"]);n!=null&&c(t,["triggerTokens"],n);const o=u(e,["slidingWindow"]);return o!=null&&c(t,["slidingWindow"],uA(i,o)),t}function dA(i,e){const t={},n=u(e,["proactiveAudio"]);return n!=null&&c(t,["proactiveAudio"],n),t}function fA(i,e,t){const n={},o=u(e,["generationConfig"]);t!==void 0&&o!=null&&c(t,["setup","generationConfig"],o);const a=u(e,["responseModalities"]);t!==void 0&&a!=null&&c(t,["setup","generationConfig","responseModalities"],a);const d=u(e,["temperature"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","temperature"],d);const f=u(e,["topP"]);t!==void 0&&f!=null&&c(t,["setup","generationConfig","topP"],f);const m=u(e,["topK"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","topK"],m);const p=u(e,["maxOutputTokens"]);t!==void 0&&p!=null&&c(t,["setup","generationConfig","maxOutputTokens"],p);const y=u(e,["mediaResolution"]);t!==void 0&&y!=null&&c(t,["setup","generationConfig","mediaResolution"],y);const _=u(e,["seed"]);t!==void 0&&_!=null&&c(t,["setup","generationConfig","seed"],_);const x=u(e,["speechConfig"]);t!==void 0&&x!=null&&c(t,["setup","generationConfig","speechConfig"],jk(i,Mu(i,x)));const S=u(e,["enableAffectiveDialog"]);t!==void 0&&S!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],S);const k=u(e,["systemInstruction"]);t!==void 0&&k!=null&&c(t,["setup","systemInstruction"],Qk(i,ft(i,k)));const I=u(e,["tools"]);if(t!==void 0&&I!=null){let F=lo(i,I);Array.isArray(F)&&(F=F.map(Y=>oA(i,ao(i,Y)))),c(t,["setup","tools"],F)}const P=u(e,["sessionResumption"]);t!==void 0&&P!=null&&c(t,["setup","sessionResumption"],sA(i,P));const O=u(e,["inputAudioTranscription"]);t!==void 0&&O!=null&&c(t,["setup","inputAudioTranscription"],Vp());const z=u(e,["outputAudioTranscription"]);t!==void 0&&z!=null&&c(t,["setup","outputAudioTranscription"],Vp());const L=u(e,["realtimeInputConfig"]);t!==void 0&&L!=null&&c(t,["setup","realtimeInputConfig"],lA(i,L));const H=u(e,["contextWindowCompression"]);t!==void 0&&H!=null&&c(t,["setup","contextWindowCompression"],cA(i,H));const X=u(e,["proactivity"]);return t!==void 0&&X!=null&&c(t,["setup","proactivity"],dA(i,X)),n}function hA(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["setup","model"],Oe(i,n));const o=u(e,["config"]);return o!=null&&c(t,["config"],fA(i,o,t)),t}function pA(i,e,t){const n={},o=u(e,["expireTime"]);t!==void 0&&o!=null&&c(t,["expireTime"],o);const a=u(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&c(t,["newSessionExpireTime"],a);const d=u(e,["uses"]);t!==void 0&&d!=null&&c(t,["uses"],d);const f=u(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&c(t,["bidiGenerateContentSetup"],hA(i,f));const m=u(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&c(t,["fieldMask"],m),n}function mA(i,e){const t={},n=u(e,["config"]);return n!=null&&c(t,["config"],pA(i,n,t)),t}function gA(i,e){const t={},n=u(e,["name"]);return n!=null&&c(t,["name"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yA(i){const e=[];for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)){const n=i[t];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const o=Object.keys(n).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function vA(i,e){let t=null;const n=i.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const a=n.setup;typeof a=="object"&&a!==null?(i.bidiGenerateContentSetup=a,t=a):delete i.bidiGenerateContentSetup}else n!==void 0&&delete i.bidiGenerateContentSetup;const o=i.fieldMask;if(t){const a=yA(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?i.fieldMask=a:delete i.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(p=>d.includes(p)?`generationConfig.${p}`:p));const m=[];a&&m.push(a),f.length>0&&m.push(...f),m.length>0?i.fieldMask=m.join(","):delete i.fieldMask}else delete i.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?i.fieldMask=o.join(","):delete i.fieldMask;return i}class _A extends ri{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let o,a="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=mA(this.apiClient,e);a=me("auth_tokens",f._url),d=f._query,delete f.config,delete f._url,delete f._query;const m=vA(f,e.config);return o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),o.then(p=>gA(this.apiClient,p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wA(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["_url","name"],n);const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function CA(i,e,t){const n={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const a=u(e,["pageToken"]);t!==void 0&&a!=null&&c(t,["_query","pageToken"],a);const d=u(e,["filter"]);return t!==void 0&&d!=null&&c(t,["_query","filter"],d),n}function xA(i,e){const t={},n=u(e,["config"]);return n!=null&&c(t,["config"],CA(i,n,t)),t}function SA(i,e){const t={},n=u(e,["textInput"]);n!=null&&c(t,["textInput"],n);const o=u(e,["output"]);return o!=null&&c(t,["output"],o),t}function TA(i,e){const t={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(e,["examples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>SA(i,a))),c(t,["examples","examples"],o)}return t}function EA(i,e,t){const n={};if(u(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=u(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&c(t,["displayName"],o),u(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=u(e,["epochCount"]);t!==void 0&&a!=null&&c(t,["tuningTask","hyperparameters","epochCount"],a);const d=u(e,["learningRateMultiplier"]);if(d!=null&&c(n,["tuningTask","hyperparameters","learningRateMultiplier"],d),u(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=u(e,["batchSize"]);t!==void 0&&f!=null&&c(t,["tuningTask","hyperparameters","batchSize"],f);const m=u(e,["learningRate"]);return t!==void 0&&m!=null&&c(t,["tuningTask","hyperparameters","learningRate"],m),n}function kA(i,e){const t={},n=u(e,["baseModel"]);n!=null&&c(t,["baseModel"],n);const o=u(e,["trainingDataset"]);o!=null&&c(t,["tuningTask","trainingData"],TA(i,o));const a=u(e,["config"]);return a!=null&&c(t,["config"],EA(i,a,t)),t}function AA(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["_url","name"],n);const o=u(e,["config"]);return o!=null&&c(t,["config"],o),t}function IA(i,e,t){const n={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const a=u(e,["pageToken"]);t!==void 0&&a!=null&&c(t,["_query","pageToken"],a);const d=u(e,["filter"]);return t!==void 0&&d!=null&&c(t,["_query","filter"],d),n}function NA(i,e){const t={},n=u(e,["config"]);return n!=null&&c(t,["config"],IA(i,n,t)),t}function PA(i,e,t){const n={},o=u(e,["gcsUri"]);if(t!==void 0&&o!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],o),u(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function bA(i,e){const t={},n=u(e,["gcsUri"]);return n!=null&&c(t,["validationDatasetUri"],n),t}function MA(i,e,t){const n={},o=u(e,["validationDataset"]);t!==void 0&&o!=null&&c(t,["supervisedTuningSpec"],bA(i,o));const a=u(e,["tunedModelDisplayName"]);t!==void 0&&a!=null&&c(t,["tunedModelDisplayName"],a);const d=u(e,["description"]);t!==void 0&&d!=null&&c(t,["description"],d);const f=u(e,["epochCount"]);t!==void 0&&f!=null&&c(t,["supervisedTuningSpec","hyperParameters","epochCount"],f);const m=u(e,["learningRateMultiplier"]);t!==void 0&&m!=null&&c(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m);const p=u(e,["exportLastCheckpointOnly"]);t!==void 0&&p!=null&&c(t,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const y=u(e,["adapterSize"]);if(t!==void 0&&y!=null&&c(t,["supervisedTuningSpec","hyperParameters","adapterSize"],y),u(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function RA(i,e){const t={},n=u(e,["baseModel"]);n!=null&&c(t,["baseModel"],n);const o=u(e,["trainingDataset"]);o!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],PA(i,o,t));const a=u(e,["config"]);return a!=null&&c(t,["config"],MA(i,a,t)),t}function DA(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["model"],n);const o=u(e,["name"]);return o!=null&&c(t,["endpoint"],o),t}function $m(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["name"],n);const o=u(e,["state"]);o!=null&&c(t,["state"],Cm(i,o));const a=u(e,["createTime"]);a!=null&&c(t,["createTime"],a);const d=u(e,["tuningTask","startTime"]);d!=null&&c(t,["startTime"],d);const f=u(e,["tuningTask","completeTime"]);f!=null&&c(t,["endTime"],f);const m=u(e,["updateTime"]);m!=null&&c(t,["updateTime"],m);const p=u(e,["description"]);p!=null&&c(t,["description"],p);const y=u(e,["baseModel"]);y!=null&&c(t,["baseModel"],y);const _=u(e,["_self"]);_!=null&&c(t,["tunedModel"],DA(i,_));const x=u(e,["distillationSpec"]);x!=null&&c(t,["distillationSpec"],x);const S=u(e,["experiment"]);S!=null&&c(t,["experiment"],S);const k=u(e,["labels"]);k!=null&&c(t,["labels"],k);const I=u(e,["pipelineJob"]);I!=null&&c(t,["pipelineJob"],I);const P=u(e,["serviceAccount"]);P!=null&&c(t,["serviceAccount"],P);const O=u(e,["tunedModelDisplayName"]);return O!=null&&c(t,["tunedModelDisplayName"],O),t}function LA(i,e){const t={},n=u(e,["nextPageToken"]);n!=null&&c(t,["nextPageToken"],n);const o=u(e,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>$m(i,d))),c(t,["tuningJobs"],a)}return t}function FA(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["name"],n);const o=u(e,["metadata"]);o!=null&&c(t,["metadata"],o);const a=u(e,["done"]);a!=null&&c(t,["done"],a);const d=u(e,["error"]);return d!=null&&c(t,["error"],d),t}function UA(i,e){const t={},n=u(e,["checkpointId"]);n!=null&&c(t,["checkpointId"],n);const o=u(e,["epoch"]);o!=null&&c(t,["epoch"],o);const a=u(e,["step"]);a!=null&&c(t,["step"],a);const d=u(e,["endpoint"]);return d!=null&&c(t,["endpoint"],d),t}function OA(i,e){const t={},n=u(e,["model"]);n!=null&&c(t,["model"],n);const o=u(e,["endpoint"]);o!=null&&c(t,["endpoint"],o);const a=u(e,["checkpoints"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>UA(i,f))),c(t,["checkpoints"],d)}return t}function Tu(i,e){const t={},n=u(e,["name"]);n!=null&&c(t,["name"],n);const o=u(e,["state"]);o!=null&&c(t,["state"],Cm(i,o));const a=u(e,["createTime"]);a!=null&&c(t,["createTime"],a);const d=u(e,["startTime"]);d!=null&&c(t,["startTime"],d);const f=u(e,["endTime"]);f!=null&&c(t,["endTime"],f);const m=u(e,["updateTime"]);m!=null&&c(t,["updateTime"],m);const p=u(e,["error"]);p!=null&&c(t,["error"],p);const y=u(e,["description"]);y!=null&&c(t,["description"],y);const _=u(e,["baseModel"]);_!=null&&c(t,["baseModel"],_);const x=u(e,["tunedModel"]);x!=null&&c(t,["tunedModel"],OA(i,x));const S=u(e,["supervisedTuningSpec"]);S!=null&&c(t,["supervisedTuningSpec"],S);const k=u(e,["tuningDataStats"]);k!=null&&c(t,["tuningDataStats"],k);const I=u(e,["encryptionSpec"]);I!=null&&c(t,["encryptionSpec"],I);const P=u(e,["partnerModelTuningSpec"]);P!=null&&c(t,["partnerModelTuningSpec"],P);const O=u(e,["distillationSpec"]);O!=null&&c(t,["distillationSpec"],O);const z=u(e,["experiment"]);z!=null&&c(t,["experiment"],z);const L=u(e,["labels"]);L!=null&&c(t,["labels"],L);const H=u(e,["pipelineJob"]);H!=null&&c(t,["pipelineJob"],H);const X=u(e,["serviceAccount"]);X!=null&&c(t,["serviceAccount"],X);const F=u(e,["tunedModelDisplayName"]);return F!=null&&c(t,["tunedModelDisplayName"],F),t}function $A(i,e){const t={},n=u(e,["nextPageToken"]);n!=null&&c(t,["nextPageToken"],n);const o=u(e,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>Tu(i,d))),c(t,["tuningJobs"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VA extends ri{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Gs(ti.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const n=await this.tuneMldevInternal(t);let o="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?o=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(o=n.name.split("/operations/")[0]),{name:o,state:mu.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=AA(this.apiClient,e);return f=me("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(y=>Tu(this.apiClient,y))}else{const p=wA(this.apiClient,e);return f=me("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>$m(this.apiClient,y))}}async listInternal(e){var t,n,o,a;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=NA(this.apiClient,e);return f=me("tuningJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),d.then(y=>{const _=$A(this.apiClient,y),x=new mp;return Object.assign(x,_),x})}else{const p=xA(this.apiClient,e);return f=me("tunedModels",p._url),m=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>{const _=LA(this.apiClient,y),x=new mp;return Object.assign(x,_),x})}}async tuneInternal(e){var t,n;let o,a="",d={};if(this.apiClient.isVertexAI()){const f=RA(this.apiClient,e);return a=me("tuningJobs",f._url),d=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>Tu(this.apiClient,m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let o,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=kA(this.apiClient,e);return a=me("tunedModels",f._url),d=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),o.then(m=>FA(this.apiClient,m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BA{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const zA=1024*1024*8,GA=3,qA=1e3,HA=2,Yl="x-goog-upload-status";async function WA(i,e,t){var n,o,a;let d=0,f=0,m=new gu(new Response),p="upload";for(d=i.size;f<d;){const _=Math.min(zA,d-f),x=i.slice(f,f+_);f+_>=d&&(p+=", finalize");let S=0,k=qA;for(;S<GA&&(m=await t.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(f),"Content-Length":String(_)}}}),!(!((n=m==null?void 0:m.headers)===null||n===void 0)&&n[Yl]));)S++,await JA(k),k=k*HA;if(f+=_,((o=m==null?void 0:m.headers)===null||o===void 0?void 0:o[Yl])!=="active")break;if(d<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const y=await(m==null?void 0:m.json());if(((a=m==null?void 0:m.headers)===null||a===void 0?void 0:a[Yl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return y.file}async function jA(i){return{size:i.size,type:i.type}}function JA(i){return new Promise(e=>setTimeout(e,i))}class KA{async upload(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WA(e,t,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jA(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YA{create(e,t,n){return new ZA(e,t,n)}}class ZA{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bp="x-goog-api-key";class QA{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Bp)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Bp,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XA="gl-node/";class Vm{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const n=ow(e,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const o=new QA(this.apiKey);this.apiClient=new mk({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:XA+"web",uploader:new KA,downloader:new BA}),this.models=new Mk(this.apiClient),this.live=new Ak(this.apiClient,o,new YA),this.chats=new bC(this.models,this.apiClient),this.caches=new IC(this.apiClient),this.files=new qC(this.apiClient),this.operations=new Gk(this.apiClient),this.authTokens=new _A(this.apiClient),this.tunings=new VA(this.apiClient)}}const eI={BASE_URL:"/InfluencerAI/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GEMINI_API_KEY:"AIzaSyC9AWeeHK4IKsGo_yDY6x6aQTWlbFeFZVA",VITE_PUBLIC_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2ZW5oZXduaWNtcGd4cWh0Y2ZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg3ODA3MDcsImV4cCI6MjA2NDM1NjcwN30.-e97RGlYLXjzBzWcy23TXb3XLiMffYTD7e-26ayhnlY",VITE_PUBLIC_SUPABASE_URL:"https://uvenhewnicmpgxqhtcfd.supabase.co"};var Zl={};const tI=({campaign:i,onCampaignUpdate:e,advanceWorkflowStep:t,currentUserId:n})=>{var fe;const[o,a]=V.useState(null),[d,f]=V.useState(null),[m,p]=V.useState(null),[y,_]=V.useState(""),[x,S]=V.useState(!1),[k,I]=V.useState(null),[P,O]=V.useState(!1),[z,L]=V.useState([]),[H,X]=V.useState(null),F=V.useRef(P);V.useEffect(()=>{F.current=P},[P]),V.useEffect(()=>{try{const j=typeof process<"u"&&Zl&&Zl.API_KEY?Zl.API_KEY:typeof import.meta<"u"&&eI?"AIzaSyC9AWeeHK4IKsGo_yDY6x6aQTWlbFeFZVA":null;if(j)o||a(new Vm({apiKey:j}));else{const oe="Gemini API Key not found. Outreach message generation will be disabled. Set API_KEY or VITE_GEMINI_API_KEY in your environment.";console.warn(oe),d||f(oe)}}catch(j){console.error("Error initializing GoogleGenAI:",j),d||f("Failed to initialize AI Client. Message generation disabled.")}},[o,d]);const Y=V.useCallback(j=>{L(oe=>[...oe,`${new Date().toLocaleTimeString()}: ${j}`])},[]),U=V.useCallback(async j=>{if(!o)throw new Error("Gemini API Client not initialized. Check API Key.");const oe=`Generate a friendly and concise outreach email to an influencer named ${j.name} (niche: ${j.niche}) for a marketing campaign titled "${i.name}". 
The campaign goals are: "${i.goals||"to promote our new product/service"}". 
The campaign budget is approximately ${i.budget?`$${i.budget}`:"negotiable"}.
Keep the tone professional but approachable. Express interest in their work and propose a potential collaboration.
Include placeholders like [Your Company Name] and [Your Name/Contact Info]. Limit to 150 words.`;Y(`Generating AI message for ${j.name} with prompt...`);const q=await o.models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:oe});return Y(`AI message successfully generated for ${j.name}.`),q.text},[i.name,i.goals,i.budget,o,Y]),$=V.useCallback(async(j,oe)=>{Y(`Simulating sending message to ${j.name}...`),await new Promise(q=>setTimeout(q,1500)),await Dt(i.id,"Outreach Message Sent (Simulated)",{influencer_id:j.id,influencer_name:j.name,message_preview:oe.substring(0,70)+"...",brand_user_id:n},"success"),Y(`Message simulation complete for ${j.name}.`)},[i.id,n,Y]);V.useEffect(()=>{let j=!1;return(async()=>{if(i.current_workflow_step==="Creator Matching Complete"&&i.matched_influencers_data&&i.matched_influencers_data.length>0&&o&&!F.current){O(!0),L(q=>["Starting automated outreach sequence..."]),I(null);try{for(let q=0;q<i.matched_influencers_data.length;q++){const B=i.matched_influencers_data[q];if(j||!F.current)throw Y("Automation stopped during loop (detected pre-processing)."),new Error("Auto-processing was cancelled or stopped.");X(B.name),Y(`[${q+1}/${i.matched_influencers_data.length}] Processing ${B.name}: Generating message...`);const ee=await U(B);if(j||!F.current)throw Y(`Automation stopped for ${B.name} before sending.`),new Error("Auto-processing was cancelled or stopped before sending.");await $(B,ee)}if(j||!F.current)throw Y("Automation completed processing all influencers but was then stopped before final step."),new Error("Auto-processing completed loop but was stopped before final workflow advance.");Y("All influencers processed successfully."),await t("Initial Outreach Complete","Outreach Sent",{summary:`${i.matched_influencers_data.length} influencers contacted via automation.`,brand_user_id:n})}catch(q){const B=q instanceof Error?q.message:"An unknown error occurred during auto-outreach.",ee=["Auto-processing was cancelled or stopped.","Auto-processing was cancelled or stopped before sending.","Auto-processing completed loop but was stopped before final workflow advance."];j?(console.log("Automated outreach: Effect instance cancelled (didCancel=true). Last error (if any):",B),ee.includes(B)?Y("Previous automation cycle was superseded or naturally concluded."):Y(`Note: A non-cancellation error might have occurred during effect cleanup: ${B}`)):ee.includes(B)&&!F.current?(I(null),Y("Automation was manually stopped by user."),console.log("Automated outreach: Manually stopped by user."),await Dt(i.id,"Automated Outreach Manually Stopped",{reason:"User clicked stop button",brand_user_id:n},"info")):(console.error("Error during active automated outreach:",q),I(B),Y(`ERROR: ${B}`),await Dt(i.id,"Automated Outreach Failed",{error:B,brand_user_id:n},"failed"))}finally{j||(O(!1),X(null))}}})(),()=>{j=!0,Y("Outreach automation effect instance cleaning up...")}},[i.id,i.current_workflow_step,i.matched_influencers_data,t,U,$,o,n,Y]);const R=async()=>{if(!m){I("Please select an influencer for manual outreach.");return}if(!o){I(d||"Gemini API Client not available for manual message generation.");return}S(!0),I(null),_("");try{const j=await U(m);_(j)}catch(j){console.error("Failed to generate manual outreach message:",j),I(j instanceof Error?j.message:"An AI error occurred during message generation.")}finally{S(!1)}},te=async()=>{if(!m||!y){I("Please select an influencer and generate a message first for manual send.");return}S(!0),I(null);try{await $(m,y),alert(`Simulated sending message manually to ${m.name}`),_(""),p(null),await Dt(i.id,"Manual Outreach Message Sent (Simulated)",{influencer_id:m.id,influencer_name:m.name,brand_user_id:n},"success")}catch(j){I(j instanceof Error?j.message:"Error in manual simulated send.")}finally{S(!1)}},_e=i.current_workflow_step==="Creator Matching Complete",xe=((fe=i.current_workflow_step)==null?void 0:fe.includes("Outreach"))||i.status==="Outreach Sent"||i.status==="Completed";return w.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg shadow",children:[w.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"2. Outreach & Negotiation"}),k&&w.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:k}),d&&!o&&w.jsx("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-4",children:d}),P&&w.jsxs("div",{className:"mb-4 p-4 bg-indigo-50 rounded-lg shadow",children:[w.jsx("h4",{className:"text-md font-semibold text-indigo-700 mb-2",children:"Automated Outreach In Progress..."}),H&&w.jsxs("p",{className:"text-sm text-indigo-600",children:["Currently processing: ",H]}),w.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto bg-white p-2 border border-indigo-200 rounded",children:z.map((j,oe)=>w.jsx("p",{className:"text-xs text-gray-600",children:j},oe))}),w.jsx("button",{onClick:()=>{O(!1),Y("Stop button clicked by user. Attempting to halt automation...")},className:"mt-3 text-xs bg-red-500 hover:bg-red-600 text-white font-semibold py-1 px-3 rounded shadow",children:"Stop Automation"})]}),!P&&w.jsxs(w.Fragment,{children:[(!i.matched_influencers_data||i.matched_influencers_data.length===0)&&_e&&w.jsx("p",{className:"text-sm text-gray-500",children:"No influencers matched yet. Complete creator matching first to enable outreach."}),i.matched_influencers_data&&i.matched_influencers_data.length>0&&w.jsxs(w.Fragment,{children:[_e&&w.jsxs("p",{className:"text-sm text-green-700 bg-green-50 p-3 rounded mb-3",children:["Automated outreach will begin shortly for ",i.matched_influencers_data.length," influencer(s) if not already started/completed. Manual tools below are optional."]}),!_e&&xe&&w.jsxs("p",{className:"text-sm text-blue-700 bg-blue-50 p-3 rounded mb-3",children:["Outreach phase status: ",i.current_workflow_step,". Manual tools can be used for follow-ups."]}),!_e&&!xe&&w.jsx("p",{className:"text-sm text-yellow-600 bg-yellow-50 p-3 rounded mb-3",children:"Outreach phase not yet active. Complete previous steps."}),w.jsxs("div",{className:"mt-4 border-t pt-4",children:[w.jsx("h4",{className:"text-md font-semibold text-gray-600 mb-2",children:"Manual Outreach Tools"}),w.jsxs("div",{className:"mb-4",children:[w.jsx("label",{htmlFor:"influencerSelectManual",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Influencer for Manual Outreach:"}),w.jsxs("select",{id:"influencerSelectManual",value:(m==null?void 0:m.id)||"",onChange:j=>{var q;const oe=j.target.value;p(((q=i.matched_influencers_data)==null?void 0:q.find(B=>B.id===oe))||null),_(""),I(null)},className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md bg-white",children:[w.jsx("option",{value:"",children:"-- Select an Influencer --"}),i.matched_influencers_data.map(j=>w.jsxs("option",{value:j.id,children:[j.name," (",j.niche,")"]},j.id))]})]}),m&&w.jsxs("div",{className:"mt-4",children:[w.jsx("button",{onClick:R,disabled:x||!o,className:"bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded disabled:bg-gray-400 mr-2",children:x&&y===""?"Generating...":`Generate Message for ${m.name}`}),!o&&w.jsx("p",{className:"text-xs text-red-500 inline",children:d||"AI Client not available."}),y&&w.jsxs("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded",children:[w.jsx("h4",{className:"font-medium text-gray-700 mb-1",children:"Generated Message Preview:"}),w.jsx("textarea",{value:y,onChange:j=>_(j.target.value),rows:8,className:"w-full p-2 border border-gray-300 rounded text-sm bg-white"}),w.jsx("button",{onClick:te,disabled:x,className:"mt-2 bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-3 rounded text-sm disabled:bg-gray-400",children:x?"Sending...":"Simulate Manual Send"})]})]})]})]})]})]})},nI={BASE_URL:"/InfluencerAI/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GEMINI_API_KEY:"AIzaSyC9AWeeHK4IKsGo_yDY6x6aQTWlbFeFZVA",VITE_PUBLIC_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2ZW5oZXduaWNtcGd4cWh0Y2ZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg3ODA3MDcsImV4cCI6MjA2NDM1NjcwN30.-e97RGlYLXjzBzWcy23TXb3XLiMffYTD7e-26ayhnlY",VITE_PUBLIC_SUPABASE_URL:"https://uvenhewnicmpgxqhtcfd.supabase.co"};var Ql={};const rI=i=>i.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),iI=({campaign:i,enrollments:e,onEnrollmentUpdateOrStatusChange:t,currentUserId:n,advanceCampaignWorkflowStep:o})=>{const[a,d]=V.useState(null),[f,m]=V.useState(null),[p,y]=V.useState(null),[_,x]=V.useState(""),[S,k]=V.useState(""),[I,P]=V.useState(""),[O,z]=V.useState(!1),[L,H]=V.useState(null),X=e.filter(R=>R.status==="approved_by_creator"||R.status==="contract_drafting_by_brand"||R.status==="contract_pending_brand_send"||R.status==="contract_sent_to_creator");V.useEffect(()=>{try{const R=typeof process<"u"&&Ql&&Ql.API_KEY?Ql.API_KEY:typeof import.meta<"u"&&nI?"AIzaSyC9AWeeHK4IKsGo_yDY6x6aQTWlbFeFZVA":null;if(R)a||d(new Vm({apiKey:R}));else{const te="Gemini API Key not found. AI Contract drafting will be disabled. Set API_KEY or VITE_GEMINI_API_KEY.";console.warn(te),f||m(te)}}catch(R){console.error("Error initializing GoogleGenAI for contracting:",R),f||m("Failed to initialize AI Client. Contract drafting disabled.")}},[a,f]),V.useEffect(()=>{p?(console.log("[ContractingModule] Selected Enrollment Data (on selection change):",JSON.stringify(p,null,2)),x(p.deliverables||""),k(p.terms_and_conditions||""),P(p.contract_final_version||p.contract_draft_v1||""),H(null)):(x(""),k(""),P(""))},[p]);const F=V.useCallback(R=>{var _e,xe,fe,j;if(console.log("[getInfluencerNameFromEnrollment] Input enrollment data:",JSON.stringify(R,null,2)),!R)return console.warn("[getInfluencerNameFromEnrollment] Fallback: Enrollment not provided"),"the Influencer (Enrollment N/A)";if((xe=(_e=R.profile_data)==null?void 0:_e.influencer_profile)!=null&&xe.name&&R.profile_data.influencer_profile.name.trim()!=="")return R.profile_data.influencer_profile.name;if((fe=R.profile_data)!=null&&fe.full_name&&R.profile_data.full_name.trim()!=="")return console.warn("[getInfluencerNameFromEnrollment] Using profile_data.full_name as influencer_profile.name was missing. Enrollment ID:",R.id),R.profile_data.full_name;if((j=R.offer_details)!=null&&j.message&&typeof R.offer_details.message=="string"){const oe=R.offer_details.message.match(/^Hi\s+([^,]+),/);if(oe&&oe[1])return console.warn(`[getInfluencerNameFromEnrollment] HACK: Parsed name "${oe[1]}" from offer_details.message. Profile data is missing or incomplete for enrollment ID: ${R.id}. PLEASE FIX SUPABASE SCHEMA/QUERY.`),oe[1]}let te="Name Unknown";return R.profile_data?R.profile_data.influencer_profile?R.profile_data.influencer_profile.name||(te="Name Not Set in Profile"):te="Influencer Details Missing":te="Profile Data Missing",console.warn(`[getInfluencerNameFromEnrollment] Fallback: Could not determine influencer name. Problem: ${te}. Enrollment ID: ${R.id}`),`the Influencer (${te})`},[]),Y=async()=>{if(!p||!a){H("Select an influencer and ensure AI Client is ready.");return}if(!_.trim()||!S.trim()){H("Please define Deliverables and Terms & Conditions before generating a contract.");return}z(!0),H(null);const R=F(p),te=`Draft a concise influencer marketing contract for a campaign titled "${i.name}".
Campaign Goals: "${i.goals||"General promotion"}".
Brand: [Brand Company Name Placeholder]
Influencer: ${R}

Key Deliverables:
${_}

Terms and Conditions:
${S}

The contract should include sections for: Parties, Scope of Work (based on deliverables), Content Ownership, Usage Rights, Compensation (mention campaign budget of ${i.budget?`$${i.budget}`:"to be specified based on overall campaign budget"}), Confidentiality, Term and Termination, and Governing Law.
Keep it professional and clear. Use placeholders like [Date], [Brand Signature], [Influencer Signature].
Limit to approximately 300-400 words.`;try{console.log("[ContractingModule] Generating AI contract with prompt for:",R);const _e=await a.models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:te});P(_e.text),console.log("[ContractingModule] AI contract generated successfully for:",R),await Dt(i.id,"AI Contract Draft Generated",{influencer_user_id:p.influencer_user_id,influencer_name:R,enrollment_id:p.id,brand_user_id:n},"success")}catch(_e){console.error("[ContractingModule] Failed to generate AI contract for:",R,_e),H(_e instanceof Error?_e.message:"AI contract generation failed.")}finally{z(!1)}},U=async()=>{if(!p){H("No influencer enrollment selected to save draft for.");return}z(!0),H(null);const R=F(p);console.log("[ContractingModule] Saving contract draft for enrollment ID:",p.id,"Influencer:",R);try{await fh(p.id,{deliverables:_||null,terms_and_conditions:S||null,contract_draft_v1:I||null,status:"contract_drafting_by_brand"},n),await Dt(i.id,"Contract Draft Saved",{influencer_user_id:p.influencer_user_id,enrollment_id:p.id,influencer_name:R,brand_user_id:n},"info"),t(),alert("Contract draft saved successfully!"),console.log("[ContractingModule] Contract draft saved for:",R)}catch(te){console.error("[ContractingModule] Failed to save contract draft for:",R,te),H(te instanceof Error?te.message:"Failed to save contract draft. Check console and RLS policies.")}finally{z(!1)}},$=async()=>{if(console.log("%c[ContractingModule:handleFinalizeAndSend] Function STALLED.","color: orange; font-weight: bold;"),console.log("[ContractingModule:handleFinalizeAndSend] Selected Enrollment ID:",p?p.id:"None"),console.log("[ContractingModule:handleFinalizeAndSend] Contract Draft (first 50 chars):",I.substring(0,50)),!p||!I.trim()){const te="Please ensure an influencer is selected and a contract is drafted before finalizing.";console.error("[ContractingModule:handleFinalizeAndSend] VALIDATION FAILED:",te),H(te);return}const R=F(p);if(!window.confirm(`This will finalize the contract for ${R} and mark it as sent (simulated). Proceed?`)){console.log("[ContractingModule:handleFinalizeAndSend] User cancelled operation.");return}z(!0),H(null),console.log(`%c[ContractingModule:handleFinalizeAndSend] STARTING PROCESS for: ${R}, Enrollment ID: ${p.id}`,"color: blue; font-weight: bold;");try{console.log("[ContractingModule:handleFinalizeAndSend] STEP 1: Calling updateCampaignEnrollmentDetails..."),console.log("[ContractingModule:handleFinalizeAndSend] STEP 1 Data:",{enrollmentId:p.id,updates:{deliverables:_||null,terms_and_conditions:S||null,contract_final_version:I,status:"contract_sent_to_creator"},currentUserId:n});const te=await fh(p.id,{deliverables:_||null,terms_and_conditions:S||null,contract_final_version:I,status:"contract_sent_to_creator"},n);console.log("%c[ContractingModule:handleFinalizeAndSend] STEP 1 SUCCESS: updateCampaignEnrollmentDetails successful.","color: green;",te),console.log("[ContractingModule:handleFinalizeAndSend] STEP 2: Logging 'Contract Sent to Creator (Simulated)' workflow step...");const _e={influencer_user_id:p.influencer_user_id,influencer_name:R,enrollment_id:p.id,brand_user_id:n,contract_content_preview:I.substring(0,100)+"..."};console.log("[ContractingModule:handleFinalizeAndSend] STEP 2 LogData:",_e),await Dt(i.id,"Contract Sent to Creator (Simulated)",_e,"success"),console.log("%c[ContractingModule:handleFinalizeAndSend] STEP 2 SUCCESS: Workflow step logged.","color: green;");const xe=e.map(oe=>oe.id===p.id?{...oe,status:"contract_sent_to_creator",contract_final_version:I,deliverables:_,terms_and_conditions:S}:oe),fe=xe.filter(oe=>["approved_by_creator","contract_drafting_by_brand","contract_pending_brand_send","contract_sent_to_creator"].includes(oe.status)).every(oe=>oe.status==="contract_sent_to_creator"),j={summary:`Contract finalized and marked as sent (simulated) to ${R}.`,last_action_enrollment_id:p.id,last_action_influencer_name:R,brand_user_id:n};if(console.log("[ContractingModule:handleFinalizeAndSend] STEP 3: Determining campaign workflow advancement. All contracts sent for accepted creators?",fe),fe){const oe={...j,overall_status_note:`All accepted creators (${xe.filter(q=>q.status==="contract_sent_to_creator").length}) have now been sent contracts (simulated).`};console.log("[ContractingModule:handleFinalizeAndSend] Advancing campaign to 'Contracts Sent'. Details:",oe),await o("Contracts Sent","Contracting Complete",oe)}else{const oe={...j,overall_status_note:`Contract for ${R} sent (simulated). Other contracts may still be pending for other accepted creators.`};console.log("[ContractingModule:handleFinalizeAndSend] Advancing campaign to 'Contracting In Progress'. Details:",oe),await o("Contracting In Progress","Contracting",oe)}console.log("%c[ContractingModule:handleFinalizeAndSend] STEP 3 SUCCESS: Campaign workflow step advanced.","color: green;"),t(),alert(`Contract finalized and marked as sent to ${R}! This is a simulated send; no actual email/message was dispatched.`),console.log(`%c[ContractingModule:handleFinalizeAndSend] OVERALL SUCCESS for ${R}`,"color: green; font-weight: bold;"),y(null)}catch(te){console.error("%c[ContractingModule:handleFinalizeAndSend] OVERALL CRITICAL ERROR during process.","color: red; font-weight: bold;"),console.error("[ContractingModule:handleFinalizeAndSend] Raw error object:",te),console.error("[ContractingModule:handleFinalizeAndSend] Error (stringified for details):",JSON.stringify(te,Object.getOwnPropertyNames(te),2));const _e=te instanceof Error?te.message:"An unknown error occurred.";try{await Dt(i.id,"Contract Finalize/Send Failed",{error:_e,enrollment_id_attempted:p.id,influencer_name_attempted:R,details_at_failure:JSON.stringify(te,Object.getOwnPropertyNames(te),2).substring(0,500)},"failed")}catch(xe){console.error("[ContractingModule:handleFinalizeAndSend] Failed to log the main error to workflow_logs:",xe)}H(`Failed to finalize and send contract. Error: ${_e}. Check console for full details and ensure Supabase RLS policies are correct for 'campaign_enrollments' (update), 'workflow_logs' (insert), and 'campaigns' (update).`)}finally{z(!1),console.log("%c[ContractingModule:handleFinalizeAndSend] Function FINISHED.","color: orange; font-weight: bold;")}};return X.length===0?["Campaign Created","Creator Matching Complete","Initial Outreach Complete","Creator Offers Sent"].includes(i.current_workflow_step||"")?["Creator Offers Sent","Initial Outreach Complete"].includes(i.current_workflow_step||"")?w.jsx("p",{className:"text-sm text-yellow-600 bg-yellow-50 p-3 rounded my-3 p-6 border border-gray-200 shadow mt-6",children:"Offers have been sent. Waiting for creators to respond before contracts can be managed."}):null:w.jsx("p",{className:"text-sm text-gray-500 my-3 p-6 border border-gray-200 rounded-lg shadow mt-6",children:"No creators have accepted offers for this campaign yet, or contracting is complete for all accepted."}):w.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg shadow mt-6",children:[w.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"3. Contracting & Agreements"}),f&&w.jsx("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-4 text-sm",children:f}),L&&w.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 text-sm",role:"alert",children:L}),w.jsxs("div",{className:"mb-4",children:[w.jsx("label",{htmlFor:"influencerContractSelect",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Creator for Contract:"}),w.jsxs("select",{id:"influencerContractSelect",value:(p==null?void 0:p.id)||"",onChange:R=>{const te=X.find(_e=>_e.id===R.target.value)||null;y(te)},className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md bg-white","aria-label":"Select creator for contract",children:[w.jsx("option",{value:"",children:"-- Select Creator --"}),X.map(R=>w.jsxs("option",{value:R.id,children:[F(R)," (",R.status==="contract_sent_to_creator"?"Contract Sent":rI(R.status),")"]},R.id))]})]}),p&&p.status!=="contract_sent_to_creator"&&w.jsxs("div",{className:"space-y-4 mt-4 border-t pt-4",children:[w.jsxs("h4",{className:"text-md font-semibold text-gray-600",children:["Define Contract for: ",w.jsx("span",{className:"font-bold text-indigo-700",children:F(p)})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"deliverables",className:"block text-sm font-medium text-gray-700",children:"Deliverables *"}),w.jsx("textarea",{id:"deliverables",rows:3,value:_,onChange:R=>x(R.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white",placeholder:"e.g., 2 Instagram posts, 1 Reel, 3 Stories. Mention specific content requirements...","aria-required":"true"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"terms",className:"block text-sm font-medium text-gray-700",children:"Additional Terms & Conditions *"}),w.jsx("textarea",{id:"terms",rows:3,value:S,onChange:R=>k(R.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white",placeholder:"e.g., Exclusivity period, payment schedule, approval process, usage rights details...","aria-required":"true"})]}),w.jsx("button",{onClick:Y,disabled:O||!a||!_.trim()||!S.trim(),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:bg-gray-400",type:"button",children:O&&I===""?"Generating...":"Draft Contract with AI"}),!a&&w.jsx("p",{className:"text-xs text-red-500 inline ml-2",children:f||"AI Client not available."}),I&&w.jsxs("div",{className:"mt-4",children:[w.jsx("label",{htmlFor:"contractDraft",className:"block text-sm font-medium text-gray-700",children:"Contract Draft (Editable)"}),w.jsx("textarea",{id:"contractDraft",rows:15,value:I,onChange:R=>P(R.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white font-mono text-xs","aria-label":"Contract draft text area"})]}),w.jsxs("div",{className:"flex space-x-3 mt-4",children:[w.jsx("button",{onClick:U,disabled:O||!I.trim(),className:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded disabled:bg-gray-300",type:"button",children:O?"Saving...":"Save Contract Draft"}),w.jsx("button",{onClick:$,disabled:O||!I.trim(),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded disabled:bg-green-300",type:"button",children:O?"Finalizing...":"Finalize & Send to Creator"})]})]}),p&&p.status==="contract_sent_to_creator"&&w.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-300 rounded-md",children:[w.jsx("h4",{className:"text-md font-semibold text-green-700",children:"Contract Sent!"}),w.jsxs("p",{className:"text-sm text-green-600",children:["The contract has been finalized and marked as sent to ",w.jsx("span",{className:"font-bold",children:F(p)}),"."]}),w.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Final Contract Content (Simulated Send):"}),w.jsx("pre",{className:"text-xs bg-white p-2 border border-gray-200 rounded mt-1 max-h-60 overflow-y-auto whitespace-pre-wrap",children:p.contract_final_version||"No final contract content stored."})]})]})},oI=({logs:i})=>!i||i.length===0?w.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg shadow mt-8",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Workflow Log"}),w.jsx("p",{className:"text-sm text-gray-500",children:"No workflow activities logged yet for this campaign."})]}):w.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg shadow mt-8",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Workflow Log"}),w.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.map(e=>w.jsxs("div",{className:"p-3 bg-gray-50 rounded-md border border-gray-200 text-sm",children:[w.jsxs("div",{className:"flex justify-between items-center mb-1",children:[w.jsx("span",{className:`font-medium text-gray-700 ${e.status==="failed"?"text-red-600":e.status==="success"?"text-green-600":"text-blue-600"}`,children:e.step_name}),w.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full font-semibold
                                ${e.status==="failed"?"bg-red-100 text-red-700":e.status==="success"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:e.status||"info"})]}),w.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(e.created_at).toLocaleString()}),e.details&&w.jsx("pre",{className:"text-xs text-gray-600 bg-gray-100 p-2 rounded mt-1 overflow-x-auto",children:JSON.stringify(e.details,null,2)})]},e.id))})]}),Xl=[{key:"Campaign Created",label:"Campaign Setup"},{key:"Creator Matching Complete",label:"Matching"},{key:"Creator Offers Sent",label:"Offers Sent"},{key:"Initial Outreach Complete",label:"Outreach"},{key:"Contracting In Progress",label:"Contracting"},{key:"Contracts Sent",label:"Contracts Out"},{key:"Contracts Signed (Simulated)",label:"Contracts Signed"},{key:"Payment Processing (Simulated)",label:"Payment Processing"},{key:"Payment Processed (Simulated)",label:"Payment Complete"},{key:"Performance Reporting (Simulated)",label:"Reporting"},{key:"Reporting Complete (Simulated)",label:"Done"}],sI=({workflowLogs:i,currentWorkflowStep:e,campaignStatus:t})=>{const n=(o,a)=>{if(i.find(p=>p.step_name===o&&p.status==="success"))return"completed";if(o===e)return"current";const f=Xl.findIndex(p=>p.key===e),m=Xl.findIndex(p=>p.key===o);return f!==-1&&m<f&&i.some(y=>y.step_name===o)||t==="Completed"&&o==="Reporting Complete (Simulated)"?"completed":"pending"};return w.jsxs("div",{className:"mb-8 p-4 border border-gray-200 rounded-lg shadow bg-gray-50 overflow-x-auto",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Campaign Progress"}),w.jsx("nav",{"aria-label":"Workflow Progress",children:w.jsx("ol",{className:"flex items-center space-x-2 sm:space-x-4 text-sm font-medium",children:Xl.map((o,a)=>{const d=n(o.key,o.label);let f="",m="",p="";switch(d){case"completed":f="border-green-500 text-green-600",m="bg-green-500",p="text-green-700 font-semibold";break;case"current":f="border-blue-500 text-blue-600 ring-2 ring-blue-300",m="bg-blue-500 ring-4 ring-blue-200",p="text-blue-700 font-bold";break;default:f="border-gray-300 text-gray-400",m="bg-gray-300",p="text-gray-500";break}return w.jsx("li",{className:"flex-shrink-0",children:w.jsxs("div",{className:`flex flex-col items-center p-2 rounded-md transition-all duration-200 ease-in-out ${f} ${d!=="pending"?"bg-white shadow-sm":"bg-gray-100"}`,title:o.key,children:[w.jsx("span",{className:`w-3 h-3 rounded-full mb-1 ${m}`}),w.jsx("span",{className:`text-xs text-center ${p}`,children:o.label})]})},o.key)})})})]})},Ji=1500,aI=({campaign:i,onBack:e,onCampaignUpdate:t,currentUserId:n})=>{var _e,xe,fe;const[o,a]=V.useState(i),[d,f]=V.useState(!1),[m,p]=V.useState(null),[y,_]=V.useState([]),[x,S]=V.useState([]),[k,I]=V.useState(!1),[P,O]=V.useState(!1),[z,L]=V.useState(null),[H,X]=V.useState(!1);V.useEffect(()=>{a(i)},[i]);const F=V.useCallback(async()=>{if(!(!o||!o.id)){p(null),I(!0);try{const[j,oe]=await Promise.all([g0(o.id),h0(o.id)]);_(j||[]),S(oe||[])}catch(j){console.error("Failed to fetch campaign sub-data (logs/enrollments)",j);const oe=j instanceof Error?j.message:"Could not load campaign details.";p(q=>q||oe)}finally{I(!1)}}},[o]);V.useEffect(()=>{F()},[F]);const Y=j=>{a(j),t(),F()},U=()=>{t(),F()},$=V.useCallback(async(j,oe,q,B=!1)=>{B?(O(!0),L(`Simulating: ${j}...`)):f(!0),p(null);try{B&&await new Promise(E=>setTimeout(E,100));const ee=await dm(o.id,{current_workflow_step:j,status:oe});if(ee&&ee.length>0&&ee[0]){const E=ee[0];return a(E),await Dt(o.id,j,{...q,brand_user_id_context:n},"success"),U(),E}else throw new Error("Failed to receive updated campaign data after advancing workflow.")}catch(ee){console.error(`Failed to advance workflow to ${j}:`,ee);const E=ee instanceof Error?ee.message:`Error advancing to ${j}.`;throw p(E),await Dt(o.id,j,{error:E,brand_user_id_context:n},"failed"),ee}finally{B?(O(!1),L(null)):f(!1)}},[o.id,U,n]),R=V.useCallback(async(j,oe,q)=>{try{await $(j,oe,q,!1)}catch{console.log("propCompatibleAdvanceWorkflowStep caught an error (already handled).")}},[$]);V.useEffect(()=>{const j=async()=>{if(P||!o.current_workflow_step)return;if(x.some(ee=>ee.status==="approved_by_creator")&&(o.current_workflow_step==="Initial Outreach Complete"||o.current_workflow_step==="Creator Offers Sent")){console.log("Auto-progression paused: Pending brand action for accepted creator contracts.");return}let B=o;try{(B.current_workflow_step==="Contracts Sent"||B.current_workflow_step==="Contracting Complete")&&(await new Promise(ee=>setTimeout(ee,Ji/2)),B=await $("Contracts Signed (Simulated)","Contracts Signed",{detail:"System auto-simulated contract signing by creators."},!0)),B.current_workflow_step==="Contracts Signed (Simulated)"&&(await new Promise(ee=>setTimeout(ee,Ji/2)),B=await $("Payment Processing (Simulated)","Payment Initiated",{detail:"System auto-initiated payment."},!0),B.current_workflow_step==="Payment Processing (Simulated)"&&(await new Promise(ee=>setTimeout(ee,Ji)),B=await $("Payment Processed (Simulated)","Payment Complete",{detail:"System auto-simulated payment completion."},!0))),B.current_workflow_step==="Payment Processed (Simulated)"&&(await new Promise(ee=>setTimeout(ee,Ji/2)),B=await $("Performance Reporting (Simulated)","Report Generating",{detail:"System auto-generating performance report."},!0),B.current_workflow_step==="Performance Reporting (Simulated)"&&(await new Promise(ee=>setTimeout(ee,Ji)),await $("Reporting Complete (Simulated)","Completed",{detail:"System auto-simulated reporting completion."},!0)))}catch(ee){console.error("Auto-progression sequence halted due to an error:",ee)}},oe=["Contracts Sent","Contracting Complete","Contracts Signed (Simulated)","Payment Processed (Simulated)"];o.current_workflow_step&&oe.includes(o.current_workflow_step)&&!P&&j()},[o,$,P,x]);const te=y.find(j=>j.step_name==="Reporting Complete (Simulated)"||j.step_name==="Performance Reporting (Simulated)");return w.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-lg shadow-xl",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[w.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:o.name}),w.jsx("button",{onClick:e,className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:" Back to Dashboard"})]}),m&&w.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:m}),(d||P||k)&&w.jsx("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded mb-4",role:"status",children:z||(k?"Loading campaign data...":d?"Processing your request...":"System is processing...")}),w.jsx(sI,{workflowLogs:y,currentWorkflowStep:o.current_workflow_step,campaignStatus:o.status}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[w.jsxs("div",{className:"col-span-1 md:col-span-2",children:[w.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Campaign Details"}),w.jsxs("p",{className:"text-gray-600 mb-1",children:[w.jsx("strong",{className:"font-medium",children:"Status:"})," ",w.jsx("span",{className:"font-semibold text-blue-600",children:o.status})]}),w.jsxs("p",{className:"text-gray-600 mb-1",children:[w.jsx("strong",{className:"font-medium",children:"Current Step:"})," ",o.current_workflow_step]}),w.jsxs("p",{className:"text-gray-600 mb-1",children:[w.jsx("strong",{className:"font-medium",children:"Campaign Tag:"})," ",o.campaign_tag||"N/A"]}),w.jsxs("p",{className:"text-gray-600 mb-1",children:[w.jsx("strong",{className:"font-medium",children:"Description:"})," ",o.description]}),w.jsxs("p",{className:"text-gray-600 mb-1",children:[w.jsx("strong",{className:"font-medium",children:"Budget:"})," ",o.budget?`$${o.budget}`:"N/A"]}),w.jsxs("p",{className:"text-gray-600 mb-4",children:[w.jsx("strong",{className:"font-medium",children:"Goals:"})," ",o.goals||"N/A"]})]}),w.jsxs("div",{className:"col-span-1 text-sm text-gray-500",children:[w.jsxs("p",{children:[w.jsx("strong",{children:"ID:"})," ",o.id]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Brand Owner ID:"})," ",o.user_id]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Created:"})," ",new Date(o.created_at).toLocaleString()]})]})]}),w.jsxs("div",{className:"space-y-8",children:[w.jsx(S0,{campaign:o,onCampaignUpdate:Y,advanceWorkflowStep:R,currentUserId:n}),(o.current_workflow_step==="Creator Offers Sent"||o.current_workflow_step==="Creator Matching Complete")&&o.matched_influencers_data&&o.matched_influencers_data.length>0&&w.jsx(tI,{campaign:o,onCampaignUpdate:Y,advanceWorkflowStep:R,currentUserId:n}),(((_e=o.current_workflow_step)==null?void 0:_e.includes("Offers Sent"))||((xe=o.current_workflow_step)==null?void 0:xe.includes("Outreach Complete"))||((fe=o.current_workflow_step)==null?void 0:fe.includes("Contracting"))||x.some(j=>j.status==="approved_by_creator"))&&w.jsx(iI,{campaign:o,enrollments:x,onEnrollmentUpdateOrStatusChange:U,currentUserId:n,advanceCampaignWorkflowStep:R}),(o.current_workflow_step==="Contracts Sent"||o.current_workflow_step==="Contracting Complete"||o.current_workflow_step==="Contracts Signed (Simulated)")&&w.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg shadow",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Post-Contracting Phase (Simulated)"}),w.jsxs("p",{className:"text-gray-500 text-sm mb-1",children:["Status: ",o.current_workflow_step==="Contracts Signed (Simulated)"?"Contracts Signed (Simulated)":"Awaiting Simulated Signatures..."]})]}),(o.current_workflow_step==="Contracts Signed (Simulated)"||o.current_workflow_step==="Payment Processing (Simulated)"||o.current_workflow_step==="Payment Processed (Simulated)")&&w.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg shadow",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Payment Integration (Simulated)"}),w.jsxs("p",{className:"text-gray-500 text-sm mb-1",children:["Status: ",o.current_workflow_step==="Payment Processing (Simulated)"?"Processing Payment (Simulated)...":o.current_workflow_step==="Payment Processed (Simulated)"?"Payment Complete (Simulated)":"Pending Initiation"]})]}),(o.current_workflow_step==="Payment Processed (Simulated)"||o.current_workflow_step==="Performance Reporting (Simulated)"||o.current_workflow_step==="Reporting Complete (Simulated)")&&w.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg shadow",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Performance Reporting (Simulated)"}),w.jsxs("p",{className:"text-gray-500 text-sm mb-1",children:["Status: ",o.current_workflow_step==="Performance Reporting (Simulated)"?"Generating Report (Simulated)...":o.current_workflow_step==="Reporting Complete (Simulated)"?"Report Complete (Simulated)":"Pending Initiation"]}),(o.status==="Completed"||o.current_workflow_step==="Reporting Complete (Simulated)")&&w.jsxs("button",{onClick:()=>X(j=>!j),className:"mt-3 bg-purple-500 hover:bg-purple-600 text-white font-semibold py-1.5 px-3 rounded text-sm",children:[H?"Hide":"View"," Performance Report (Simulated)"]})]}),H&&te&&w.jsxs("div",{className:"p-4 mt-4 bg-gray-50 border border-gray-200 rounded-lg shadow",children:[w.jsx("h4",{className:"text-md font-semibold text-gray-700 mb-2",children:"Simulated Performance Report Details:"}),w.jsxs("p",{className:"text-sm text-gray-600",children:[w.jsx("strong",{children:"Log Step:"})," ",te.step_name]}),w.jsxs("p",{className:"text-sm text-gray-600",children:[w.jsx("strong",{children:"Logged At:"})," ",new Date(te.created_at).toLocaleString()]}),te.details&&w.jsx("pre",{className:"text-xs text-gray-500 bg-white p-2 border rounded mt-1 overflow-x-auto",children:JSON.stringify(te.details,null,2)}),!te.details&&w.jsx("p",{className:"text-sm text-gray-500",children:"No specific details logged for this simulated report."})]}),o.status==="Completed"&&w.jsxs("div",{className:"p-6 bg-green-50 border-green-200 rounded-lg shadow text-center",children:[w.jsx("h3",{className:"text-2xl font-semibold text-green-700 mb-2",children:" Campaign Completed! "}),w.jsx("p",{className:"text-green-600",children:"This campaign has successfully run through all workflow stages."})]}),w.jsx(oI,{logs:y})]})]})},zp=()=>{const{user:i,profile:e}=ar(),[t,n]=V.useState([]),[o,a]=V.useState(null),[d,f]=V.useState("dashboard"),[m,p]=V.useState(!1),[y,_]=V.useState(null),x=V.useCallback(async()=>{if(i){p(!0),_(null);try{const L=await l0(i.id);n(L||[])}catch(L){console.error("Failed to fetch campaigns:",L),_(L instanceof Error?L.message:"An unknown error occurred while fetching campaigns.")}finally{p(!1)}}},[i]);V.useEffect(()=>{i&&d==="dashboard"&&x()},[x,i,d]);const S=()=>{f("dashboard"),x()},k=L=>{a(L),f("campaignDetail")},I=async L=>{if(i&&window.confirm("Are you sure you want to delete this campaign? This action cannot be undone.")){p(!0),_(null);try{await u0(L,i.id),n(H=>H.filter(X=>X.id!==L)),alert("Campaign deleted successfully."),(o==null?void 0:o.id)===L&&(f("dashboard"),a(null))}catch(H){console.error("Failed to delete campaign:",H),_(H instanceof Error?H.message:"An unknown error occurred while deleting campaign.")}finally{p(!1)}}},P=()=>f("createCampaign"),O=()=>{f("dashboard"),a(null),x()};if(!i||!e)return w.jsx("div",{className:"p-8 text-center text-red-500",children:"Error: Brand user data not available. Please refresh."});if(e.role!=="brand")return w.jsx("div",{className:"p-8 text-center text-red-500",children:"Access Denied: This dashboard is for brands."});const z=()=>w.jsxs("div",{className:"p-4 md:p-8",children:[w.jsxs("header",{className:"mb-8 pb-4 border-b border-gray-200",children:[w.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Brand Dashboard"}),w.jsxs("p",{className:"text-gray-600 mt-1",children:["Welcome, ",e.full_name||i.email,"! Manage your campaigns here."]})]}),w.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[w.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4 md:mb-0",children:"My Campaigns"}),w.jsxs("div",{className:"flex flex-wrap gap-2",children:[w.jsx("button",{onClick:P,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded whitespace-nowrap shadow hover:shadow-md transition-shadow",children:"+ Create New Campaign"}),w.jsx("button",{onClick:x,disabled:m,className:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded whitespace-nowrap shadow hover:shadow-md transition-shadow disabled:bg-gray-400",children:m&&t.length>0?"Refreshing...":"Refresh Campaigns"})]})]}),y&&w.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4 text-sm",role:"alert",children:y}),m&&t.length===0&&w.jsx("div",{className:"text-center py-4 text-gray-600",children:"Loading your campaigns..."}),!m&&!y&&t.length===0&&w.jsxs("div",{className:"text-center text-gray-500 py-10 bg-white p-6 rounded-lg shadow",children:[w.jsx("p",{className:"text-xl mb-2",children:"No campaigns found."}),w.jsx("p",{className:"mb-4",children:"Get started by creating your first influencer marketing campaign!"}),w.jsx("button",{onClick:P,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded",children:"Create First Campaign"})]}),t.length>0&&w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(L=>w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow flex flex-col justify-between",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-xl font-semibold text-indigo-600 mb-2 truncate",title:L.name,children:L.name}),w.jsxs("p",{className:"text-gray-700 text-sm mb-1",children:[w.jsx("span",{className:"font-medium",children:"Status:"})," ",w.jsx("span",{className:"font-semibold",children:L.status||"N/A"})]}),w.jsxs("p",{className:"text-gray-700 text-sm mb-1",children:[w.jsx("span",{className:"font-medium",children:"Current Step:"})," ",L.current_workflow_step||"N/A"]}),w.jsxs("p",{className:"text-gray-700 text-sm mb-1",children:[w.jsx("span",{className:"font-medium",children:"Budget:"})," ",L.budget?`$${L.budget.toLocaleString()}`:"N/A"]}),w.jsxs("p",{className:"text-gray-700 text-sm mb-3",children:[w.jsx("span",{className:"font-medium",children:"Tag:"})," ",L.campaign_tag||"N/A"]}),w.jsxs("p",{className:"text-gray-500 text-xs break-words line-clamp-3",title:L.description,children:["Description: ",L.description||"No description."]})]}),w.jsxs("div",{className:"mt-4 flex items-center space-x-2",children:[w.jsx("button",{onClick:()=>k(L),className:"flex-1 bg-blue-500 hover:bg-blue-700 text-white font-semibold py-2 px-3 rounded text-sm text-center",children:"View & Manage"}),w.jsx("button",{onClick:()=>I(L.id),disabled:m,className:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-3 rounded text-sm disabled:bg-red-300","aria-label":`Delete campaign ${L.name}`,children:"Delete"})]})]},L.id))})]});return d==="dashboard"?z():d==="createCampaign"?w.jsx("div",{className:"p-4 md:p-8",children:w.jsx(x0,{currentUserId:i.id,onCampaignCreated:S,onCancel:O})}):d==="campaignDetail"&&o?w.jsx("div",{className:"p-4 md:p-8",children:w.jsx(aI,{campaign:o,onBack:O,onCampaignUpdate:x,currentUserId:i.id})}):z()},lI=({userId:i,userFullName:e})=>{const[t,n]=V.useState(""),[o,a]=V.useState(""),[d,f]=V.useState(""),[m,p]=V.useState(""),[y,_]=V.useState(""),[x,S]=V.useState(""),[k,I]=V.useState({instagram:"",youtube:"",tiktok:"",twitter:"",other:""}),[P,O]=V.useState([]),[z,L]=V.useState(""),[H,X]=V.useState(!0),[F,Y]=V.useState(!1),[U,$]=V.useState(null),[R,te]=V.useState(null),_e=V.useCallback(async()=>{X(!0),$(null);try{const q=await o0(i);q?(n(q.name||e||""),a(q.niche||""),f(q.platform||""),p(q.followers===null||typeof q.followers>"u"?"":q.followers),_(q.engagement_rate===null||typeof q.engagement_rate>"u"?"":q.engagement_rate),S(q.contact_email||""),I(q.social_handles||{instagram:"",youtube:"",tiktok:"",twitter:"",other:""}),O(q.content_tags||[])):(n(e||""),I({instagram:"",youtube:"",tiktok:"",twitter:"",other:""}),O([]))}catch(q){console.error("Failed to fetch creator profile:",q),$(q instanceof Error?q.message:"Could not load your profile data.")}finally{X(!1)}},[i,e]);V.useEffect(()=>{i&&_e()},[_e,i]);const xe=()=>{const q=z.trim().toLowerCase();q&&!P.includes(q)?(O([...P,q]),L("")):q&&L("")},fe=q=>{O(P.filter(B=>B!==q))},j=(q,B)=>{I(ee=>({...ee,[q]:B}))},oe=async q=>{q.preventDefault(),Y(!0),$(null),te(null);const B=Object.fromEntries(Object.entries(k).filter(([G,de])=>de&&de.trim()!=="")),ee=[...new Set(P.map(G=>G.trim().toLowerCase()).filter(G=>G))],E={name:t.trim()||"Unnamed Creator",niche:o.trim()||"General",platform:d.trim()||null,followers:m===""?null:Number(m),engagement_rate:y===""?null:Number(y),contact_email:x.trim()||null,social_handles:Object.keys(B).length>0?B:null,content_tags:ee.length>0?ee:null};if(!E.name){$("Public name is required."),Y(!1);return}if(!E.niche){$("Primary Niche/Category is required."),Y(!1);return}try{await s0(i,E),te("Profile updated successfully!"),await _e(),setTimeout(()=>te(null),3e3)}catch(G){console.error("Failed to save creator profile:",G),$(G instanceof Error?G.message:"An unknown error occurred while saving your profile.")}finally{Y(!1)}};return H?w.jsx("div",{className:"p-4 text-center text-gray-600",children:"Loading your creator profile..."}):w.jsxs("div",{className:"max-w-3xl mx-auto bg-white p-6 sm:p-8 rounded-lg shadow-lg",children:[w.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Manage Your Creator Profile"}),U&&w.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 text-sm",children:U}),R&&w.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4 text-sm",children:R}),w.jsxs("form",{onSubmit:oe,className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"creatorName",className:"block text-sm font-medium text-gray-700",children:"Public Name *"}),w.jsx("input",{type:"text",id:"creatorName",value:t,onChange:q=>n(q.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"contactEmail",className:"block text-sm font-medium text-gray-700",children:"Contact Email (for collaborations)"}),w.jsx("input",{type:"email",id:"contactEmail",value:x,onChange:q=>S(q.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"niche",className:"block text-sm font-medium text-gray-700",children:"Primary Niche/Category *"}),w.jsx("input",{type:"text",id:"niche",value:o,onChange:q=>a(q.target.value),required:!0,placeholder:"e.g., Lifestyle, Tech, Gaming",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"platform",className:"block text-sm font-medium text-gray-700",children:"Primary Platform"}),w.jsx("input",{type:"text",id:"platform",value:d,onChange:q=>f(q.target.value),placeholder:"e.g., Instagram, YouTube, TikTok",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white"})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"followers",className:"block text-sm font-medium text-gray-700",children:"Followers"}),w.jsx("input",{type:"number",id:"followers",value:m,onChange:q=>p(q.target.value===""?"":parseInt(q.target.value)),min:"0",placeholder:"e.g., 10000",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"engagementRate",className:"block text-sm font-medium text-gray-700",children:"Engagement Rate (e.g., 0.03 for 3%)"}),w.jsx("input",{type:"number",step:"0.001",id:"engagementRate",value:y,onChange:q=>_(q.target.value===""?"":parseFloat(q.target.value)),min:"0",max:"1",placeholder:"e.g., 0.05",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white"})]})]}),w.jsxs("fieldset",{className:"border border-gray-300 p-4 rounded-md",children:[w.jsx("legend",{className:"text-sm font-medium text-gray-700 px-1",children:"Social Media Handles"}),["instagram","youtube","tiktok","twitter","other"].map(q=>w.jsxs("div",{className:"mb-3 last:mb-0",children:[w.jsx("label",{htmlFor:`social_${q}`,className:"block text-xs font-medium text-gray-600 capitalize",children:q}),w.jsx("input",{type:"text",id:`social_${q}`,value:k[q]||"",onChange:B=>j(q,B.target.value),placeholder:`${q} username or profile URL`,className:"mt-1 block w-full px-3 py-1.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white"})]},q))]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Content Tags / Keywords (for matching)"}),w.jsxs("div",{className:"flex items-center mt-1",children:[w.jsx("input",{type:"text",value:z,onChange:q=>L(q.target.value),onKeyDown:q=>{q.key==="Enter"&&(q.preventDefault(),xe())},placeholder:"Add a tag (e.g., travel) and press Enter",className:"flex-grow px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white"}),w.jsx("button",{type:"button",onClick:xe,className:"px-4 py-2 bg-indigo-500 text-white rounded-r-md hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1",children:"Add"})]}),w.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tags are saved in lowercase. Add tags that describe your content and expertise."}),P.length>0&&w.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:P.map(q=>w.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:[q,w.jsxs("button",{type:"button",onClick:()=>fe(q),className:"ml-1.5 flex-shrink-0 text-indigo-400 hover:text-indigo-500 focus:outline-none focus:text-indigo-700",children:[w.jsxs("span",{className:"sr-only",children:["Remove ",q]}),""]})]},q))})]}),w.jsx("div",{className:"pt-2",children:w.jsx("button",{type:"submit",disabled:F,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400",children:F?"Saving Profile...":"Save Profile"})})]})]})},Gp=()=>{const{user:i,profile:e}=ar(),[t,n]=V.useState("profile"),[o,a]=V.useState([]),[d,f]=V.useState(!1),[m,p]=V.useState(null),[y,_]=V.useState([]),[x,S]=V.useState(!1),[k,I]=V.useState(null),[P,O]=V.useState(null),z=V.useCallback(async()=>{if(i){console.log("[CreatorDashboard.fetchAvailableCampaigns] Fetching for creator ID:",i.id),f(!0),p(null);try{const F=await m0(i.id);console.log("[CreatorDashboard.fetchAvailableCampaigns] Received available campaigns:",F),a(F)}catch(F){console.error("[CreatorDashboard.fetchAvailableCampaigns] Failed to fetch available campaigns:",F);const Y=F instanceof Error?F.message:"Could not load available campaigns.";p(Y)}finally{f(!1)}}},[i]),L=V.useCallback(async()=>{if(i){console.log("[CreatorDashboard.fetchEnrolledCampaigns] Fetching for creator ID:",i.id),S(!0),I(null);try{const F=await f0(i.id);console.log("[CreatorDashboard.fetchEnrolledCampaigns] Received enrolled campaigns:",F),_(F)}catch(F){console.error("[CreatorDashboard.fetchEnrolledCampaigns] Failed to fetch enrolled campaigns:",F);const Y=F instanceof Error?F.message:"Could not load your enrolled campaigns.";I(Y)}finally{S(!1)}}},[i]);V.useEffect(()=>{i&&t==="available_campaigns"&&z(),i&&t==="my_campaigns"&&L()},[i,t,z,L]);const H=async(F,Y)=>{if(i){console.log("[CreatorDashboard.handleEnrollmentAction] Action:",{enrollmentId:F,newStatus:Y,userId:i.id}),O(F),I(null);try{const U=Y==="rejected_by_creator"&&prompt("Optional: Provide a reason for rejection")||void 0;await p0(F,Y,i.id,U),alert(`Offer successfully ${Y==="approved_by_creator"?"accepted":"rejected"}!`),L()}catch(U){console.error(`[CreatorDashboard.handleEnrollmentAction] Failed to ${Y==="approved_by_creator"?"accept":"reject"} offer:`,U),I(U instanceof Error?U.message:`Could not ${Y==="approved_by_creator"?"accept":"reject"} offer.`)}finally{O(null)}}};if(!i||!e)return w.jsx("div",{className:"p-8 text-center text-red-500",children:"Error: User data not available. Please try refreshing."});if(e.role!=="creator")return w.jsx("div",{className:"p-8 text-center text-red-500",children:"Access Denied: This dashboard is for creators."});const X=F=>F.replace(/_/g," ").replace(/\b\w/g,Y=>Y.toUpperCase());return w.jsxs("div",{className:"p-4 md:p-8",children:[w.jsxs("header",{className:"mb-8 pb-4 border-b border-gray-200",children:[w.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Creator Dashboard"}),w.jsxs("p",{className:"text-gray-600 mt-1",children:["Welcome, ",e.full_name||i.email,"!"]})]}),w.jsxs("nav",{className:"mb-8 flex flex-wrap gap-2 sm:space-x-4 border-b pb-3",children:[w.jsx("button",{onClick:()=>n("profile"),className:`py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="profile"?"bg-indigo-600 text-white shadow-md":"text-gray-600 hover:bg-gray-200"}`,children:"My Creator Profile"}),w.jsx("button",{onClick:()=>n("available_campaigns"),className:`py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="available_campaigns"?"bg-indigo-600 text-white shadow-md":"text-gray-600 hover:bg-gray-200"}`,children:"Available Campaigns"}),w.jsx("button",{onClick:()=>n("my_campaigns"),className:`py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="my_campaigns"?"bg-indigo-600 text-white shadow-md":"text-gray-600 hover:bg-gray-200"}`,children:"My Enrolled Campaigns"})]}),w.jsxs("div",{className:"mt-6",children:[t==="profile"&&w.jsx(lI,{userId:i.id,userFullName:e.full_name}),t==="available_campaigns"&&w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[w.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Browse Available Campaigns"}),d&&w.jsx("p",{className:"text-gray-500",children:"Loading available campaigns..."}),m&&w.jsx("div",{className:"text-red-500 bg-red-50 p-3 rounded mb-3",children:m}),!d&&!m&&o.length===0&&w.jsx("p",{className:"text-gray-500",children:"No campaigns currently available for you, or all matching campaigns already have an offer extended to you. Check back later!"}),!d&&!m&&o.length>0&&w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map(F=>w.jsxs("div",{className:"p-4 border rounded-lg shadow hover:shadow-lg transition-shadow",children:[w.jsx("h3",{className:"text-lg font-semibold text-indigo-700 mb-1",children:F.name}),w.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:["Tag: ",F.campaign_tag||"N/A"]}),w.jsx("p",{className:"text-sm text-gray-600 line-clamp-3 mb-2",title:F.description,children:F.description||"No description available."}),w.jsxs("p",{className:"text-xs text-gray-400",children:["Status: ",F.status]})]},F.id))})]}),t==="my_campaigns"&&w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[w.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"My Enrolled Campaigns"}),x&&w.jsx("p",{className:"text-gray-500",children:"Loading your enrolled campaigns..."}),k&&w.jsx("div",{className:"text-red-500 bg-red-50 p-3 rounded mb-3",children:k}),!x&&!k&&y.length===0&&w.jsx("p",{className:"text-gray-500",children:"You are not currently enrolled in any campaigns or have no pending offers."}),!x&&!k&&y.length>0&&w.jsx("div",{className:"space-y-6",children:y.map(F=>{var Y;return w.jsxs("div",{className:"p-4 border rounded-lg shadow-md",children:[w.jsx("h3",{className:"text-lg font-semibold text-purple-700 mb-1",children:((Y=F.campaigns)==null?void 0:Y.name)||"Campaign Details Missing"}),w.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:["Status: ",w.jsx("span",{className:"font-medium",children:X(F.status)})]}),F.status==="approved_by_creator"&&w.jsx("p",{className:"text-sm text-blue-600 bg-blue-50 p-2 rounded my-1",children:"Offer accepted! The brand will now prepare the contract and deliverables. Check back for updates."}),F.status==="contract_sent_to_creator"&&w.jsx("p",{className:"text-sm text-green-600 bg-green-50 p-2 rounded my-1",children:"Contract received! Review and respond. (Viewing/signing feature coming soon)"}),F.offer_details&&w.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded my-1",children:[w.jsx("p",{className:"font-medium",children:"Offer Details:"}),w.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(F.offer_details,null,2)})]}),F.enrolled_at&&w.jsxs("p",{className:"text-xs text-gray-400",children:["Accepted on: ",new Date(F.enrolled_at).toLocaleDateString()]}),F.status==="pending_creator_approval"&&w.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 flex space-x-3",children:[w.jsx("button",{onClick:()=>H(F.id,"approved_by_creator"),disabled:P===F.id,className:"bg-green-500 hover:bg-green-600 text-white font-semibold py-1.5 px-3 rounded text-sm disabled:bg-gray-400",children:P===F.id?"Accepting...":"Accept Offer"}),w.jsx("button",{onClick:()=>H(F.id,"rejected_by_creator"),disabled:P===F.id,className:"bg-red-500 hover:bg-red-600 text-white font-semibold py-1.5 px-3 rounded text-sm disabled:bg-gray-400",children:P===F.id?"Rejecting...":"Reject Offer"})]})]},F.id)})})]})]})]})},uI=()=>{const{user:i,profile:e,role:t,loading:n,error:o}=ar(),[a,d]=V.useState("landing"),f=()=>d("landing"),m=()=>d("auth"),p=()=>{d(i&&e?"userDashboard":"auth")};if(n)return w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:w.jsx("div",{className:"text-xl font-semibold text-gray-700",children:"Loading Application..."})});const y=()=>{if(!i||!e)return a==="auth"?w.jsx(C0,{onAuthSuccess:p}):w.jsx(hh,{navigateToAuth:m,navigateToDashboard:p});if(a==="landing")return w.jsx(hh,{navigateToAuth:m,navigateToDashboard:p});if(a==="auth"&&i&&e){if(t==="brand")return w.jsx(zp,{});if(t==="creator")return w.jsx(Gp,{})}return t==="brand"?w.jsx(zp,{}):t==="creator"?w.jsx(Gp,{}):w.jsxs("div",{className:"p-8 text-center",children:[w.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Role Not Determined"}),w.jsx("p",{className:"text-gray-700 mb-4",children:"We couldn't determine your user role. This might be a temporary issue or your profile setup might be incomplete. This can occur if the 'role' was not correctly set during sign-up in the user's metadata, or if the database trigger to create the profile failed."}),o&&w.jsx("p",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:o}),w.jsx("p",{className:"text-gray-600",children:"Please try logging out and signing in again. If the problem persists, ensure your account was created with a selected role or contact support."})]})};return w.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col",children:[w.jsx(v0,{navigateToLanding:f,navigateToAuth:m,navigateToDashboard:p}),w.jsxs("main",{className:"flex-grow",children:[o&&a!=="auth"&&!n&&w.jsxs("div",{className:"p-4 bg-red-100 text-red-700 text-center",children:["Authentication error: ",o,"."]}),y()]})]})},cI=()=>w.jsx(y0,{children:w.jsx(uI,{})}),qp=document.getElementById("root");qp?Jy.createRoot(qp).render(w.jsx(zy.StrictMode,{children:w.jsx(cI,{})})):console.error("Failed to find the root element");export{Hp as g};
